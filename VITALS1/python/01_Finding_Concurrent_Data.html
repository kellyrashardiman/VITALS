<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.31">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>1 Finding Concurrent ECOSTRESS and EMIT Data – VITALS</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-e1a5c8363afafaef2c763b6775fbf3ca.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark-8ef56b68f8fa1e9d2ba328e99e439f80.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-e1a5c8363afafaef2c763b6775fbf3ca.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-bb05f5d0074da2129d766b238819cd35.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark-da07cd31545148f957c25e8e93bd3f75.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../../site_libs/bootstrap/bootstrap-bb05f5d0074da2129d766b238819cd35.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#setup" id="toc-setup" class="nav-link active" data-scroll-target="#setup">1. Setup</a>
  <ul class="collapse">
  <li><a href="#nasa-earthdata-login-credentials" id="toc-nasa-earthdata-login-credentials" class="nav-link" data-scroll-target="#nasa-earthdata-login-credentials">1.2 NASA Earthdata Login Credentials</a></li>
  </ul></li>
  <li><a href="#searching-for-ecostress-and-emit-data" id="toc-searching-for-ecostress-and-emit-data" class="nav-link" data-scroll-target="#searching-for-ecostress-and-emit-data">2. Searching for ECOSTRESS and EMIT Data</a>
  <ul class="collapse">
  <li><a href="#define-spatial-region-of-interest" id="toc-define-spatial-region-of-interest" class="nav-link" data-scroll-target="#define-spatial-region-of-interest">2.1 Define Spatial Region of Interest</a></li>
  <li><a href="#define-collections-of-interest" id="toc-define-collections-of-interest" class="nav-link" data-scroll-target="#define-collections-of-interest">2.2 Define Collections of Interest</a></li>
  <li><a href="#define-date-range" id="toc-define-date-range" class="nav-link" data-scroll-target="#define-date-range">2.3 Define Date Range</a></li>
  <li><a href="#searching" id="toc-searching" class="nav-link" data-scroll-target="#searching">2.4 Searching</a></li>
  </ul></li>
  <li><a href="#organizing-and-filtering-results" id="toc-organizing-and-filtering-results" class="nav-link" data-scroll-target="#organizing-and-filtering-results">3. Organizing and Filtering Results</a></li>
  <li><a href="#visualizing-intersecting-coverage" id="toc-visualizing-intersecting-coverage" class="nav-link" data-scroll-target="#visualizing-intersecting-coverage">4. Visualizing Intersecting Coverage</a></li>
  <li><a href="#generating-a-list-of-urls" id="toc-generating-a-list-of-urls" class="nav-link" data-scroll-target="#generating-a-list-of-urls">5. Generating a list of URLs</a></li>
  <li><a href="#streaming-or-downloading-data" id="toc-streaming-or-downloading-data" class="nav-link" data-scroll-target="#streaming-or-downloading-data">6. Streaming or Downloading Data</a>
  <ul class="collapse">
  <li><a href="#streaming-data-workflow" id="toc-streaming-data-workflow" class="nav-link" data-scroll-target="#streaming-data-workflow">6.1 Streaming Data Workflow</a></li>
  <li><a href="#downloading-data-workflow" id="toc-downloading-data-workflow" class="nav-link" data-scroll-target="#downloading-data-workflow">6.2 Downloading Data Workflow</a></li>
  </ul></li>
  <li><a href="#contact-info" id="toc-contact-info" class="nav-link" data-scroll-target="#contact-info">Contact Info:</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">


<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">1 Finding Concurrent ECOSTRESS and EMIT Data</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<blockquote class="blockquote">
<p>This notebook is part of a numbered series (01-05) that focuses specifically on using EMIT and ECOSTRESS Data together to prepare for future SBG research.</p>
</blockquote>
<p><strong>Summary</strong></p>
<p>Both the ECOsystem Spaceborne Thermal Radiometer Experiment on Space Station (ECOSTRESS) and the Earth surface Mineral dust source InvesTigation (EMIT) instruments are located on the International Space Station (ISS). Their overlapping fields of view provide an unprecedented opportunity to demonstrate the compounded benefits of working with both datasets. In this notebook we will show how to search for data using the <a href="https://github.com/nsidc/earthaccess"><code>earthaccess</code> Python library</a>, then how to filter down results to find concurrently acquired ECOSTRESS and EMIT data. Another notebook offering similar functionality via a different approach is available: <a href="../../VITALS1/python/Finding_Coincident_Airborne_and_Orbital_Data.html">Finding Coincident Airborne and Orbital Data</a>.</p>
<div>
<p><img src="../img/concurrent_data.png" width="750"></p>
</div>
<p><strong>Background</strong></p>
<p>The <strong>ECOSTRESS</strong> instrument is a multispectral thermal imaging radiometer designed to answer three overarching science questions:</p>
<ul>
<li>How is the terrestrial biosphere responding to changes in water availability?</li>
<li>How do changes in diurnal vegetation water stress the global carbon cycle?</li>
<li>Can agricultural vulnerability be reduced through advanced monitoring of agricultural water consumptive use and improved drought estimation?</li>
</ul>
<p>The ECOSTRESS mission is answering these questions by accurately measuring the temperature of plants. Plants regulate their temperature by releasing water through tiny pores on their leaves called stomata. If they have sufficient water they can maintain their temperature, but if there is insufficient water, their temperatures rise and this temperature rise can be measured with ECOSTRESS. The images acquired by ECOSTRESS are the most detailed temperature images of the surface ever acquired from space and can be used to measure the temperature of an individual farmers field.</p>
<p>More details about ECOSTRESS and its associated products can be found on the <a href="https://ecostress.jpl.nasa.gov/">ECOSTRESS website</a> and <a href="https://lpdaac.usgs.gov/product_search/?query=ECOSTRESS&amp;status=Operational&amp;view=cards&amp;sort=title">ECOSTRESS product pages</a> hosted by the Land Processes Distributed Active Archive Center (LP DAAC).</p>
<p>The <strong>EMIT</strong> instrument is an imaging spectrometer that measures light in visible and infrared wavelengths. These measurements display unique spectral signatures that correspond to the composition on the Earth’s surface. The EMIT mission focuses specifically on mapping the composition of minerals to better understand the effects of mineral dust throughout the Earth system and human populations now and in the future. In addition, the EMIT instrument can be used in other applications, such as mapping of greenhouse gases, snow properties, and water resources.</p>
<p>More details about EMIT and its associated products can be found on the <a href="https://earth.jpl.nasa.gov/emit/">EMIT website</a> and <a href="https://lpdaac.usgs.gov/product_search/?query=EMIT&amp;status=Operational&amp;view=cards&amp;sort=title">EMIT product pages</a> hosted by the LP DAAC.</p>
<p><strong>Requirements</strong><br>
- <a href="https://urs.earthdata.nasa.gov/home">NASA Earthdata Account</a><br>
- <em>No Python setup requirements if connected to the workshop cloud instance!</em><br>
- <strong>Local Only</strong> Set up Python Environment - See <strong>setup_instructions.md</strong> in the <code>/setup/</code> folder to set up a local compatible Python environment</p>
<p><strong>Learning Objectives</strong><br>
- How to use <code>earthaccess</code> to find concurrent EMIT and ECOSTRESS data.<br>
- How to export a list of files and download them programmatically.</p>
<p><strong>Tutorial Outline</strong></p>
<ol type="1">
<li>Setup</li>
<li>Searching for EMIT and ECOSTRESS Data</li>
<li>Organizing and Filtering Results</li>
<li>Visualizing Intersecting Coverage</li>
<li>Creating a list of Results and Desired Asset URLs</li>
<li>Streaming or Downloading Data</li>
</ol>
<section id="setup" class="level2">
<h2 class="anchored" data-anchor-id="setup">1. Setup</h2>
<p>Import the required Python libraries.</p>
<div id="cell-3" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;metadata&quot;,&quot;value&quot;:{}}" data-tags="[]" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import required libraries</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> folium</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> earthaccess</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.colors <span class="im">as</span> mcolors</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> branca.element <span class="im">import</span> Figure</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> shapely.geometry <span class="im">import</span> MultiPolygon, Polygon, box</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> shapely.geometry.polygon <span class="im">import</span> orient</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> timedelta</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="nasa-earthdata-login-credentials" class="level3">
<h3 class="anchored" data-anchor-id="nasa-earthdata-login-credentials">1.2 NASA Earthdata Login Credentials</h3>
<p>To download or stream NASA data you will need an Earthdata account, you can create one <a href="https://urs.earthdata.nasa.gov/home">here</a>. We will use the <code>login</code> function from the <code>earthaccess</code> library for authentication before downloading at the end of the notebook. This function can also be used to create a local <code>.netrc</code> file if it doesn’t exist or add your login info to an existing <code>.netrc</code> file. If no Earthdata Login credentials are found in the <code>.netrc</code> you’ll be prompted for them. This step is not necessary to conduct searches but is needed to download or stream data.</p>
</section>
</section>
<section id="searching-for-ecostress-and-emit-data" class="level2">
<h2 class="anchored" data-anchor-id="searching-for-ecostress-and-emit-data">2. Searching for ECOSTRESS and EMIT Data</h2>
<p>In this example we wish to find concurrent (coincident) EMIT_L2A_RFL and ECOSTRESS_L2T_LSTE products available from the NASA Earthdata Cloud. Conceptually, we know almost all scenes should have a corresponding scene from the other instrument since they are on the same platform. To search for available granules (scenes), we will use the <a href="https://github.com/nsidc/earthaccess"><em>earthaccess</em> Python library</a>, which is designed to simplify authentication and searching for NASA earth science data.</p>
<p>After finding the available scenes matching our search critera, we will convert our results to a <code>GeoDataFrame</code> and then do some filtering using the available metadata to narrow down our scenes to only those with corresponding scenes collected at the same time from the other instrument.</p>
<section id="define-spatial-region-of-interest" class="level3">
<h3 class="anchored" data-anchor-id="define-spatial-region-of-interest">2.1 Define Spatial Region of Interest</h3>
<p>For this example, our spatial region of interest (ROI) will be the a region near Santa Barbara, CA that contains the <a href="https://www.dangermondpreserve.org/">Jack and Laura Dangermond Preserve</a> and the <a href="https://sedgwick.nrs.ucsb.edu/">Sedgwick Reserve</a>.</p>
<p>We will create a rectangular ROI surrounding these two reserves as well as some of the agricultural region between. Even though the shape is rectangular, we elect to search using a polygon rather than a standard bounding box in <code>earthaccess</code> because typically, bounding boxes will typically have a larger spatial extent, capturing a lot of area we may not be interested in. This becomes more important for searches with larger ROIs than our example here. To search using a polygon with earthaccess, we need to format our ROI as a counter-clockwise list of coordinate pairs.</p>
<p>Open the <code>geojson</code> file containing the Dangermond and Sedgwick boundaries as a <code>geodataframe</code>, and check the coordinate reference system (CRS) of the data.</p>
<div id="cell-6" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;metadata&quot;,&quot;value&quot;:{}}" data-tags="[]" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>polygon <span class="op">=</span> gpd.read_file(<span class="st">'../data/agu_workshop_roi.geojson'</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>polygon.crs</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="2">
<pre><code>&lt;Geographic 2D CRS: EPSG:4326&gt;
Name: WGS 84
Axis Info [ellipsoidal]:
- Lat[north]: Geodetic latitude (degree)
- Lon[east]: Geodetic longitude (degree)
Area of Use:
- name: World.
- bounds: (-180.0, -90.0, 180.0, 90.0)
Datum: World Geodetic System 1984 ensemble
- Ellipsoid: WGS 84
- Prime Meridian: Greenwich</code></pre>
</div>
</div>
<p>The CRS is <strong>EPSG:4326</strong> (WGS84), which is also the CRS we want the data in to submit for our search.</p>
<p>Next, let’s examine our polygon a bit closer.</p>
<div id="cell-8" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;metadata&quot;,&quot;value&quot;:{}}" data-tags="[]" data-execution_count="3">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>polygon</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Name</th>
<th data-quarto-table-cell-role="th">Acreage</th>
<th data-quarto-table-cell-role="th">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Sedgwick Reserve</td>
<td>5874.210000</td>
<td>POLYGON ((-120.04041 34.74342, -120.04122 34.7...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Dangermond Preserve</td>
<td>24458.615397</td>
<td>POLYGON ((-120.47367 34.56987, -120.47427 34.5...</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>We can see this <code>geodataframe</code> consists of two polygons, that we want to include in our study site. We need to create an exterior boundary polygon containing these, and make sure the vertices are in counterclockwise order to submit them in our query. To do this, create a polygon consisting of all the geometries, then create a bounding rectangle. This will give us a simple exterior polygon around our two ROIs. After that, use the <code>orient</code> function to place our coordinate pairs in counterclockwise order.</p>
<div id="cell-10" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;metadata&quot;,&quot;value&quot;:{}}" data-tags="[]" data-execution_count="4">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge all Polygon geometries and create external boundary</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>roi_poly <span class="op">=</span> polygon.union_all().envelope</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Re-order vertices to counterclockwise</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>roi_poly <span class="op">=</span> orient(roi_poly, sign<span class="op">=</span><span class="fl">1.0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Make a <code>GeoDataFrame</code> consisting of the bounding box geometry.</p>
<div id="cell-12" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;metadata&quot;,&quot;value&quot;:{}}" data-tags="[]" data-execution_count="5">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">"Name"</span>:[<span class="st">"ROI Bounding Box"</span>]})</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>agu_bbox <span class="op">=</span> gpd.GeoDataFrame({<span class="st">"Name"</span>:[<span class="st">"ROI Bounding Box"</span>], <span class="st">"geometry"</span>:[roi_poly]},crs<span class="op">=</span><span class="st">"EPSG:4326"</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>agu_bbox</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Name</th>
<th data-quarto-table-cell-role="th">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>ROI Bounding Box</td>
<td>POLYGON ((-120.49929 34.4423, -120.01175 34.44...</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>We can write this bounding box to a file for use in future notebooks.</p>
<div id="cell-14" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;metadata&quot;,&quot;value&quot;:{}}" data-tags="[]" data-execution_count="6">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>agu_bbox.to_file(<span class="st">'../data/roi_bbox.geojson'</span>, driver<span class="op">=</span><span class="st">'GeoJSON'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-15" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>minx, miny, maxx, maxy <span class="op">=</span> polygon.total_bounds</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-16" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>minx</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<pre><code>np.float64(-120.499289029747)</code></pre>
</div>
</div>
<p>We can go ahead and visualize our region of interest and the exterior boundary polygon containing ROIs.</p>
<div id="cell-18" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;metadata&quot;,&quot;value&quot;:{}}" data-tags="[]" data-execution_count="9">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>fig_roi <span class="op">=</span> Figure(width<span class="op">=</span><span class="st">"750px"</span>, height<span class="op">=</span><span class="st">"375px"</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>map_roi <span class="op">=</span> folium.Map(tiles<span class="op">=</span><span class="st">'https://mt1.google.com/vt/lyrs=y&amp;x=</span><span class="sc">{x}</span><span class="st">&amp;y=</span><span class="sc">{y}</span><span class="st">&amp;z=</span><span class="sc">{z}</span><span class="st">'</span>, attr<span class="op">=</span><span class="st">'Google'</span>, name<span class="op">=</span><span class="st">'Google'</span>)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>fig_roi.add_child(map_roi)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Add Bounding Box Polygon</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>folium.GeoJson(agu_bbox,</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>                name<span class="op">=</span><span class="st">'bounding_box'</span>,</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>                ).add_to(map_roi)</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Add roi geodataframe</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>polygon.explore(</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Name"</span>,</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>    popup<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>    categorical<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>    cmap<span class="op">=</span><span class="st">'Set3'</span>,</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>    style_kwds<span class="op">=</span><span class="bu">dict</span>(opacity<span class="op">=</span><span class="fl">0.7</span>, fillOpacity<span class="op">=</span><span class="fl">0.4</span>),</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>    name<span class="op">=</span><span class="st">"Regions of Interest"</span>,</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>    m<span class="op">=</span>map_roi</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Add Layer Control</span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>map_roi.add_child(folium.LayerControl())</span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert BBOX ROI</span></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>minx, miny, maxx, maxy <span class="op">=</span> polygon.total_bounds</span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Set Map Bounds</span></span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>map_roi.fit_bounds(bounds<span class="op">=</span>((miny, minx), (maxy, maxx)))</span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>fig_roi</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<iframe srcdoc="<!DOCTYPE html>
<html>
<head>
    
    <meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; />
    
        <script>
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        </script>
    
    <style>html, body {width: 100%;height: 100%;margin: 0;padding: 0;}</style>
    <style>#map {position:absolute;top:0;bottom:0;right:0;left:0;}</style>
    <script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;></script>
    <script src=&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;></script>
    <script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;></script>
    <script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;></script>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/>
    
            <meta name=&quot;viewport&quot; content=&quot;width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; />
            <style>
                #map_02c9be56792035634fd916f9aa342ac2 {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            </style>
        
    
                    <style>
                        .foliumtooltip {
                            
                        }
                       .foliumtooltip table{
                            margin: auto;
                        }
                        .foliumtooltip tr{
                            text-align: left;
                        }
                        .foliumtooltip th{
                            padding: 2px; padding-right: 8px;
                        }
                    </style>
            
    
                    <style>
                        .foliumpopup {
                            margin: auto;
                        }
                       .foliumpopup table{
                            margin: auto;
                        }
                        .foliumpopup tr{
                            text-align: left;
                        }
                        .foliumpopup th{
                            padding: 2px; padding-right: 8px;
                        }
                    </style>
            
    
    <script src=&quot;https://code.jquery.com/ui/1.12.1/jquery-ui.js&quot;></script>
    <script>$( function() {
        $( &quot;.maplegend&quot; ).draggable({
            start: function (event, ui) {
                $(this).css({
                    right: &quot;auto&quot;,
                    top: &quot;auto&quot;,
                    bottom: &quot;auto&quot;
                });
            }
        });
    });
    </script>
    <style type='text/css'>
      .maplegend {
        position: absolute;
        z-index:9999;
        background-color: rgba(255, 255, 255, .8);
        border-radius: 5px;
        box-shadow: 0 0 15px rgba(0,0,0,0.2);
        padding: 10px;
        font: 12px/14px Arial, Helvetica, sans-serif;
        right: 10px;
        bottom: 20px;
      }
      .maplegend .legend-title {
        text-align: left;
        margin-bottom: 5px;
        font-weight: bold;
        }
      .maplegend .legend-scale ul {
        margin: 0;
        margin-bottom: 0px;
        padding: 0;
        float: left;
        list-style: none;
        }
      .maplegend .legend-scale ul li {
        list-style: none;
        margin-left: 0;
        line-height: 16px;
        margin-bottom: 2px;
        }
      .maplegend ul.legend-labels li span {
        display: block;
        float: left;
        height: 14px;
        width: 14px;
        margin-right: 5px;
        margin-left: 0;
        border: 0px solid #ccc;
        }
      .maplegend .legend-source {
        color: #777;
        clear: both;
        }
      .maplegend a {
        color: #777;
        }
    </style>
    
</head>
<body>
    
    
    <div id='maplegend Name' class='maplegend'>
        <div class='legend-title'>Name</div>
        <div class='legend-scale'>
            <ul class='legend-labels'>
                <li><span style='background:#8dd3c7'></span>Dangermond Preserve</li>
                <li><span style='background:#ffed6f'></span>Sedgwick Reserve</li>
            </ul>
        </div>
    </div>
    
    
            <div class=&quot;folium-map&quot; id=&quot;map_02c9be56792035634fd916f9aa342ac2&quot; ></div>
        
</body>
<script>
    
    
            var map_02c9be56792035634fd916f9aa342ac2 = L.map(
                &quot;map_02c9be56792035634fd916f9aa342ac2&quot;,
                {
                    center: [0.0, 0.0],
                    crs: L.CRS.EPSG3857,
                    ...{
  &quot;zoom&quot;: 1,
  &quot;zoomControl&quot;: true,
  &quot;preferCanvas&quot;: false,
  &quot;name&quot;: &quot;Google&quot;,
}

                }
            );

            

        
    
            var tile_layer_92ae26dd3bc3a1241ee5f8b2b6389f56 = L.tileLayer(
                &quot;https://mt1.google.com/vt/lyrs=y\u0026x={x}\u0026y={y}\u0026z={z}&quot;,
                {
  &quot;minZoom&quot;: 0,
  &quot;maxZoom&quot;: 18,
  &quot;maxNativeZoom&quot;: 18,
  &quot;noWrap&quot;: false,
  &quot;attribution&quot;: &quot;Google&quot;,
  &quot;subdomains&quot;: &quot;abc&quot;,
  &quot;detectRetina&quot;: false,
  &quot;tms&quot;: false,
  &quot;opacity&quot;: 1,
}

            );
        
    
            tile_layer_92ae26dd3bc3a1241ee5f8b2b6389f56.addTo(map_02c9be56792035634fd916f9aa342ac2);
        
    

        function geo_json_3a86f7f24de9b67f037fd3b11b244ded_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_3a86f7f24de9b67f037fd3b11b244ded = L.geoJson(null, {
                onEachFeature: geo_json_3a86f7f24de9b67f037fd3b11b244ded_onEachFeature,
            
            ...{
}
        });

        function geo_json_3a86f7f24de9b67f037fd3b11b244ded_add (data) {
            geo_json_3a86f7f24de9b67f037fd3b11b244ded
                .addData(data);
        }
            geo_json_3a86f7f24de9b67f037fd3b11b244ded_add({&quot;bbox&quot;: [-120.499289029747, 34.4422979925537, -120.01175444547289, 34.743985733609556], &quot;features&quot;: [{&quot;bbox&quot;: [-120.499289029747, 34.4422979925537, -120.01175444547289, 34.743985733609556], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-120.499289029747, 34.4422979925537], [-120.01175444547289, 34.4422979925537], [-120.01175444547289, 34.743985733609556], [-120.499289029747, 34.743985733609556], [-120.499289029747, 34.4422979925537]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;properties&quot;: {&quot;Name&quot;: &quot;ROI Bounding Box&quot;}, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});
        geo_json_3a86f7f24de9b67f037fd3b11b244ded.setStyle(function(feature) {return feature.properties.style;});

        
    
            geo_json_3a86f7f24de9b67f037fd3b11b244ded.addTo(map_02c9be56792035634fd916f9aa342ac2);
        
    
        function geo_json_c06552e88f08168c3fd8a6eca4a1345e_styler(feature) {
            switch(feature.id) {
                case &quot;0&quot;: 
                    return {&quot;color&quot;: &quot;#ffed6f&quot;, &quot;fillColor&quot;: &quot;#ffed6f&quot;, &quot;fillOpacity&quot;: 0.4, &quot;opacity&quot;: 0.7, &quot;weight&quot;: 2};
                default:
                    return {&quot;color&quot;: &quot;#8dd3c7&quot;, &quot;fillColor&quot;: &quot;#8dd3c7&quot;, &quot;fillOpacity&quot;: 0.4, &quot;opacity&quot;: 0.7, &quot;weight&quot;: 2};
            }
        }
        function geo_json_c06552e88f08168c3fd8a6eca4a1345e_highlighter(feature) {
            switch(feature.id) {
                default:
                    return {&quot;fillOpacity&quot;: 0.75};
            }
        }
        function geo_json_c06552e88f08168c3fd8a6eca4a1345e_pointToLayer(feature, latlng) {
            var opts = {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;#3388ff&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: true, &quot;fillColor&quot;: &quot;#3388ff&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;opacity&quot;: 1.0, &quot;radius&quot;: 2, &quot;stroke&quot;: true, &quot;weight&quot;: 3};
            
            let style = geo_json_c06552e88f08168c3fd8a6eca4a1345e_styler(feature)
            Object.assign(opts, style)
            
            return new L.CircleMarker(latlng, opts)
        }

        function geo_json_c06552e88f08168c3fd8a6eca4a1345e_onEachFeature(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    if(typeof e.target.setStyle === &quot;function&quot;){
                            geo_json_c06552e88f08168c3fd8a6eca4a1345e.resetStyle(e.target);
                    }
                },
                mouseover: function(e) {
                    if(typeof e.target.setStyle === &quot;function&quot;){
                        const highlightStyle = geo_json_c06552e88f08168c3fd8a6eca4a1345e_highlighter(e.target.feature)
                        e.target.setStyle(highlightStyle);
                    }
                },
            });
        };
        var geo_json_c06552e88f08168c3fd8a6eca4a1345e = L.geoJson(null, {
                onEachFeature: geo_json_c06552e88f08168c3fd8a6eca4a1345e_onEachFeature,
            
                style: geo_json_c06552e88f08168c3fd8a6eca4a1345e_styler,
                pointToLayer: geo_json_c06552e88f08168c3fd8a6eca4a1345e_pointToLayer,
            ...{
}
        });

        function geo_json_c06552e88f08168c3fd8a6eca4a1345e_add (data) {
            geo_json_c06552e88f08168c3fd8a6eca4a1345e
                .addData(data);
        }
            geo_json_c06552e88f08168c3fd8a6eca4a1345e_add({&quot;bbox&quot;: [-120.499289029747, 34.4422979925537, -120.01175444547289, 34.743985733609556], &quot;features&quot;: [{&quot;bbox&quot;: [-120.07168830185367, 34.67874372675126, -120.01175444547289, 34.743985733609556], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-120.04041123986089, 34.74342268352134], [-120.04121889204112, 34.743735066665835], [-120.04233680955474, 34.743985733609556], [-120.04347866996883, 34.742743832848156], [-120.04466572607036, 34.7424755469407], [-120.0448866879965, 34.74191265779671], [-120.04532294168776, 34.74159883138454], [-120.04804960173333, 34.741930978842824], [-120.04882554857339, 34.74223480319798], [-120.04949820119256, 34.74213674742191], [-120.04993617368781, 34.74236084527639], [-120.05063226768779, 34.74246510413567], [-120.05084529371707, 34.74296515425221], [-120.05181991617927, 34.742292688494636], [-120.05248533194795, 34.74258310344906], [-120.05311871770458, 34.742205091313274], [-120.0537722979379, 34.7422376073561], [-120.05409711012827, 34.74194830623631], [-120.0543713797112, 34.74209128417946], [-120.05479918084599, 34.74210391650734], [-120.05579592922335, 34.741837342896304], [-120.05694257691489, 34.74214544480658], [-120.05741042037987, 34.74181489507682], [-120.05767271320745, 34.74132546754863], [-120.05754227015422, 34.740740878009824], [-120.05876345149959, 34.74069180836263], [-120.05917953489605, 34.74018712575532], [-120.0587615854979, 34.739770015724844], [-120.06043616892654, 34.73832197492165], [-120.06128451686234, 34.73743320382969], [-120.0633872937648, 34.73640466515508], [-120.0639059857869, 34.7363786768863], [-120.06403134870462, 34.73519616510308], [-120.06454804185732, 34.734541873380046], [-120.06744848879882, 34.733043732603065], [-120.070616303288, 34.72952389483826], [-120.07043959994115, 34.72724173490022], [-120.0711658556598, 34.72294007365655], [-120.07168830185367, 34.71997034050748], [-120.06802222094016, 34.71707138144172], [-120.0643838637534, 34.71556891113268], [-120.06181919501256, 34.71432727384942], [-120.06086869366344, 34.7146474924856], [-120.0601201043257, 34.7146055700268], [-120.05915143262852, 34.712156508207215], [-120.05914365552792, 34.71213594341261], [-120.0579297886696, 34.709929219916546], [-120.05770835562292, 34.70940385347888], [-120.05751031403676, 34.708753407845755], [-120.05739358464504, 34.707625117415304], [-120.05644763385853, 34.70594280996333], [-120.05643958520336, 34.70592877328525], [-120.05560802087543, 34.7041919156709], [-120.05554467210189, 34.70251089221562], [-120.05550630815135, 34.701492772768894], [-120.055461488798, 34.7005885983348], [-120.0554596736261, 34.7005550655234], [-120.0554039826769, 34.69948129063735], [-120.05538831873399, 34.698385230495944], [-120.05526178291916, 34.69616125098816], [-120.05517157722116, 34.694136196842145], [-120.05507940302671, 34.69206681413075], [-120.05507556891348, 34.691797549336464], [-120.05506238375865, 34.69087158829482], [-120.05516147749043, 34.69025048197192], [-120.05537367433509, 34.688920416937414], [-120.05477895715674, 34.687500193851115], [-120.05421030242205, 34.68614216540855], [-120.05437973139783, 34.683147158844996], [-120.05446824425277, 34.681582630902554], [-120.05427316208798, 34.68056492337604], [-120.05409520266919, 34.67963650372387], [-120.05409236336455, 34.67898649251284], [-120.05086593954367, 34.67894506251114], [-120.04735720219035, 34.67889985551723], [-120.0454382179078, 34.67887508968519], [-120.04296564515735, 34.67884313196442], [-120.03885718195134, 34.67878992264703], [-120.03882024814752, 34.67878944343524], [-120.038822553688, 34.67878278821947], [-120.03864999677779, 34.67878153792925], [-120.03857836007664, 34.67878101897387], [-120.0375931324717, 34.6787738631857], [-120.03344480724418, 34.67877083712449], [-120.0285350182976, 34.67874372675126], [-120.02766842116552, 34.67966056614673], [-120.02688127769018, 34.681520761856035], [-120.02565480881036, 34.686067202877275], [-120.02557636256647, 34.68749492328606], [-120.02540359502339, 34.69063897254925], [-120.02698181220869, 34.691998736361825], [-120.02707411605091, 34.704552662731395], [-120.02711070780717, 34.71876004647024], [-120.02728384103979, 34.719704576193706], [-120.02488659066623, 34.72151568825152], [-120.01860679260076, 34.72166938674092], [-120.01819018507503, 34.721863965265676], [-120.01794880316505, 34.72197670352912], [-120.0181373446802, 34.723016839560394], [-120.0181601976407, 34.72314289819512], [-120.01268426806213, 34.72738510493605], [-120.01248884292058, 34.72753649045302], [-120.01243858361981, 34.72813618399153], [-120.01175444547289, 34.729442988434734], [-120.01960069899336, 34.735545259144054], [-120.02895215128893, 34.742804281371775], [-120.02912625895728, 34.742742063707205], [-120.02981138599067, 34.7427657274346], [-120.03090839289258, 34.74269810021536], [-120.03202999082784, 34.74302707415178], [-120.03311348576628, 34.74237415359347], [-120.03333602264894, 34.74317636970352], [-120.03380537304476, 34.74313736951284], [-120.03475265629952, 34.743324641364374], [-120.03595506984117, 34.74345547658775], [-120.03733930865612, 34.742861728096315], [-120.04041123986089, 34.74342268352134]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;properties&quot;: {&quot;Acreage&quot;: 5874.21, &quot;Name&quot;: &quot;Sedgwick Reserve&quot;, &quot;__folium_color&quot;: &quot;#ffed6f&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-120.499289029747, 34.4422979925537, -120.357702146634, 34.574184013493], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-120.473673757175, 34.5698725745769], [-120.474268898347, 34.5700040405158], [-120.474600420056, 34.5701232448023], [-120.474945113745, 34.5701935127921], [-120.475165291462, 34.5701956555251], [-120.475829839562, 34.5703522163797], [-120.476126837274, 34.570484771851], [-120.476367652784, 34.5705644460913], [-120.476767257077, 34.5707922837598], [-120.476956580558, 34.570862527191], [-120.47733898406, 34.5709833977747], [-120.477599964183, 34.5710588660795], [-120.47817850394, 34.5712261617217], [-120.481738523721, 34.5722400097051], [-120.486565296247, 34.5739613611966], [-120.487336678587, 34.5741731203603], [-120.487458438702, 34.574184013493], [-120.487792444198, 34.5688007459224], [-120.488221077539, 34.5644728137622], [-120.488428943236, 34.5614911377697], [-120.489191659322, 34.5505070706799], [-120.489267306881, 34.5494175061616], [-120.48991932846, 34.5400250245606], [-120.49155701063, 34.5153077705207], [-120.490914956929, 34.5153470831478], [-120.490858485216, 34.515352131213], [-120.490409558688, 34.5153020000506], [-120.490331954646, 34.514724729607], [-120.490604744291, 34.5144394345523], [-120.491028935108, 34.5144253018181], [-120.49161675957, 34.514405716414], [-120.491877588824, 34.5117997226576], [-120.492389392466, 34.5116813855763], [-120.492404682661, 34.5114140472664], [-120.492268448668, 34.5107907923188], [-120.493188821525, 34.5110243541547], [-120.493970350972, 34.5109179461089], [-120.495068521249, 34.5108643502897], [-120.495038659034, 34.5115200674382], [-120.495039163031, 34.5120929218963], [-120.495984242865, 34.5125697378642], [-120.498181346587, 34.5130307621533], [-120.498123390052, 34.5123369936108], [-120.498095764042, 34.5120062836795], [-120.497985803758, 34.5106899533691], [-120.498090845087, 34.5106889410481], [-120.498303942318, 34.5105477020061], [-120.498625059495, 34.5103348662614], [-120.498762182787, 34.5102439802922], [-120.498871329196, 34.510171638186], [-120.498894553595, 34.5100221260595], [-120.498923852075, 34.509873347969], [-120.498959195165, 34.5097254716365], [-120.499000538146, 34.5095786657504], [-120.499059573485, 34.509374940859], [-120.499147206376, 34.5090423929844], [-120.499202559112, 34.508820276959], [-120.499239734895, 34.5085488741828], [-120.499250794996, 34.5083486531177], [-120.499254083819, 34.5081482414938], [-120.499249597285, 34.507947844773], [-120.499237340047, 34.5077476710807], [-120.499217325463, 34.5075479267013], [-120.499189573417, 34.507348816988], [-120.499154112519, 34.5071505481559], [-120.499289029747, 34.5071287386186], [-120.499233464986, 34.5069405231472], [-120.499221872857, 34.5069012600297], [-120.499063837923, 34.5064646326826], [-120.498932996477, 34.5061570457899], [-120.498818408853, 34.5058720119715], [-120.498623315983, 34.5054732140658], [-120.498181088135, 34.5047088104681], [-120.498023587755, 34.5044365643444], [-120.497580505627, 34.503737414272], [-120.496127891706, 34.501135679845], [-120.496240754909, 34.5009613084681], [-120.498011374504, 34.5005639046725], [-120.496306010257, 34.4955043966029], [-120.495431360006, 34.4947586359758], [-120.49356932046, 34.4945977079514], [-120.490977259782, 34.4920943138676], [-120.490423013336, 34.4903539674059], [-120.490172553336, 34.4895674891384], [-120.489164684652, 34.4881510121425], [-120.488200969833, 34.4870440781173], [-120.4853270001, 34.4847528928572], [-120.482819733794, 34.4836013402195], [-120.481681765562, 34.4824480217754], [-120.480701626145, 34.481628318715], [-120.478441632665, 34.4797381663922], [-120.47555283623, 34.4736303146603], [-120.474105463343, 34.4681500043105], [-120.473110842247, 34.4582269564998], [-120.473291886157, 34.4579641923204], [-120.473033475491, 34.4576316197362], [-120.472465884553, 34.454125694944], [-120.471356238116, 34.4532217783727], [-120.471167899797, 34.4530029200902], [-120.471109787149, 34.4528695275691], [-120.471051009323, 34.4527137192015], [-120.470927808689, 34.4523696044615], [-120.470671353503, 34.4520348496189], [-120.470471318945, 34.4516461693752], [-120.470385940596, 34.4508530206709], [-120.470123969058, 34.4504283806063], [-120.470758833753, 34.4500416825379], [-120.471181960124, 34.4497839510985], [-120.471229059664, 34.4495184686253], [-120.471391697591, 34.449055697612], [-120.471832931443, 34.4488269769211], [-120.471729365609, 34.4486278295873], [-120.471769946125, 34.4482690466694], [-120.471601486969, 34.4482642285405], [-120.471060999993, 34.4485040526842], [-120.470621018159, 34.4483090603018], [-120.470211336098, 34.4489511927851], [-120.470026476405, 34.4492427757797], [-120.469515037907, 34.4494160416012], [-120.469387911847, 34.4496920110722], [-120.468461511874, 34.4498741956832], [-120.46792536886, 34.4492790586956], [-120.467628986712, 34.4489500597483], [-120.466905240826, 34.4492565098178], [-120.465943966248, 34.4496195672036], [-120.464655193256, 34.4493073949995], [-120.463223894796, 34.4489163034687], [-120.462337772009, 34.448543633795], [-120.462042398192, 34.4482141712519], [-120.461744849481, 34.4478822790921], [-120.460304664703, 34.4478302116895], [-120.459417799422, 34.4474569508048], [-120.458732212012, 34.4468598517634], [-120.458633656842, 34.4466090206738], [-120.458568737608, 34.4465524767442], [-120.458539199729, 34.446368614307], [-120.458348529198, 34.4458833332416], [-120.458437544011, 34.4457358718019], [-120.458793232881, 34.4451463663297], [-120.458580378696, 34.4446115419742], [-120.457432245138, 34.4448826048084], [-120.456587131457, 34.4444478258254], [-120.456509992418, 34.4436265031584], [-120.456251349387, 34.4433206638602], [-120.454226425466, 34.4430624112946], [-120.452653913344, 34.4422979925537], [-120.451946239776, 34.4428771121843], [-120.452723807357, 34.4439614575846], [-120.452662645674, 34.4446677630137], [-120.45299172018, 34.4452437279766], [-120.452378457834, 34.4463626224092], [-120.451337168761, 34.4473187915795], [-120.450815849917, 34.4475094506155], [-120.449452910472, 34.4480707744484], [-120.447853024737, 34.4485992714863], [-120.44651085367, 34.4489421125084], [-120.446197814568, 34.4490987913058], [-120.445933656964, 34.4493747732761], [-120.445690728059, 34.4497555826001], [-120.445664821648, 34.4501094624365], [-120.445527423023, 34.4503753710323], [-120.445067684528, 34.4507906225475], [-120.444091370672, 34.4512313167406], [-120.442577243774, 34.451592613765], [-120.441686382297, 34.4516926907227], [-120.441166637934, 34.4517131747041], [-120.439587673205, 34.4515143770564], [-120.438752019035, 34.4514910820401], [-120.438144977525, 34.4514230890755], [-120.437709009405, 34.4514118015094], [-120.437216386959, 34.4515319659313], [-120.435667778514, 34.4515430183671], [-120.433915709264, 34.4512173076069], [-120.433511977675, 34.4512159591047], [-120.432471559705, 34.4510758598459], [-120.431694041238, 34.4509711547898], [-120.430274981666, 34.4506354702667], [-120.429709877218, 34.4505698414206], [-120.427587364016, 34.4503233179728], [-120.426876996484, 34.4501715463065], [-120.426573549182, 34.4501067116115], [-120.426252977703, 34.4500382182339], [-120.426069043101, 34.4499828397236], [-120.425305471374, 34.4498825737903], [-120.424686149467, 34.4498427536747], [-120.424093665868, 34.449750436401], [-120.42369541987, 34.4497960027391], [-120.422983491614, 34.4497472263523], [-120.422578813789, 34.4498377637825], [-120.422318659693, 34.4498616485717], [-120.42166000293, 34.449948737694], [-120.421170073867, 34.4500761754989], [-120.420347271565, 34.4504210764452], [-120.419873540428, 34.4507205520857], [-120.419606490998, 34.4509742238109], [-120.419461252804, 34.4512224611556], [-120.41938000696, 34.451458347596], [-120.419247384212, 34.4517429451309], [-120.419092122298, 34.4520046495873], [-120.418732145913, 34.4523178169448], [-120.418551892974, 34.4526816394167], [-120.418130582665, 34.4530465606527], [-120.417327488518, 34.453337695674], [-120.417002568518, 34.4533290902482], [-120.416815715888, 34.4534425426647], [-120.416424365124, 34.4535355947168], [-120.416421240814, 34.4535684660067], [-120.416386822882, 34.4539302025903], [-120.415253324658, 34.4658423090285], [-120.415203159248, 34.4663696083867], [-120.414631607579, 34.4723787160223], [-120.414212857113, 34.4767808450416], [-120.413944433307, 34.479602343388], [-120.413572918172, 34.4835074657814], [-120.412758369169, 34.4920677898374], [-120.412631823749, 34.4933975958215], [-120.407916577951, 34.4935100590974], [-120.402751700365, 34.4936316954858], [-120.401901835879, 34.4936516876257], [-120.397238699848, 34.493748887132], [-120.39273691307, 34.4938674321066], [-120.392352081229, 34.4938750793525], [-120.384896714585, 34.4940327862872], [-120.379993579422, 34.4941362584553], [-120.377839650906, 34.4941844453204], [-120.375991353319, 34.4952713912298], [-120.367965449605, 34.4999906114074], [-120.36774377502, 34.5001209379492], [-120.367258680304, 34.5001285638213], [-120.359126424738, 34.5002522419618], [-120.357702146634, 34.5032125420973], [-120.361217526605, 34.5032709808622], [-120.362496951952, 34.5049436060675], [-120.363440873389, 34.5054831944267], [-120.364018740336, 34.5077227097778], [-120.36332904295, 34.5097295561369], [-120.365031422912, 34.512252712451], [-120.364823694436, 34.5132242917346], [-120.365451937221, 34.5139480412655], [-120.365912887008, 34.5150702730013], [-120.366075878921, 34.5151302783262], [-120.367480358202, 34.5152657277682], [-120.372391160666, 34.5151371671737], [-120.374779134133, 34.5169819151248], [-120.375285265406, 34.5190637237547], [-120.375991611003, 34.5200795699009], [-120.376052771394, 34.5201675308613], [-120.375991612848, 34.520312157324], [-120.375825956212, 34.5207038871999], [-120.375371804881, 34.521710699293], [-120.376007023441, 34.5220722562213], [-120.376074413575, 34.5220940649509], [-120.379466799792, 34.5231916669648], [-120.381006658897, 34.5232676428505], [-120.38092307914, 34.5223796673316], [-120.381034098714, 34.5224374368346], [-120.381499443479, 34.5224710672393], [-120.382046494517, 34.5225665382582], [-120.382515496285, 34.5227091531803], [-120.383152184578, 34.5231667974061], [-120.383582357008, 34.5229531980577], [-120.383939000798, 34.5230580496765], [-120.384237198508, 34.5236258124823], [-120.38483672678, 34.523690302715], [-120.385028538973, 34.5237824405921], [-120.385133055655, 34.5243014906451], [-120.385260356192, 34.5246971293101], [-120.385664797403, 34.5247741292164], [-120.385915594467, 34.5250083704182], [-120.386574598676, 34.5256794109736], [-120.387111529327, 34.5257416314091], [-120.38773024861, 34.5260540412035], [-120.388022004063, 34.5262971539976], [-120.388676419447, 34.5264054084611], [-120.389529073335, 34.5265464525374], [-120.390504185866, 34.526640802745], [-120.391009207089, 34.5268431739642], [-120.391005721786, 34.5267264247092], [-120.391437325341, 34.5266492011179], [-120.391967696094, 34.5267829930735], [-120.393598177772, 34.5279179871388], [-120.394278999323, 34.5281045152003], [-120.395653188293, 34.5280785241694], [-120.396858599886, 34.5283576586532], [-120.397527577687, 34.5283971605779], [-120.398163868095, 34.5282842450376], [-120.398358239519, 34.5275018086042], [-120.399457794637, 34.5296274952515], [-120.402517701634, 34.5306632925699], [-120.404956161772, 34.531969355796], [-120.40789835488, 34.5352810789159], [-120.410703648928, 34.5371664852474], [-120.409762714298, 34.5407936959614], [-120.407431728691, 34.5416454409844], [-120.407227166948, 34.5419090188626], [-120.406306210521, 34.543079851039], [-120.406944456954, 34.5441272876299], [-120.407522149604, 34.5456565779677], [-120.406954902755, 34.5465708190505], [-120.408105884287, 34.5471715234752], [-120.412261839527, 34.5465707765058], [-120.413848941698, 34.5465817557597], [-120.416997571025, 34.5466034809769], [-120.420464462939, 34.5466273070577], [-120.423568318481, 34.5453059371054], [-120.425671437831, 34.5457077935336], [-120.429380659739, 34.5470565617633], [-120.430824990401, 34.5478858249855], [-120.432308362638, 34.5487374678597], [-120.430068074025, 34.5557487591411], [-120.430279946032, 34.5590111176329], [-120.432859692109, 34.5591264238944], [-120.434094197464, 34.5597121193747], [-120.43569484508, 34.559997118885], [-120.438418856458, 34.5594295723898], [-120.439090381371, 34.5593398374361], [-120.440824185975, 34.5596621084705], [-120.441772170159, 34.5599314010404], [-120.44634239648, 34.5617714738772], [-120.449838762706, 34.5627923451978], [-120.450674169161, 34.5631521959599], [-120.451140845572, 34.5635020140722], [-120.452148375883, 34.564463817018], [-120.455352153541, 34.5644374351165], [-120.456989566593, 34.5644071417117], [-120.458123596772, 34.5653783565248], [-120.459283206652, 34.565609708385], [-120.459998574452, 34.5669259718166], [-120.460969801901, 34.5675287882282], [-120.461670716271, 34.5676146889461], [-120.46336962219, 34.568922931321], [-120.465191204463, 34.570325572233], [-120.465566315188, 34.5702263782914], [-120.466455319658, 34.5699912928409], [-120.467503319101, 34.5699493585098], [-120.46821518151, 34.5699452256349], [-120.469612717659, 34.5698961713165], [-120.470564669519, 34.5698064646454], [-120.470932506464, 34.569834087755], [-120.471305184293, 34.5698172428706], [-120.47175025689, 34.569738163534], [-120.472009329261, 34.5697256920336], [-120.472274479659, 34.569749151624], [-120.473033797364, 34.5699056034398], [-120.473321205161, 34.5698689443084], [-120.473673757175, 34.5698725745769]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;1&quot;, &quot;properties&quot;: {&quot;Acreage&quot;: 24458.6153971, &quot;Name&quot;: &quot;Dangermond Preserve&quot;, &quot;__folium_color&quot;: &quot;#8dd3c7&quot;}, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
    geo_json_c06552e88f08168c3fd8a6eca4a1345e.bindTooltip(
    function(layer){
    let div = L.DomUtil.create('div');
    
    let handleObject = feature=>typeof(feature)=='object' ? JSON.stringify(feature) : feature;
    let fields = [&quot;Name&quot;, &quot;Acreage&quot;];
    let aliases = [&quot;Name&quot;, &quot;Acreage&quot;];
    let table = '<table>' +
        String(
        fields.map(
        (v,i)=>
        `<tr>
            <th>${aliases[i]}</th>
            
            <td>${handleObject(layer.feature.properties[v])}</td>
        </tr>`).join(''))
    +'</table>';
    div.innerHTML=table;
    
    return div
    }
    ,{
  &quot;sticky&quot;: true,
  &quot;className&quot;: &quot;foliumtooltip&quot;,
});
                     
    
    geo_json_c06552e88f08168c3fd8a6eca4a1345e.bindPopup(
    function(layer){
    let div = L.DomUtil.create('div');
    
    let handleObject = feature=>typeof(feature)=='object' ? JSON.stringify(feature) : feature;
    let fields = [&quot;Name&quot;, &quot;Acreage&quot;];
    let aliases = [&quot;Name&quot;, &quot;Acreage&quot;];
    let table = '<table>' +
        String(
        fields.map(
        (v,i)=>
        `<tr>
            <th>${aliases[i].toLocaleString()}</th>
            
            <td>${handleObject(layer.feature.properties[v]).toLocaleString()}</td>
        </tr>`).join(''))
    +'</table>';
    div.innerHTML=table;
    
    return div
    }
    ,{
  &quot;className&quot;: &quot;foliumpopup&quot;,
});
                     
    
            geo_json_c06552e88f08168c3fd8a6eca4a1345e.addTo(map_02c9be56792035634fd916f9aa342ac2);
        
    
            var layer_control_8a60f06cf0876c8f4d6fad58211a31ef_layers = {
                base_layers : {
                    &quot;https://mt1.google.com/vt/lyrs=y\u0026x={x}\u0026y={y}\u0026z={z}&quot; : tile_layer_92ae26dd3bc3a1241ee5f8b2b6389f56,
                },
                overlays :  {
                    &quot;bounding_box&quot; : geo_json_3a86f7f24de9b67f037fd3b11b244ded,
                    &quot;Regions of Interest&quot; : geo_json_c06552e88f08168c3fd8a6eca4a1345e,
                },
            };
            let layer_control_8a60f06cf0876c8f4d6fad58211a31ef = L.control.layers(
                layer_control_8a60f06cf0876c8f4d6fad58211a31ef_layers.base_layers,
                layer_control_8a60f06cf0876c8f4d6fad58211a31ef_layers.overlays,
                {
  &quot;position&quot;: &quot;topright&quot;,
  &quot;collapsed&quot;: true,
  &quot;autoZIndex&quot;: true,
}
            ).addTo(map_02c9be56792035634fd916f9aa342ac2);

        
    
            map_02c9be56792035634fd916f9aa342ac2.fitBounds(
                [[34.4422979925537, -120.499289029747], [34.743985733609556, -120.01175444547289]],
                {}
            );
        
</script>
</html>" width="750px" height="375px" style="border:none !important;" "allowfullscreen"="" "webkitallowfullscreen"="" "mozallowfullscreen"=""></iframe>
</div>
</div>
<p>Above we can see our regions of interest (ROIs) and the exterior boundary polygon containing the ROIs that we opened. We can hover over different areas to see the name of each ROI.</p>
<p>Lastly, we need to convert our polygon to a list of coordinate pairs, so it will be accepted as a ‘polygon’ search parameter in <code>earthaccess</code>, as it expects a list of coordinate pairs in a counterclockwise order.</p>
<div id="cell-21" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;metadata&quot;,&quot;value&quot;:{}}" data-tags="[]" data-execution_count="10">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set ROI as list of exterior polygon vertices as coordinate pairs</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>roi <span class="op">=</span> <span class="bu">list</span>(roi_poly.exterior.coords)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="define-collections-of-interest" class="level3">
<h3 class="anchored" data-anchor-id="define-collections-of-interest">2.2 Define Collections of Interest</h3>
<p>We need to specify which products we want to search for. The best way to do this is using their concept-id. As mentioned above, we will conduct our search using the EMIT Level 2A Reflectance (EMITL2ARFL) and ECOSTRESS Level 2 Tiled Land Surface Temperature and Emissivity (ECO_L2T_LSTE). We can do some quick collection queries using <code>earthaccess</code> to retrieve the concept-id for each dataset.</p>
<blockquote class="blockquote">
<p>Note: Here we use the Tiled ECOSTRESS LSTE Product. This will also work with the gridded LSTE and the swath; however, the swath product does not have a browse image for the visualization in section 4 and will require additional processing for subsequent analysis.</p>
</blockquote>
<div id="cell-23" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;metadata&quot;,&quot;value&quot;:{}}" data-tags="[]" data-execution_count="11">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># EMIT Collection Query</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>emit_collection_query <span class="op">=</span> earthaccess.collection_query().keyword(<span class="st">'EMIT L2A Reflectance'</span>)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>emit_collection_query.fields([<span class="st">'ShortName'</span>,<span class="st">'EntryTitle'</span>,<span class="st">'Version'</span>]).get()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<pre><code>[{
   "meta": {
     "concept-id": "C2408750690-LPCLOUD",
     "granule-count": 151308,
     "provider-id": "LPCLOUD"
   },
   "umm": {
     "ShortName": "EMITL2ARFL",
     "EntryTitle": "EMIT L2A Estimated Surface Reflectance and Uncertainty and Masks 60 m V001",
     "Version": "001"
   }
 }]</code></pre>
</div>
</div>
<div id="cell-24" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;metadata&quot;,&quot;value&quot;:{}}" data-tags="[]" data-execution_count="12">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ECOSTRESS Collection Query</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>eco_collection_query <span class="op">=</span> earthaccess.collection_query().keyword(<span class="st">'ECOSTRESS L2 Tiled LSTE'</span>)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>eco_collection_query.fields([<span class="st">'ShortName'</span>,<span class="st">'EntryTitle'</span>,<span class="st">'Version'</span>]).get()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<pre><code>[{
   "meta": {
     "concept-id": "C2076090826-LPCLOUD",
     "granule-count": 12900789,
     "provider-id": "LPCLOUD"
   },
   "umm": {
     "ShortName": "ECO_L2T_LSTE",
     "EntryTitle": "ECOSTRESS Tiled Land Surface Temperature and Emissivity Instantaneous L2 Global 70 m V002",
     "Version": "002"
   }
 },
 {
   "meta": {
     "concept-id": "C2076114664-LPCLOUD",
     "granule-count": 686028,
     "provider-id": "LPCLOUD"
   },
   "umm": {
     "ShortName": "ECO_L2_LSTE",
     "EntryTitle": "ECOSTRESS Swath Land Surface Temperature and Emissivity Instantaneous L2 Global 70 m V002",
     "Version": "002"
   }
 },
 {
   "meta": {
     "concept-id": "C2090073749-LPCLOUD",
     "granule-count": 1748239,
     "provider-id": "LPCLOUD"
   },
   "umm": {
     "ShortName": "ECO_L2T_STARS",
     "EntryTitle": "ECOSTRESS Tiled Ancillary NDVI and Albedo L2 Global 70 m V002",
     "Version": "002"
   }
 }]</code></pre>
</div>
</div>
<p>If your search returns multiple products, be sure to select the right concept-id For this example it will be the first one. We want to use the <code>LPCLOUD</code> ECOSTRESS Tiled Land Surface Temperature and Emissivity (concept-id: “C2076090826-LPCLOUD”). Create a list of these concept-ids for our data search.</p>
<div id="cell-26" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;metadata&quot;,&quot;value&quot;:{}}" data-tags="[]" data-execution_count="13">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Data Collections for our search</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="co"># EMIT/ECO Tiled</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>concept_ids <span class="op">=</span> [<span class="st">'C2408750690-LPCLOUD'</span>, <span class="st">'C2076090826-LPCLOUD'</span>]</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co"># # EMIT/ECO Swath</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="co"># concept_ids = ['C2408750690-LPCLOUD', 'C2076114664-LPCLOUD']</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="define-date-range" class="level3">
<h3 class="anchored" data-anchor-id="define-date-range">2.3 Define Date Range</h3>
<p>For our date range, we’ll look at data collected between January and October 2023. The <code>date_range</code> can be specified as a pair of dates, start and end (up to, not including).</p>
<div id="cell-28" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;metadata&quot;,&quot;value&quot;:{}}" data-tags="[]" data-execution_count="14">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define Date Range</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>date_range <span class="op">=</span> (<span class="st">'2023-01-01'</span>,<span class="st">'2023-11-01'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="searching" class="level3">
<h3 class="anchored" data-anchor-id="searching">2.4 Searching</h3>
<p>Submit a query using <code>earthaccess</code>.</p>
<div id="cell-30" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;metadata&quot;,&quot;value&quot;:{}}" data-tags="[]" data-execution_count="15">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>results <span class="op">=</span> earthaccess.search_data(</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    concept_id<span class="op">=</span>concept_ids,</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    polygon<span class="op">=</span>roi,</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    temporal<span class="op">=</span>date_range,</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Granules Found: </span><span class="sc">{</span><span class="bu">len</span>(results)<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Granules Found: 632</code></pre>
</div>
</div>
<p>Show the first 2 items from the list to see the format of the results.</p>
<div id="cell-32" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>results[:<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="16">
<pre><code>[Collection: {'ShortName': 'ECO_L2T_LSTE', 'Version': '002'}
 Spatial coverage: {'HorizontalSpatialDomain': {'Geometry': {'BoundingRectangles': [{'WestBoundingCoordinate': -120.295181, 'EastBoundingCoordinate': -119.065819, 'NorthBoundingCoordinate': 35.225021, 'SouthBoundingCoordinate': 34.210026}]}}}
 Temporal coverage: {'RangeDateTime': {'BeginningDateTime': '2023-01-01T15:52:48.650Z', 'EndingDateTime': '2023-01-01T15:53:40.620Z'}}
 Size(MB): 2.49626
 Data: ['https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_25460_016_11SKU_20230101T155248_0710_01/ECOv002_L2T_LSTE_25460_016_11SKU_20230101T155248_0710_01_water.tif', 'https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_25460_016_11SKU_20230101T155248_0710_01/ECOv002_L2T_LSTE_25460_016_11SKU_20230101T155248_0710_01_cloud.tif', 'https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_25460_016_11SKU_20230101T155248_0710_01/ECOv002_L2T_LSTE_25460_016_11SKU_20230101T155248_0710_01_view_zenith.tif', 'https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_25460_016_11SKU_20230101T155248_0710_01/ECOv002_L2T_LSTE_25460_016_11SKU_20230101T155248_0710_01_height.tif', 'https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_25460_016_11SKU_20230101T155248_0710_01/ECOv002_L2T_LSTE_25460_016_11SKU_20230101T155248_0710_01_QC.tif', 'https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_25460_016_11SKU_20230101T155248_0710_01/ECOv002_L2T_LSTE_25460_016_11SKU_20230101T155248_0710_01_LST.tif', 'https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_25460_016_11SKU_20230101T155248_0710_01/ECOv002_L2T_LSTE_25460_016_11SKU_20230101T155248_0710_01_LST_err.tif', 'https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_25460_016_11SKU_20230101T155248_0710_01/ECOv002_L2T_LSTE_25460_016_11SKU_20230101T155248_0710_01_EmisWB.tif'],
 Collection: {'ShortName': 'ECO_L2T_LSTE', 'Version': '002'}
 Spatial coverage: {'HorizontalSpatialDomain': {'Geometry': {'BoundingRectangles': [{'WestBoundingCoordinate': -120.29518354417259, 'EastBoundingCoordinate': -119.06581640006657, 'NorthBoundingCoordinate': 35.22502010920582, 'SouthBoundingCoordinate': 34.210027193369996}]}}}
 Temporal coverage: {'RangeDateTime': {'BeginningDateTime': '2023-01-01T15:52:48.650Z', 'EndingDateTime': '2023-01-01T15:53:40.620Z'}}
 Size(MB): 2.38
 Data: ['https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_25460_016_11SKU_20230101T155248_0712_02/ECOv002_L2T_LSTE_25460_016_11SKU_20230101T155248_0712_02_water.tif', 'https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_25460_016_11SKU_20230101T155248_0712_02/ECOv002_L2T_LSTE_25460_016_11SKU_20230101T155248_0712_02_cloud.tif', 'https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_25460_016_11SKU_20230101T155248_0712_02/ECOv002_L2T_LSTE_25460_016_11SKU_20230101T155248_0712_02_view_zenith.tif', 'https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_25460_016_11SKU_20230101T155248_0712_02/ECOv002_L2T_LSTE_25460_016_11SKU_20230101T155248_0712_02_height.tif', 'https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_25460_016_11SKU_20230101T155248_0712_02/ECOv002_L2T_LSTE_25460_016_11SKU_20230101T155248_0712_02_QC.tif', 'https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_25460_016_11SKU_20230101T155248_0712_02/ECOv002_L2T_LSTE_25460_016_11SKU_20230101T155248_0712_02_LST.tif', 'https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_25460_016_11SKU_20230101T155248_0712_02/ECOv002_L2T_LSTE_25460_016_11SKU_20230101T155248_0712_02_LST_err.tif', 'https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_25460_016_11SKU_20230101T155248_0712_02/ECOv002_L2T_LSTE_25460_016_11SKU_20230101T155248_0712_02_EmisWB.tif']]</code></pre>
</div>
</div>
</section>
</section>
<section id="organizing-and-filtering-results" class="level2">
<h2 class="anchored" data-anchor-id="organizing-and-filtering-results">3. Organizing and Filtering Results</h2>
<p>As we can see from above, the results object contains a list of objects with metadata and links. We can convert this to a more readable format, a dataframe. In addition, we can make it a <code>GeoDataFrame</code> by taking the spatial metadata and creating a shapely polygon representing the spatial coverage, and further customize which information we want to use from other metadata fields.</p>
<p>First, we’ll define a couple functions to help us make the conversion. One to extract the geometry from the metadata, one to extract the browse image (quicklook) url, and one to make our conversion to a <code>GeoDataFrame</code>.</p>
<div id="cell-34" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;metadata&quot;,&quot;value&quot;:{}}" data-tags="[]" data-execution_count="17">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Functions to Build Dataframe</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_shapely_object(result: earthaccess.results.DataGranule):</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co">    Create a shapely polygon of spatial coverage from results metadata.</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="co">    Will work for BoundingRectangles or GPolygons.</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get Geometry Keys</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>    geo <span class="op">=</span> result[<span class="st">"umm"</span>][<span class="st">"SpatialExtent"</span>][<span class="st">"HorizontalSpatialDomain"</span>][<span class="st">"Geometry"</span>]</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>    keys <span class="op">=</span> geo.keys()</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="st">"BoundingRectangles"</span> <span class="kw">in</span> keys:</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>        bounding_rectangle <span class="op">=</span> geo[<span class="st">"BoundingRectangles"</span>][<span class="dv">0</span>]</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Create bbox tuple</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>        bbox_coords <span class="op">=</span> (</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>            bounding_rectangle[<span class="st">"WestBoundingCoordinate"</span>],</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>            bounding_rectangle[<span class="st">"SouthBoundingCoordinate"</span>],</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>            bounding_rectangle[<span class="st">"EastBoundingCoordinate"</span>],</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>            bounding_rectangle[<span class="st">"NorthBoundingCoordinate"</span>],</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Create shapely geometry from bbox</span></span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>        shape <span class="op">=</span> box(<span class="op">*</span>bbox_coords, ccw<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> <span class="st">"GPolygons"</span> <span class="kw">in</span> keys:</span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a>        points <span class="op">=</span> geo[<span class="st">"GPolygons"</span>][<span class="dv">0</span>][<span class="st">"Boundary"</span>][<span class="st">"Points"</span>]</span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Create shapely geometry from polygons</span></span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a>        shape <span class="op">=</span> Polygon([[p[<span class="st">"Longitude"</span>], p[<span class="st">"Latitude"</span>]] <span class="cf">for</span> p <span class="kw">in</span> points])</span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">raise</span> <span class="pp">ValueError</span>(</span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Provided result does not contain bounding boxes/polygons or is incompatible."</span></span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb23-30"><a href="#cb23-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> shape</span>
<span id="cb23-31"><a href="#cb23-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-32"><a href="#cb23-32" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_png(result: earthaccess.results.DataGranule):</span>
<span id="cb23-33"><a href="#cb23-33" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb23-34"><a href="#cb23-34" aria-hidden="true" tabindex="-1"></a><span class="co">    Retrieve a png browse image if it exists or first jpg in list of urls</span></span>
<span id="cb23-35"><a href="#cb23-35" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb23-36"><a href="#cb23-36" aria-hidden="true" tabindex="-1"></a>    https_links <span class="op">=</span> [link <span class="cf">for</span> link <span class="kw">in</span> result.dataviz_links() <span class="cf">if</span> <span class="st">"https"</span> <span class="kw">in</span> link]</span>
<span id="cb23-37"><a href="#cb23-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(https_links) <span class="op">==</span> <span class="dv">1</span>:</span>
<span id="cb23-38"><a href="#cb23-38" aria-hidden="true" tabindex="-1"></a>        browse <span class="op">=</span> https_links[<span class="dv">0</span>]</span>
<span id="cb23-39"><a href="#cb23-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> <span class="bu">len</span>(https_links) <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb23-40"><a href="#cb23-40" aria-hidden="true" tabindex="-1"></a>        browse <span class="op">=</span> <span class="st">"no browse image"</span></span>
<span id="cb23-41"><a href="#cb23-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb23-42"><a href="#cb23-42" aria-hidden="true" tabindex="-1"></a>        browse <span class="op">=</span> [png <span class="cf">for</span> png <span class="kw">in</span> https_links <span class="cf">if</span> <span class="st">".png"</span> <span class="kw">in</span> png][<span class="dv">0</span>]</span>
<span id="cb23-43"><a href="#cb23-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">any</span>(browse) <span class="op">==</span> <span class="st">'no browse image'</span>:</span>
<span id="cb23-44"><a href="#cb23-44" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"Some granules have no browse imagery."</span>)</span>
<span id="cb23-45"><a href="#cb23-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> browse</span>
<span id="cb23-46"><a href="#cb23-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-47"><a href="#cb23-47" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> results_to_gdf(results: <span class="bu">list</span>):</span>
<span id="cb23-48"><a href="#cb23-48" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb23-49"><a href="#cb23-49" aria-hidden="true" tabindex="-1"></a><span class="co">    Takes a list of results from earthaccess and converts to a geodataframe.</span></span>
<span id="cb23-50"><a href="#cb23-50" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb23-51"><a href="#cb23-51" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create Dataframe of Results Metadata</span></span>
<span id="cb23-52"><a href="#cb23-52" aria-hidden="true" tabindex="-1"></a>    results_df <span class="op">=</span> pd.json_normalize(results)</span>
<span id="cb23-53"><a href="#cb23-53" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Shorten column Names</span></span>
<span id="cb23-54"><a href="#cb23-54" aria-hidden="true" tabindex="-1"></a>    results_df.columns <span class="op">=</span> [</span>
<span id="cb23-55"><a href="#cb23-55" aria-hidden="true" tabindex="-1"></a>        col.split(<span class="st">"."</span>)[<span class="op">-</span><span class="dv">1</span>] <span class="cf">if</span> <span class="st">"."</span> <span class="kw">in</span> col <span class="cf">else</span> col <span class="cf">for</span> col <span class="kw">in</span> results_df.columns</span>
<span id="cb23-56"><a href="#cb23-56" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb23-57"><a href="#cb23-57" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create shapely polygons for result</span></span>
<span id="cb23-58"><a href="#cb23-58" aria-hidden="true" tabindex="-1"></a>    geometries <span class="op">=</span> [</span>
<span id="cb23-59"><a href="#cb23-59" aria-hidden="true" tabindex="-1"></a>        get_shapely_object(results[index]) <span class="cf">for</span> index <span class="kw">in</span> results_df.index.to_list()</span>
<span id="cb23-60"><a href="#cb23-60" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb23-61"><a href="#cb23-61" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convert to GeoDataframe</span></span>
<span id="cb23-62"><a href="#cb23-62" aria-hidden="true" tabindex="-1"></a>    gdf <span class="op">=</span> gpd.GeoDataFrame(results_df, geometry<span class="op">=</span>geometries, crs<span class="op">=</span><span class="st">"EPSG:4326"</span>)</span>
<span id="cb23-63"><a href="#cb23-63" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add browse imagery and data links and product shortname</span></span>
<span id="cb23-64"><a href="#cb23-64" aria-hidden="true" tabindex="-1"></a>    gdf[<span class="st">"browse"</span>] <span class="op">=</span> [get_png(granule) <span class="cf">for</span> granule <span class="kw">in</span> results]</span>
<span id="cb23-65"><a href="#cb23-65" aria-hidden="true" tabindex="-1"></a>    gdf[<span class="st">"shortname"</span>] <span class="op">=</span> [</span>
<span id="cb23-66"><a href="#cb23-66" aria-hidden="true" tabindex="-1"></a>        result[<span class="st">"umm"</span>][<span class="st">"CollectionReference"</span>][<span class="st">"ShortName"</span>] <span class="cf">for</span> result <span class="kw">in</span> results</span>
<span id="cb23-67"><a href="#cb23-67" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb23-68"><a href="#cb23-68" aria-hidden="true" tabindex="-1"></a>    gdf[<span class="st">"data"</span>] <span class="op">=</span> [granule.data_links() <span class="cf">for</span> granule <span class="kw">in</span> results]</span>
<span id="cb23-69"><a href="#cb23-69" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> gdf</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Use our functions to create a <code>GeoDataFrame</code>.</p>
<div id="cell-36" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>gdf <span class="op">=</span> results_to_gdf(results)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Preview our geodataframe to get an idea what it looks like.</p>
<div id="cell-38" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;metadata&quot;,&quot;value&quot;:{}}" data-tags="[]" data-execution_count="19">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>pd.set_option(<span class="st">'display.max_columns'</span>, <span class="va">None</span>)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>gdf.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">size</th>
<th data-quarto-table-cell-role="th">concept-type</th>
<th data-quarto-table-cell-role="th">concept-id</th>
<th data-quarto-table-cell-role="th">revision-id</th>
<th data-quarto-table-cell-role="th">native-id</th>
<th data-quarto-table-cell-role="th">collection-concept-id</th>
<th data-quarto-table-cell-role="th">provider-id</th>
<th data-quarto-table-cell-role="th">format</th>
<th data-quarto-table-cell-role="th">revision-date</th>
<th data-quarto-table-cell-role="th">BeginningDateTime</th>
<th data-quarto-table-cell-role="th">EndingDateTime</th>
<th data-quarto-table-cell-role="th">OrbitCalculatedSpatialDomains</th>
<th data-quarto-table-cell-role="th">GranuleUR</th>
<th data-quarto-table-cell-role="th">AdditionalAttributes</th>
<th data-quarto-table-cell-role="th">MeasuredParameters</th>
<th data-quarto-table-cell-role="th">BoundingRectangles</th>
<th data-quarto-table-cell-role="th">ProviderDates</th>
<th data-quarto-table-cell-role="th">ShortName</th>
<th data-quarto-table-cell-role="th">Version</th>
<th data-quarto-table-cell-role="th">PGEVersion</th>
<th data-quarto-table-cell-role="th">RelatedUrls</th>
<th data-quarto-table-cell-role="th">DayNightFlag</th>
<th data-quarto-table-cell-role="th">Identifiers</th>
<th data-quarto-table-cell-role="th">ProductionDateTime</th>
<th data-quarto-table-cell-role="th">ArchiveAndDistributionInformation</th>
<th data-quarto-table-cell-role="th">Platforms</th>
<th data-quarto-table-cell-role="th">URL</th>
<th data-quarto-table-cell-role="th">Name</th>
<th data-quarto-table-cell-role="th">Version</th>
<th data-quarto-table-cell-role="th">GPolygons</th>
<th data-quarto-table-cell-role="th">PGEName</th>
<th data-quarto-table-cell-role="th">CloudCover</th>
<th data-quarto-table-cell-role="th">geometry</th>
<th data-quarto-table-cell-role="th">browse</th>
<th data-quarto-table-cell-role="th">shortname</th>
<th data-quarto-table-cell-role="th">data</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2.496260</td>
<td>granule</td>
<td>G2581836170-LPCLOUD</td>
<td>2</td>
<td>ECOv002_L2T_LSTE_25460_016_11SKU_20230101T1552...</td>
<td>C2076090826-LPCLOUD</td>
<td>LPCLOUD</td>
<td>application/echo10+xml</td>
<td>2024-01-20T15:57:11.266Z</td>
<td>2023-01-01T15:52:48.650Z</td>
<td>2023-01-01T15:53:40.620Z</td>
<td>[{'BeginOrbitNumber': 25460, 'EndOrbitNumber':...</td>
<td>ECOv002_L2T_LSTE_25460_016_11SKU_20230101T1552...</td>
<td>[{'Name': 'identifier_product_doi', 'Values': ...</td>
<td>[{'ParameterName': 'L2T_LSTE'}]</td>
<td>[{'WestBoundingCoordinate': -120.295181, 'East...</td>
<td>[{'Date': '2023-01-07T04:45:46.314Z', 'Type': ...</td>
<td>ECO_L2T_LSTE</td>
<td>002</td>
<td>v1.4.8</td>
<td>[{'URL': 'https://data.lpdaac.earthdatacloud.n...</td>
<td>Day</td>
<td>[{'Identifier': 'ECOv002_L2T_LSTE_25460_016_11...</td>
<td>2023-01-02T10:54:07.207Z</td>
<td>[{'Name': 'Not provided', 'Size': 2.49626, 'Si...</td>
<td>[{'ShortName': 'ISS', 'Instruments': [{'ShortN...</td>
<td>https://cdn.earthdata.nasa.gov/umm/granule/v1.6.6</td>
<td>UMM-G</td>
<td>1.6.6</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>POLYGON ((-119.06582 34.21003, -119.06582 35.2...</td>
<td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
<td>ECO_L2T_LSTE</td>
<td>[https://data.lpdaac.earthdatacloud.nasa.gov/l...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2.380000</td>
<td>granule</td>
<td>G3452958201-LPCLOUD</td>
<td>1</td>
<td>ECOv002_L2T_LSTE_25460_016_11SKU_20230101T1552...</td>
<td>C2076090826-LPCLOUD</td>
<td>LPCLOUD</td>
<td>application/echo10+xml</td>
<td>2025-03-17T21:23:46.945Z</td>
<td>2023-01-01T15:52:48.650Z</td>
<td>2023-01-01T15:53:40.620Z</td>
<td>[{'BeginOrbitNumber': 25460, 'EndOrbitNumber':...</td>
<td>ECOv002_L2T_LSTE_25460_016_11SKU_20230101T1552...</td>
<td>[{'Name': 'identifier_product_doi', 'Values': ...</td>
<td>[{'ParameterName': 'ECO_L2T_LSTE'}]</td>
<td>[{'WestBoundingCoordinate': -120.2951835441725...</td>
<td>[{'Date': '2025-01-14T22:26:07.174Z', 'Type': ...</td>
<td>ECO_L2T_LSTE</td>
<td>002</td>
<td>v1.12.4</td>
<td>[{'URL': 'https://data.lpdaac.earthdatacloud.n...</td>
<td>Day</td>
<td>[{'Identifier': 'ECOv002_L2T_LSTE_25460_016_11...</td>
<td>2025-01-14T22:26:07.174Z</td>
<td>[{'Name': 'Not provided', 'Size': 2.38, 'SizeU...</td>
<td>[{'ShortName': 'ISS', 'Instruments': [{'ShortN...</td>
<td>https://cdn.earthdata.nasa.gov/umm/granule/v1.6.6</td>
<td>UMM-G</td>
<td>1.6.6</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>POLYGON ((-119.06582 34.21003, -119.06582 35.2...</td>
<td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
<td>ECO_L2T_LSTE</td>
<td>[https://data.lpdaac.earthdatacloud.nasa.gov/l...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>0.292531</td>
<td>granule</td>
<td>G2586136519-LPCLOUD</td>
<td>2</td>
<td>ECOv002_L2T_LSTE_25486_005_10SGD_20230103T0743...</td>
<td>C2076090826-LPCLOUD</td>
<td>LPCLOUD</td>
<td>application/echo10+xml</td>
<td>2024-01-20T17:35:56.995Z</td>
<td>2023-01-03T07:43:30.510Z</td>
<td>2023-01-03T07:44:22.480Z</td>
<td>[{'BeginOrbitNumber': 25486, 'EndOrbitNumber':...</td>
<td>ECOv002_L2T_LSTE_25486_005_10SGD_20230103T0743...</td>
<td>[{'Name': 'identifier_product_doi', 'Values': ...</td>
<td>[{'ParameterName': 'L2T_LSTE'}]</td>
<td>[{'WestBoundingCoordinate': -120.828926, 'East...</td>
<td>[{'Date': '2023-01-10T15:47:57.390Z', 'Type': ...</td>
<td>ECO_L2T_LSTE</td>
<td>002</td>
<td>v1.4.8</td>
<td>[{'URL': 'https://data.lpdaac.earthdatacloud.n...</td>
<td>Night</td>
<td>[{'Identifier': 'ECOv002_L2T_LSTE_25486_005_10...</td>
<td>2023-01-04T15:18:13.022Z</td>
<td>[{'Name': 'Not provided', 'Size': 0.292531, 'S...</td>
<td>[{'ShortName': 'ISS', 'Instruments': [{'ShortN...</td>
<td>https://cdn.earthdata.nasa.gov/umm/granule/v1.6.6</td>
<td>UMM-G</td>
<td>1.6.6</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>POLYGON ((-119.59844 34.20719, -119.59844 35.2...</td>
<td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
<td>ECO_L2T_LSTE</td>
<td>[https://data.lpdaac.earthdatacloud.nasa.gov/l...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>0.290000</td>
<td>granule</td>
<td>G3452806592-LPCLOUD</td>
<td>1</td>
<td>ECOv002_L2T_LSTE_25486_005_10SGD_20230103T0743...</td>
<td>C2076090826-LPCLOUD</td>
<td>LPCLOUD</td>
<td>application/echo10+xml</td>
<td>2025-03-17T19:18:49.303Z</td>
<td>2023-01-03T07:43:30.511Z</td>
<td>2023-01-03T07:44:22.481Z</td>
<td>[{'BeginOrbitNumber': 25486, 'EndOrbitNumber':...</td>
<td>ECOv002_L2T_LSTE_25486_005_10SGD_20230103T0743...</td>
<td>[{'Name': 'identifier_product_doi', 'Values': ...</td>
<td>[{'ParameterName': 'ECO_L2T_LSTE'}]</td>
<td>[{'WestBoundingCoordinate': -120.8289272688636...</td>
<td>[{'Date': '2025-01-15T00:21:58.289Z', 'Type': ...</td>
<td>ECO_L2T_LSTE</td>
<td>002</td>
<td>v1.12.4</td>
<td>[{'URL': 'https://data.lpdaac.earthdatacloud.n...</td>
<td>Night</td>
<td>[{'Identifier': 'ECOv002_L2T_LSTE_25486_005_10...</td>
<td>2025-01-15T00:21:58.289Z</td>
<td>[{'Name': 'Not provided', 'Size': 0.29, 'SizeU...</td>
<td>[{'ShortName': 'ISS', 'Instruments': [{'ShortN...</td>
<td>https://cdn.earthdata.nasa.gov/umm/granule/v1.6.6</td>
<td>UMM-G</td>
<td>1.6.6</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>POLYGON ((-119.59844 34.20719, -119.59844 35.2...</td>
<td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
<td>ECO_L2T_LSTE</td>
<td>[https://data.lpdaac.earthdatacloud.nasa.gov/l...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>8.495430</td>
<td>granule</td>
<td>G2586136993-LPCLOUD</td>
<td>2</td>
<td>ECOv002_L2T_LSTE_25486_006_11SKU_20230103T0744...</td>
<td>C2076090826-LPCLOUD</td>
<td>LPCLOUD</td>
<td>application/echo10+xml</td>
<td>2024-01-20T17:36:01.364Z</td>
<td>2023-01-03T07:44:22.480Z</td>
<td>2023-01-03T07:45:14.450Z</td>
<td>[{'BeginOrbitNumber': 25486, 'EndOrbitNumber':...</td>
<td>ECOv002_L2T_LSTE_25486_006_11SKU_20230103T0744...</td>
<td>[{'Name': 'identifier_product_doi', 'Values': ...</td>
<td>[{'ParameterName': 'L2T_LSTE'}]</td>
<td>[{'WestBoundingCoordinate': -120.295181, 'East...</td>
<td>[{'Date': '2023-01-10T15:47:58.210Z', 'Type': ...</td>
<td>ECO_L2T_LSTE</td>
<td>002</td>
<td>v1.4.8</td>
<td>[{'URL': 'https://data.lpdaac.earthdatacloud.n...</td>
<td>Night</td>
<td>[{'Identifier': 'ECOv002_L2T_LSTE_25486_006_11...</td>
<td>2023-01-04T15:18:08.548Z</td>
<td>[{'Name': 'Not provided', 'Size': 8.49543, 'Si...</td>
<td>[{'ShortName': 'ISS', 'Instruments': [{'ShortN...</td>
<td>https://cdn.earthdata.nasa.gov/umm/granule/v1.6.6</td>
<td>UMM-G</td>
<td>1.6.6</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>POLYGON ((-119.06582 34.21003, -119.06582 35.2...</td>
<td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
<td>ECO_L2T_LSTE</td>
<td>[https://data.lpdaac.earthdatacloud.nasa.gov/l...</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>There are a lot of columns with data that is not relevant to our goal, so we can drop those. To do that, list the names of columns.</p>
<div id="cell-40" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;metadata&quot;,&quot;value&quot;:{}}" data-tags="[]" data-execution_count="20">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># List Column Names</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>gdf.columns</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="20">
<pre><code>Index(['size', 'concept-type', 'concept-id', 'revision-id', 'native-id',
       'collection-concept-id', 'provider-id', 'format', 'revision-date',
       'BeginningDateTime', 'EndingDateTime', 'OrbitCalculatedSpatialDomains',
       'GranuleUR', 'AdditionalAttributes', 'MeasuredParameters',
       'BoundingRectangles', 'ProviderDates', 'ShortName', 'Version',
       'PGEVersion', 'RelatedUrls', 'DayNightFlag', 'Identifiers',
       'ProductionDateTime', 'ArchiveAndDistributionInformation', 'Platforms',
       'URL', 'Name', 'Version', 'GPolygons', 'PGEName', 'CloudCover',
       'geometry', 'browse', 'shortname', 'data'],
      dtype='object')</code></pre>
</div>
</div>
<p>Now create a list of columns to keep and use it to filter the dataframe.</p>
<div id="cell-42" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;metadata&quot;,&quot;value&quot;:{}}" data-tags="[]" data-execution_count="21">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a list of columns to keep</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>keep_cols <span class="op">=</span> [</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"native-id"</span>,</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"collection-concept-id"</span>,</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"BeginningDateTime"</span>,</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"EndingDateTime"</span>,</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"CloudCover"</span>,</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"DayNightFlag"</span>,</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"geometry"</span>,</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"browse"</span>,</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"shortname"</span>,</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"data"</span>,</span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove unneeded columns</span></span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>gdf <span class="op">=</span> gdf[gdf.columns.intersection(keep_cols)]</span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>gdf.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="21">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">native-id</th>
<th data-quarto-table-cell-role="th">collection-concept-id</th>
<th data-quarto-table-cell-role="th">BeginningDateTime</th>
<th data-quarto-table-cell-role="th">EndingDateTime</th>
<th data-quarto-table-cell-role="th">DayNightFlag</th>
<th data-quarto-table-cell-role="th">CloudCover</th>
<th data-quarto-table-cell-role="th">geometry</th>
<th data-quarto-table-cell-role="th">browse</th>
<th data-quarto-table-cell-role="th">shortname</th>
<th data-quarto-table-cell-role="th">data</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>ECOv002_L2T_LSTE_25460_016_11SKU_20230101T1552...</td>
<td>C2076090826-LPCLOUD</td>
<td>2023-01-01T15:52:48.650Z</td>
<td>2023-01-01T15:53:40.620Z</td>
<td>Day</td>
<td>NaN</td>
<td>POLYGON ((-119.06582 34.21003, -119.06582 35.2...</td>
<td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
<td>ECO_L2T_LSTE</td>
<td>[https://data.lpdaac.earthdatacloud.nasa.gov/l...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>ECOv002_L2T_LSTE_25460_016_11SKU_20230101T1552...</td>
<td>C2076090826-LPCLOUD</td>
<td>2023-01-01T15:52:48.650Z</td>
<td>2023-01-01T15:53:40.620Z</td>
<td>Day</td>
<td>NaN</td>
<td>POLYGON ((-119.06582 34.21003, -119.06582 35.2...</td>
<td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
<td>ECO_L2T_LSTE</td>
<td>[https://data.lpdaac.earthdatacloud.nasa.gov/l...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>ECOv002_L2T_LSTE_25486_005_10SGD_20230103T0743...</td>
<td>C2076090826-LPCLOUD</td>
<td>2023-01-03T07:43:30.510Z</td>
<td>2023-01-03T07:44:22.480Z</td>
<td>Night</td>
<td>NaN</td>
<td>POLYGON ((-119.59844 34.20719, -119.59844 35.2...</td>
<td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
<td>ECO_L2T_LSTE</td>
<td>[https://data.lpdaac.earthdatacloud.nasa.gov/l...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>ECOv002_L2T_LSTE_25486_005_10SGD_20230103T0743...</td>
<td>C2076090826-LPCLOUD</td>
<td>2023-01-03T07:43:30.511Z</td>
<td>2023-01-03T07:44:22.481Z</td>
<td>Night</td>
<td>NaN</td>
<td>POLYGON ((-119.59844 34.20719, -119.59844 35.2...</td>
<td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
<td>ECO_L2T_LSTE</td>
<td>[https://data.lpdaac.earthdatacloud.nasa.gov/l...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>ECOv002_L2T_LSTE_25486_006_11SKU_20230103T0744...</td>
<td>C2076090826-LPCLOUD</td>
<td>2023-01-03T07:44:22.480Z</td>
<td>2023-01-03T07:45:14.450Z</td>
<td>Night</td>
<td>NaN</td>
<td>POLYGON ((-119.06582 34.21003, -119.06582 35.2...</td>
<td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
<td>ECO_L2T_LSTE</td>
<td>[https://data.lpdaac.earthdatacloud.nasa.gov/l...</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>With our dataframe cleaned up a bit, we can clearly see the available metadata needed to do some filtering. Before conducting our concurrent data filtering, first we’ll want to do some product specific filtering.</p>
<p>Separate the results into two dataframes – one for ECOTRESS and one for EMIT, and print the number of results for each so we can monitor how many granules remain in our results.</p>
<div id="cell-44" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View unique Products</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>gdf[<span class="st">'shortname'</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<pre><code>array(['ECO_L2T_LSTE', 'EMITL2ARFL'], dtype=object)</code></pre>
</div>
</div>
<div id="cell-45" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;metadata&quot;,&quot;value&quot;:{}}" data-tags="[]" data-execution_count="23">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Split into two dataframes - ECO and EMIT</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>eco_gdf <span class="op">=</span> gdf[gdf[<span class="st">'shortname'</span>]<span class="op">==</span><span class="st">'ECO_L2T_LSTE'</span>]</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>emit_gdf <span class="op">=</span> gdf[gdf[<span class="st">'shortname'</span>]<span class="op">==</span><span class="st">'EMITL2ARFL'</span>]</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'</span><span class="sc">{</span>eco_gdf[<span class="st">"shortname"</span>]<span class="sc">.</span>iloc[<span class="dv">0</span>]<span class="sc">}</span><span class="ss"> Granules: </span><span class="sc">{</span>eco_gdf<span class="sc">.</span>shape[<span class="dv">0</span>]<span class="sc">}</span><span class="ss"> </span><span class="ch">\n</span><span class="sc">{</span>emit_gdf[<span class="st">"shortname"</span>]<span class="sc">.</span>iloc[<span class="dv">0</span>]<span class="sc">}</span><span class="ss"> Granules: </span><span class="sc">{</span>emit_gdf<span class="sc">.</span>shape[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>ECO_L2T_LSTE Granules: 597 
EMITL2ARFL Granules: 35</code></pre>
</div>
</div>
<p>Let’s take a look at ECOSTRESS specific filtering first. Since we’re using the ECOSTRESS tiled data (ECO_L2T LSTE) data, there are two tiles available for our area of interest because its located where the tiles overlap and we’ll want to choose a tile if it fully contains our region of interest. Additionally, a caveat with this ECOSTRESS dataset is that there are currently multiple builds available for a scene (as of 2025-05-12). For this use case, we will select the newest build available, and eliminate duplicate granules from older builds.</p>
<p>Select a single tile tile, then remove duplicate scenes produced with older software builds from our results.</p>
<div id="cell-47" class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select an ECOSTRESS Tile</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>eco_gdf <span class="op">=</span> eco_gdf[eco_gdf[<span class="st">"native-id"</span>].<span class="bu">str</span>.contains(<span class="st">"10SGD"</span>)]</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove Duplicate Granules from Older Builds</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> filter_eco_duplicates(gdf):</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="co">    ECOSTRESS data currently have some duplicate granules in the archive</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a><span class="co">    from different software builds. This removes the duplicates a dataframe of reuslts.</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a><span class="co">    Based on ECO file naming conventions.</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> gdf[<span class="st">"native-id"</span>].<span class="bu">str</span>.rsplit(<span class="st">"_"</span>, n<span class="op">=</span><span class="dv">2</span>, expand<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>    df.columns <span class="op">=</span> [<span class="st">"base"</span>, <span class="st">"build_major"</span>, <span class="st">"build_minor"</span>]</span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"build_major"</span>] <span class="op">=</span> df[<span class="st">"build_major"</span>].astype(<span class="bu">int</span>)</span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"build_minor"</span>] <span class="op">=</span> df[<span class="st">"build_minor"</span>].astype(<span class="bu">int</span>)</span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"native-id"</span>] <span class="op">=</span> gdf[<span class="st">"native-id"</span>]</span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Group and keep latest</span></span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a>    idx <span class="op">=</span> df.groupby(<span class="st">"base"</span>)[[<span class="st">"build_major"</span>, <span class="st">"build_minor"</span>]].idxmax().build_major</span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a>    gdf <span class="op">=</span> gdf[gdf[<span class="st">"native-id"</span>].isin(df.loc[idx, <span class="st">"native-id"</span>])]</span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> gdf</span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a>eco_gdf <span class="op">=</span> filter_eco_duplicates(eco_gdf)</span>
<span id="cb33-22"><a href="#cb33-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-23"><a href="#cb33-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Show change in results quantity</span></span>
<span id="cb33-24"><a href="#cb33-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'</span><span class="sc">{</span>eco_gdf[<span class="st">"shortname"</span>]<span class="sc">.</span>iloc[<span class="dv">0</span>]<span class="sc">}</span><span class="ss"> Granules: </span><span class="sc">{</span>eco_gdf<span class="sc">.</span>shape[<span class="dv">0</span>]<span class="sc">}</span><span class="ss"> </span><span class="ch">\n</span><span class="sc">{</span>emit_gdf[<span class="st">"shortname"</span>]<span class="sc">.</span>iloc[<span class="dv">0</span>]<span class="sc">}</span><span class="ss"> Granules: </span><span class="sc">{</span>emit_gdf<span class="sc">.</span>shape[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>ECO_L2T_LSTE Granules: 163 
EMITL2ARFL Granules: 35</code></pre>
</div>
</div>
<p>Notice that this reduced our ECOSTRESS results quantity of by quite a bit.</p>
<p>Now, lets do some filtering of EMIT scenes as well. For EMIT we can utilize the <code>CloudCover</code> field from the results metadata to eliminate scenes with a large proportion of cloud-cover. This field is not available for ECOSTRESS.</p>
<div id="cell-49" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cloud Filter using EMIT Metadata - Not available for ECOSTRESS</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>emit_gdf <span class="op">=</span> emit_gdf[emit_gdf[<span class="st">"CloudCover"</span>] <span class="op">&lt;=</span> <span class="dv">80</span>]</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'</span><span class="sc">{</span>eco_gdf[<span class="st">"shortname"</span>]<span class="sc">.</span>iloc[<span class="dv">0</span>]<span class="sc">}</span><span class="ss"> Granules: </span><span class="sc">{</span>eco_gdf<span class="sc">.</span>shape[<span class="dv">0</span>]<span class="sc">}</span><span class="ss"> </span><span class="ch">\n</span><span class="sc">{</span>emit_gdf[<span class="st">"shortname"</span>]<span class="sc">.</span>iloc[<span class="dv">0</span>]<span class="sc">}</span><span class="ss"> Granules: </span><span class="sc">{</span>emit_gdf<span class="sc">.</span>shape[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>ECO_L2T_LSTE Granules: 163 
EMITL2ARFL Granules: 21</code></pre>
</div>
</div>
<p>Finally, we want to apply our concurrent filtering to ensure each entry in our ECOSTRESS dataframe has a corresponding entry in the EMIT dataframe. Since the EMIT acquisition mask has been added to ECOSTRESS, in most cases if EMIT is collecting data, so will ECOSTRESS. This means we can use the time window from the metadata provided by the <code>BegginningDateTime</code> and <code>EndDateTime</code> columns to help us accomplish this. But, since we are working with the tiled ECOSTRESS product, there are cases where the tiles may not spatially intersect with an EMIT scene, even though the acquisition time windows intersect. We need to:</p>
<ol type="1">
<li>Ensure the temporal extents of granules from each instrument intersect.</li>
<li>Ensure that the spatial extents of granules from each instrument intersect (due to the tiling scheme).</li>
</ol>
<p>First write a function to convert the <code>BeginningDateTime</code> and <code>EndDateTime</code> to a <code>datetime</code> object.</p>
<blockquote class="blockquote">
<p><strong>You may have noticed that the date format is similar for ECOSTRESS and EMIT, but the ECOSTRESS data also includes fractional seconds. If using an different version of <code>pandas</code>, you may need to drop the <code>format='ISO8601'</code>argument to the <code>to_datetime</code> function, as shown in the commented-out line.</strong></p>
</blockquote>
<div id="cell-51" class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define Function to Convert Columns to datetime</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> convert_col_dt(df:pd.DataFrame, columns:<span class="bu">list</span>, fmt<span class="op">=</span><span class="st">"ISO8601"</span>):</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="co">    Convert specified columns from string to a datetime. Default format of ISO8601.</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> col <span class="kw">in</span> columns:</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>        df[col] <span class="op">=</span> pd.to_datetime(df[col], <span class="bu">format</span><span class="op">=</span>fmt)</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now we can write a function to find spatial and temporal interections of the data. To do this, we’ll merge the dataframes spatially to find intersecting geometries from our <code>emit_gdf</code> and <code>eco_gdf</code>, providing a suffix for each <code>GeoDataFrame</code> so columns will be named in a meaninful way. Then we’ll use the temporal extents defined by <code>BeginningDateTime</code> and <code>EndingDateTime</code> to evaluate if granules from each data product intersect temporally.</p>
<p>Finding intersections between temporal extents of a granule works great for finding concurrent ECOSTRESS and EMIT because they are both on the ISS and acquiring data within seconds of each other, but for other applications we may want to find data from another orbiting instrument where an overpass falls within an hour or day of acquisition. We can accomplish this by manually providing a timedelta, then using the temporal extent from the metadata to see if the temporal extent from each data product falls within the provided timedelta. Since this may be a common use case, we’ve added that parameter to the function below.</p>
<p>One more addition to the function below is keeping all of our geometries. By default, the <code>gpd.sjoin</code> function only keeps the left dataframe geometry. In the function this has been modified to keep both left and right geometries, as well as a merged geometry. This will allow us to verify our results and also visualize these intersections.</p>
<blockquote class="blockquote">
<p><strong>Note that the spatial merge and temporal filtering can be computationally intensive. If the area of interest is very large or initial search parameters have a long temporal range, breaking down the initial search into sections spatially or temporally is recommended.</strong></p>
</blockquote>
<div id="cell-53" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;metadata&quot;,&quot;value&quot;:{}}" data-tags="[]" data-execution_count="27">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> find_concurrent_scenes(lgdf, rgdf, time_delta<span class="op">=</span><span class="va">None</span>):</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="co">    Finds the concurrent scenes.</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="co">    lgdf: a geodataframe of earthaccess results</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a><span class="co">    rgdf: a second geodataframe ofearthaccess results</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a><span class="co">    lsuffix: appended to lgdf column names</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a><span class="co">    rsuffix: appended to rgdf column names</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a><span class="co">    timedelta (seconds): optional - an acceptable time-range between temporal</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a><span class="co">                         extents of both products</span></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get left and right suffixes</span></span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>    lsuffix <span class="op">=</span> lgdf[<span class="st">"shortname"</span>].iloc[<span class="dv">0</span>]</span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>    rsuffix <span class="op">=</span> rgdf[<span class="st">"shortname"</span>].iloc[<span class="dv">0</span>]</span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Copy lgdf, rgdf Geometry</span></span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a>    lgdf.loc[:,<span class="ss">f"geometry_</span><span class="sc">{</span>lsuffix<span class="sc">}</span><span class="ss">"</span>] <span class="op">=</span> lgdf.geometry</span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a>    rgdf.loc[:,<span class="ss">f"geometry_</span><span class="sc">{</span>rsuffix<span class="sc">}</span><span class="ss">"</span>] <span class="op">=</span> rgdf.geometry</span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Conduct Spatial Join</span></span>
<span id="cb38-21"><a href="#cb38-21" aria-hidden="true" tabindex="-1"></a>    joined <span class="op">=</span> gpd.sjoin(</span>
<span id="cb38-22"><a href="#cb38-22" aria-hidden="true" tabindex="-1"></a>        lgdf,</span>
<span id="cb38-23"><a href="#cb38-23" aria-hidden="true" tabindex="-1"></a>        rgdf,</span>
<span id="cb38-24"><a href="#cb38-24" aria-hidden="true" tabindex="-1"></a>        how<span class="op">=</span><span class="st">"inner"</span>,</span>
<span id="cb38-25"><a href="#cb38-25" aria-hidden="true" tabindex="-1"></a>        predicate<span class="op">=</span><span class="st">"intersects"</span>,</span>
<span id="cb38-26"><a href="#cb38-26" aria-hidden="true" tabindex="-1"></a>        lsuffix<span class="op">=</span>lsuffix,</span>
<span id="cb38-27"><a href="#cb38-27" aria-hidden="true" tabindex="-1"></a>        rsuffix<span class="op">=</span>rsuffix,</span>
<span id="cb38-28"><a href="#cb38-28" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb38-29"><a href="#cb38-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-30"><a href="#cb38-30" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convert Datetime fields</span></span>
<span id="cb38-31"><a href="#cb38-31" aria-hidden="true" tabindex="-1"></a>    date_columns <span class="op">=</span> [</span>
<span id="cb38-32"><a href="#cb38-32" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"BeginningDateTime_</span><span class="sc">{</span>lsuffix<span class="sc">}</span><span class="ss">"</span>,</span>
<span id="cb38-33"><a href="#cb38-33" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"BeginningDateTime_</span><span class="sc">{</span>rsuffix<span class="sc">}</span><span class="ss">"</span>,</span>
<span id="cb38-34"><a href="#cb38-34" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"EndingDateTime_</span><span class="sc">{</span>lsuffix<span class="sc">}</span><span class="ss">"</span>,</span>
<span id="cb38-35"><a href="#cb38-35" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"EndingDateTime_</span><span class="sc">{</span>rsuffix<span class="sc">}</span><span class="ss">"</span>,</span>
<span id="cb38-36"><a href="#cb38-36" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb38-37"><a href="#cb38-37" aria-hidden="true" tabindex="-1"></a>    joined <span class="op">=</span> convert_col_dt(joined, date_columns)</span>
<span id="cb38-38"><a href="#cb38-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-39"><a href="#cb38-39" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Filter Based on Temporal Extents</span></span>
<span id="cb38-40"><a href="#cb38-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> time_delta:</span>
<span id="cb38-41"><a href="#cb38-41" aria-hidden="true" tabindex="-1"></a>        td <span class="op">=</span> timedelta(seconds<span class="op">=</span>time_delta)</span>
<span id="cb38-42"><a href="#cb38-42" aria-hidden="true" tabindex="-1"></a>        joined[<span class="ss">f"MidDateTime_</span><span class="sc">{</span>lsuffix<span class="sc">}</span><span class="ss">"</span>] <span class="op">=</span> (</span>
<span id="cb38-43"><a href="#cb38-43" aria-hidden="true" tabindex="-1"></a>            joined[<span class="ss">f"BeginningDateTime_</span><span class="sc">{</span>lsuffix<span class="sc">}</span><span class="ss">"</span>]</span>
<span id="cb38-44"><a href="#cb38-44" aria-hidden="true" tabindex="-1"></a>            <span class="op">+</span> (</span>
<span id="cb38-45"><a href="#cb38-45" aria-hidden="true" tabindex="-1"></a>                joined[<span class="ss">f"EndingDateTime_</span><span class="sc">{</span>lsuffix<span class="sc">}</span><span class="ss">"</span>]</span>
<span id="cb38-46"><a href="#cb38-46" aria-hidden="true" tabindex="-1"></a>                <span class="op">-</span> joined[<span class="ss">f"BeginningDateTime_</span><span class="sc">{</span>lsuffix<span class="sc">}</span><span class="ss">"</span>]</span>
<span id="cb38-47"><a href="#cb38-47" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb38-48"><a href="#cb38-48" aria-hidden="true" tabindex="-1"></a>            <span class="op">/</span> <span class="dv">2</span></span>
<span id="cb38-49"><a href="#cb38-49" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb38-50"><a href="#cb38-50" aria-hidden="true" tabindex="-1"></a>        joined[<span class="ss">f"MidDateTime_</span><span class="sc">{</span>rsuffix<span class="sc">}</span><span class="ss">"</span>] <span class="op">=</span> (</span>
<span id="cb38-51"><a href="#cb38-51" aria-hidden="true" tabindex="-1"></a>            joined[<span class="ss">f"BeginningDateTime_</span><span class="sc">{</span>rsuffix<span class="sc">}</span><span class="ss">"</span>]</span>
<span id="cb38-52"><a href="#cb38-52" aria-hidden="true" tabindex="-1"></a>            <span class="op">+</span> (</span>
<span id="cb38-53"><a href="#cb38-53" aria-hidden="true" tabindex="-1"></a>                joined[<span class="ss">f"EndingDateTime_</span><span class="sc">{</span>rsuffix<span class="sc">}</span><span class="ss">"</span>]</span>
<span id="cb38-54"><a href="#cb38-54" aria-hidden="true" tabindex="-1"></a>                <span class="op">-</span> joined[<span class="ss">f"BeginningDateTime_</span><span class="sc">{</span>rsuffix<span class="sc">}</span><span class="ss">"</span>]</span>
<span id="cb38-55"><a href="#cb38-55" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb38-56"><a href="#cb38-56" aria-hidden="true" tabindex="-1"></a>            <span class="op">/</span> <span class="dv">2</span></span>
<span id="cb38-57"><a href="#cb38-57" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb38-58"><a href="#cb38-58" aria-hidden="true" tabindex="-1"></a>        concurrent_df <span class="op">=</span> joined[</span>
<span id="cb38-59"><a href="#cb38-59" aria-hidden="true" tabindex="-1"></a>            <span class="bu">abs</span>(joined[<span class="ss">f"MidDateTime_</span><span class="sc">{</span>lsuffix<span class="sc">}</span><span class="ss">"</span>] <span class="op">-</span> joined[<span class="ss">f"MidDateTime_</span><span class="sc">{</span>rsuffix<span class="sc">}</span><span class="ss">"</span>])</span>
<span id="cb38-60"><a href="#cb38-60" aria-hidden="true" tabindex="-1"></a>            <span class="op">&lt;=</span> td</span>
<span id="cb38-61"><a href="#cb38-61" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb38-62"><a href="#cb38-62" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb38-63"><a href="#cb38-63" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb38-64"><a href="#cb38-64" aria-hidden="true" tabindex="-1"></a>        concurrent_df <span class="op">=</span> joined[</span>
<span id="cb38-65"><a href="#cb38-65" aria-hidden="true" tabindex="-1"></a>            (</span>
<span id="cb38-66"><a href="#cb38-66" aria-hidden="true" tabindex="-1"></a>                joined[<span class="ss">f"BeginningDateTime_</span><span class="sc">{</span>lsuffix<span class="sc">}</span><span class="ss">"</span>]</span>
<span id="cb38-67"><a href="#cb38-67" aria-hidden="true" tabindex="-1"></a>                <span class="op">&lt;=</span> joined[<span class="ss">f"EndingDateTime_</span><span class="sc">{</span>rsuffix<span class="sc">}</span><span class="ss">"</span>]</span>
<span id="cb38-68"><a href="#cb38-68" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb38-69"><a href="#cb38-69" aria-hidden="true" tabindex="-1"></a>            <span class="op">&amp;</span> (</span>
<span id="cb38-70"><a href="#cb38-70" aria-hidden="true" tabindex="-1"></a>                joined[<span class="ss">f"EndingDateTime_</span><span class="sc">{</span>lsuffix<span class="sc">}</span><span class="ss">"</span>]</span>
<span id="cb38-71"><a href="#cb38-71" aria-hidden="true" tabindex="-1"></a>                <span class="op">&gt;=</span> joined[<span class="ss">f"BeginningDateTime_</span><span class="sc">{</span>rsuffix<span class="sc">}</span><span class="ss">"</span>]</span>
<span id="cb38-72"><a href="#cb38-72" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb38-73"><a href="#cb38-73" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb38-74"><a href="#cb38-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-75"><a href="#cb38-75" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Combine Geometry</span></span>
<span id="cb38-76"><a href="#cb38-76" aria-hidden="true" tabindex="-1"></a>    concurrent_df.loc[:, <span class="st">"geometry"</span>] <span class="op">=</span> concurrent_df.<span class="bu">apply</span>(</span>
<span id="cb38-77"><a href="#cb38-77" aria-hidden="true" tabindex="-1"></a>        <span class="kw">lambda</span> row: MultiPolygon(</span>
<span id="cb38-78"><a href="#cb38-78" aria-hidden="true" tabindex="-1"></a>            [row[<span class="ss">f"geometry_</span><span class="sc">{</span>lsuffix<span class="sc">}</span><span class="ss">"</span>], row[<span class="ss">f"geometry_</span><span class="sc">{</span>rsuffix<span class="sc">}</span><span class="ss">"</span>]]</span>
<span id="cb38-79"><a href="#cb38-79" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb38-80"><a href="#cb38-80" aria-hidden="true" tabindex="-1"></a>        axis<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb38-81"><a href="#cb38-81" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb38-82"><a href="#cb38-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-83"><a href="#cb38-83" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> concurrent_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Run the <code>concurrent_df</code> function. Since we’re working with ECOSTRESS and EMIT, we don’t need to provide the <code>timedelta</code> argument.</p>
<div id="cell-55" class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Find Concurrent Scenes</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>concurrent_df <span class="op">=</span> find_concurrent_scenes(eco_gdf, emit_gdf , time_delta<span class="op">=</span><span class="dv">60</span><span class="op">*</span><span class="dv">60</span><span class="op">*</span><span class="dv">12</span>)</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>concurrent_df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="28">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">native-id_ECO_L2T_LSTE</th>
<th data-quarto-table-cell-role="th">collection-concept-id_ECO_L2T_LSTE</th>
<th data-quarto-table-cell-role="th">BeginningDateTime_ECO_L2T_LSTE</th>
<th data-quarto-table-cell-role="th">EndingDateTime_ECO_L2T_LSTE</th>
<th data-quarto-table-cell-role="th">DayNightFlag_ECO_L2T_LSTE</th>
<th data-quarto-table-cell-role="th">CloudCover_ECO_L2T_LSTE</th>
<th data-quarto-table-cell-role="th">geometry</th>
<th data-quarto-table-cell-role="th">browse_ECO_L2T_LSTE</th>
<th data-quarto-table-cell-role="th">shortname_ECO_L2T_LSTE</th>
<th data-quarto-table-cell-role="th">data_ECO_L2T_LSTE</th>
<th data-quarto-table-cell-role="th">geometry_ECO_L2T_LSTE</th>
<th data-quarto-table-cell-role="th">index_EMITL2ARFL</th>
<th data-quarto-table-cell-role="th">native-id_EMITL2ARFL</th>
<th data-quarto-table-cell-role="th">collection-concept-id_EMITL2ARFL</th>
<th data-quarto-table-cell-role="th">BeginningDateTime_EMITL2ARFL</th>
<th data-quarto-table-cell-role="th">EndingDateTime_EMITL2ARFL</th>
<th data-quarto-table-cell-role="th">DayNightFlag_EMITL2ARFL</th>
<th data-quarto-table-cell-role="th">CloudCover_EMITL2ARFL</th>
<th data-quarto-table-cell-role="th">browse_EMITL2ARFL</th>
<th data-quarto-table-cell-role="th">shortname_EMITL2ARFL</th>
<th data-quarto-table-cell-role="th">data_EMITL2ARFL</th>
<th data-quarto-table-cell-role="th">geometry_EMITL2ARFL</th>
<th data-quarto-table-cell-role="th">MidDateTime_ECO_L2T_LSTE</th>
<th data-quarto-table-cell-role="th">MidDateTime_EMITL2ARFL</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">70</td>
<td>ECOv002_L2T_LSTE_26223_011_10SGD_20230219T2028...</td>
<td>C2076090826-LPCLOUD</td>
<td>2023-02-19 20:28:51.310000+00:00</td>
<td>2023-02-19 20:29:43.280000+00:00</td>
<td>Day</td>
<td>NaN</td>
<td>MULTIPOLYGON (((-119.59844 34.20719, -119.5984...</td>
<td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
<td>ECO_L2T_LSTE</td>
<td>[https://data.lpdaac.earthdatacloud.nasa.gov/l...</td>
<td>POLYGON ((-119.59844 34.20719, -119.59844 35.2...</td>
<td>71</td>
<td>EMIT_L2A_RFL_001_20230219T202939_2305013_002</td>
<td>C2408750690-LPCLOUD</td>
<td>2023-02-19 20:29:39+00:00</td>
<td>2023-02-19 20:29:51+00:00</td>
<td>Day</td>
<td>47.0</td>
<td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
<td>EMITL2ARFL</td>
<td>[https://data.lpdaac.earthdatacloud.nasa.gov/l...</td>
<td>POLYGON ((-120.70791 35.54348, -121.19894 34.9...</td>
<td>2023-02-19 20:29:17.295000+00:00</td>
<td>2023-02-19 20:29:45+00:00</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">70</td>
<td>ECOv002_L2T_LSTE_26223_011_10SGD_20230219T2028...</td>
<td>C2076090826-LPCLOUD</td>
<td>2023-02-19 20:28:51.310000+00:00</td>
<td>2023-02-19 20:29:43.280000+00:00</td>
<td>Day</td>
<td>NaN</td>
<td>MULTIPOLYGON (((-119.59844 34.20719, -119.5984...</td>
<td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
<td>ECO_L2T_LSTE</td>
<td>[https://data.lpdaac.earthdatacloud.nasa.gov/l...</td>
<td>POLYGON ((-119.59844 34.20719, -119.59844 35.2...</td>
<td>74</td>
<td>EMIT_L2A_RFL_001_20230219T202951_2305013_003</td>
<td>C2408750690-LPCLOUD</td>
<td>2023-02-19 20:29:51+00:00</td>
<td>2023-02-19 20:30:14+00:00</td>
<td>Day</td>
<td>67.0</td>
<td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
<td>EMITL2ARFL</td>
<td>[https://data.lpdaac.earthdatacloud.nasa.gov/l...</td>
<td>POLYGON ((-120.04838 35.03646, -120.54523 34.4...</td>
<td>2023-02-19 20:29:17.295000+00:00</td>
<td>2023-02-19 20:30:02.500000+00:00</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">72</td>
<td>ECOv002_L2T_LSTE_26223_012_10SGD_20230219T2029...</td>
<td>C2076090826-LPCLOUD</td>
<td>2023-02-19 20:29:43.280000+00:00</td>
<td>2023-02-19 20:30:35.250000+00:00</td>
<td>Day</td>
<td>NaN</td>
<td>MULTIPOLYGON (((-119.59844 34.20719, -119.5984...</td>
<td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
<td>ECO_L2T_LSTE</td>
<td>[https://data.lpdaac.earthdatacloud.nasa.gov/l...</td>
<td>POLYGON ((-119.59844 34.20719, -119.59844 35.2...</td>
<td>71</td>
<td>EMIT_L2A_RFL_001_20230219T202939_2305013_002</td>
<td>C2408750690-LPCLOUD</td>
<td>2023-02-19 20:29:39+00:00</td>
<td>2023-02-19 20:29:51+00:00</td>
<td>Day</td>
<td>47.0</td>
<td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
<td>EMITL2ARFL</td>
<td>[https://data.lpdaac.earthdatacloud.nasa.gov/l...</td>
<td>POLYGON ((-120.70791 35.54348, -121.19894 34.9...</td>
<td>2023-02-19 20:30:09.265000+00:00</td>
<td>2023-02-19 20:29:45+00:00</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">72</td>
<td>ECOv002_L2T_LSTE_26223_012_10SGD_20230219T2029...</td>
<td>C2076090826-LPCLOUD</td>
<td>2023-02-19 20:29:43.280000+00:00</td>
<td>2023-02-19 20:30:35.250000+00:00</td>
<td>Day</td>
<td>NaN</td>
<td>MULTIPOLYGON (((-119.59844 34.20719, -119.5984...</td>
<td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
<td>ECO_L2T_LSTE</td>
<td>[https://data.lpdaac.earthdatacloud.nasa.gov/l...</td>
<td>POLYGON ((-119.59844 34.20719, -119.59844 35.2...</td>
<td>74</td>
<td>EMIT_L2A_RFL_001_20230219T202951_2305013_003</td>
<td>C2408750690-LPCLOUD</td>
<td>2023-02-19 20:29:51+00:00</td>
<td>2023-02-19 20:30:14+00:00</td>
<td>Day</td>
<td>67.0</td>
<td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
<td>EMITL2ARFL</td>
<td>[https://data.lpdaac.earthdatacloud.nasa.gov/l...</td>
<td>POLYGON ((-120.04838 35.03646, -120.54523 34.4...</td>
<td>2023-02-19 20:30:09.265000+00:00</td>
<td>2023-02-19 20:30:02.500000+00:00</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">167</td>
<td>ECOv002_L2T_LSTE_26799_003_10SGD_20230328T2212...</td>
<td>C2076090826-LPCLOUD</td>
<td>2023-03-28 22:12:39.510000+00:00</td>
<td>2023-03-28 22:13:31.480000+00:00</td>
<td>Day</td>
<td>NaN</td>
<td>MULTIPOLYGON (((-119.59844 34.20719, -119.5984...</td>
<td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
<td>ECO_L2T_LSTE</td>
<td>[https://data.lpdaac.earthdatacloud.nasa.gov/l...</td>
<td>POLYGON ((-119.59844 34.20719, -119.59844 35.2...</td>
<td>168</td>
<td>EMIT_L2A_RFL_001_20230328T221244_2308715_001</td>
<td>C2408750690-LPCLOUD</td>
<td>2023-03-28 22:12:44+00:00</td>
<td>2023-03-28 22:12:56+00:00</td>
<td>Day</td>
<td>31.0</td>
<td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
<td>EMITL2ARFL</td>
<td>[https://data.lpdaac.earthdatacloud.nasa.gov/l...</td>
<td>POLYGON ((-120.69176 34.82279, -121.46434 34.2...</td>
<td>2023-03-28 22:13:05.495000+00:00</td>
<td>2023-03-28 22:12:50+00:00</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>When viewing our concurrent dataframe, we can see that all of the info from both our EMIT and ECO geodataframes is still there, including geomtries from each, and our new multipolygon geometry.</p>
</section>
<section id="visualizing-intersecting-coverage" class="level2">
<h2 class="anchored" data-anchor-id="visualizing-intersecting-coverage">4. Visualizing Intersecting Coverage</h2>
<p>We can visualize our results on a basemap using <code>folium</code>. First define the column names associated with unique granule ids for each product, in this case, <code>native-id_ECO_L2T_LSTE</code> and <code>native-id_EMITL2ARFL</code>. Next, grab the suffix to use in creating hover tooltips for the visualization.</p>
<div id="cell-58" class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Identify Columns with Granule Names (native-id) for Each Product</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>prod1, prod2 <span class="op">=</span> <span class="bu">tuple</span>([c <span class="cf">for</span> c <span class="kw">in</span> concurrent_df.columns <span class="cf">if</span> c.startswith(<span class="st">"native-id_"</span>)])</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Define Suffixes</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>p1_suffix <span class="op">=</span> prod1.split(<span class="st">"_"</span>, <span class="dv">1</span>)[<span class="dv">1</span>]</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>p2_suffix <span class="op">=</span> prod2.split(<span class="st">"_"</span>, <span class="dv">1</span>)[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, create a color map, setting a unique color for each unique <code>ECO_L2T_LSTE</code> id. We only do this for ECOSTRESS, because our goal is to visualize an ECOSTRESS scene and the concurrently acquired EMIT scenes using the ECOSTRESS scene as a key in the legend. We’ve elected to use ECOSTRESS as a key in this example because the spatial footprints are larger, but this can be reversed where EMIT is used as the key.</p>
<div id="cell-60" class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define a Color for Each Granule Grouping</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>palette <span class="op">=</span> plt.get_cmap(<span class="st">"tab20"</span>).colors</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>unique_ids <span class="op">=</span> concurrent_df[prod1].unique()</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>hex_colors <span class="op">=</span> [mcolors.to_hex(c) <span class="cf">for</span> c <span class="kw">in</span> palette]</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Build Color Map</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>color_map <span class="op">=</span> {</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>    uid: hex_colors[i <span class="op">%</span> <span class="bu">len</span>(hex_colors)]</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i, uid <span class="kw">in</span> <span class="bu">enumerate</span>(unique_ids)</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Using our color map, plot using <code>folium</code>. This cell may get a bit confusing, but essentially, we iterate over our dataframe, building <code>FeatureGroups</code> consisting of rows from our dataframe,grouped by granule-id from ECOSTRESS. Within this loop, we define a color for the group, add the ECOSTRESS footprint, add an image overlay of ECOSTRESS browse imagery, then add EMIT footprints.</p>
<p>After that we add our initial bounding box and region of interest polygons. Note that by default, our concurrent feature groups are not drawn, they must be added by checking boxes in the <code>LayerControl</code>.</p>
<div id="cell-62" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;metadata&quot;,&quot;value&quot;:{}}" data-tags="[]" data-execution_count="31">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create Figure and Select Background Tiles</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> Figure(width<span class="op">=</span><span class="st">"750"</span>, height<span class="op">=</span><span class="st">"375"</span>)</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>m <span class="op">=</span> folium.Map(tiles<span class="op">=</span><span class="st">"https://mt1.google.com/vt/lyrs=y&amp;x=</span><span class="sc">{x}</span><span class="st">&amp;y=</span><span class="sc">{y}</span><span class="st">&amp;z=</span><span class="sc">{z}</span><span class="st">"</span>, attr<span class="op">=</span><span class="st">"Google"</span>, name<span class="op">=</span><span class="st">'Google'</span>)</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>fig.add_child(m)</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Iterate through GeoDataFrame row</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> p1_id, group <span class="kw">in</span> concurrent_df.groupby(prod1):</span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>    fg <span class="op">=</span> folium.FeatureGroup(name<span class="op">=</span>p1_id, show<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>    p1_row <span class="op">=</span> group.iloc[<span class="dv">0</span>]</span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>    color <span class="op">=</span> color_map[p1_id]</span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create a tooltip for hovering over polygons. Other columns can be added.</span></span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a>    p1_tooltip <span class="op">=</span> folium.Tooltip(</span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"""</span></span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a><span class="ss">        &lt;b&gt;</span><span class="sc">{</span>p1_suffix<span class="sc">}</span><span class="ss"> Granule-ID: &lt;/b&gt; </span><span class="sc">{</span>p1_id<span class="sc">}</span><span class="ss">&lt;br&gt;</span></span>
<span id="cb42-16"><a href="#cb42-16" aria-hidden="true" tabindex="-1"></a><span class="ss">        &lt;b&gt;</span><span class="sc">{</span>p1_suffix<span class="sc">}</span><span class="ss"> BeginningDateTime: &lt;/b&gt; </span><span class="sc">{</span>p1_row[<span class="ss">f"BeginningDateTime_</span><span class="sc">{</span>p1_suffix<span class="sc">}</span><span class="ss">"</span>]<span class="sc">}</span><span class="ss">&lt;br&gt;</span></span>
<span id="cb42-17"><a href="#cb42-17" aria-hidden="true" tabindex="-1"></a><span class="ss">        """</span>)</span>
<span id="cb42-18"><a href="#cb42-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add the Data</span></span>
<span id="cb42-19"><a href="#cb42-19" aria-hidden="true" tabindex="-1"></a>    folium.GeoJson(</span>
<span id="cb42-20"><a href="#cb42-20" aria-hidden="true" tabindex="-1"></a>        data <span class="op">=</span> p1_row[<span class="ss">f"geometry_</span><span class="sc">{</span>p1_suffix<span class="sc">}</span><span class="ss">"</span>].__geo_interface__,</span>
<span id="cb42-21"><a href="#cb42-21" aria-hidden="true" tabindex="-1"></a>        tooltip <span class="op">=</span> p1_tooltip,</span>
<span id="cb42-22"><a href="#cb42-22" aria-hidden="true" tabindex="-1"></a>        style_function<span class="op">=</span><span class="kw">lambda</span> feature, color<span class="op">=</span>color: {</span>
<span id="cb42-23"><a href="#cb42-23" aria-hidden="true" tabindex="-1"></a>            <span class="st">"color"</span>:      color,</span>
<span id="cb42-24"><a href="#cb42-24" aria-hidden="true" tabindex="-1"></a>            <span class="st">"weight"</span>:     <span class="dv">2</span>,</span>
<span id="cb42-25"><a href="#cb42-25" aria-hidden="true" tabindex="-1"></a>            <span class="st">"fillOpacity"</span>: <span class="dv">0</span></span>
<span id="cb42-26"><a href="#cb42-26" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb42-27"><a href="#cb42-27" aria-hidden="true" tabindex="-1"></a>    ).add_to(fg)</span>
<span id="cb42-28"><a href="#cb42-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-29"><a href="#cb42-29" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Optional Image Overlay</span></span>
<span id="cb42-30"><a href="#cb42-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> p1_row[<span class="ss">f"browse_</span><span class="sc">{</span>p1_suffix<span class="sc">}</span><span class="ss">"</span>] <span class="op">!=</span> <span class="st">"no browse image"</span>:</span>
<span id="cb42-31"><a href="#cb42-31" aria-hidden="true" tabindex="-1"></a>        bounds <span class="op">=</span> p1_row[<span class="ss">f"geometry_</span><span class="sc">{</span>p1_suffix<span class="sc">}</span><span class="ss">"</span>].bounds</span>
<span id="cb42-32"><a href="#cb42-32" aria-hidden="true" tabindex="-1"></a>        folium.raster_layers.ImageOverlay(</span>
<span id="cb42-33"><a href="#cb42-33" aria-hidden="true" tabindex="-1"></a>            image<span class="op">=</span>p1_row[<span class="ss">f"browse_</span><span class="sc">{</span>p1_suffix<span class="sc">}</span><span class="ss">"</span>],</span>
<span id="cb42-34"><a href="#cb42-34" aria-hidden="true" tabindex="-1"></a>            bounds<span class="op">=</span>[[bounds[<span class="dv">1</span>],bounds[<span class="dv">0</span>]], [bounds[<span class="dv">3</span>],bounds[<span class="dv">2</span>]]],</span>
<span id="cb42-35"><a href="#cb42-35" aria-hidden="true" tabindex="-1"></a>            opacity<span class="op">=</span><span class="fl">0.75</span>,</span>
<span id="cb42-36"><a href="#cb42-36" aria-hidden="true" tabindex="-1"></a>            zindex<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb42-37"><a href="#cb42-37" aria-hidden="true" tabindex="-1"></a>        ).add_to(fg)</span>
<span id="cb42-38"><a href="#cb42-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-39"><a href="#cb42-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> _, p2_row <span class="kw">in</span> group.iterrows():</span>
<span id="cb42-40"><a href="#cb42-40" aria-hidden="true" tabindex="-1"></a>        p2_id <span class="op">=</span> p2_row[prod2]</span>
<span id="cb42-41"><a href="#cb42-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-42"><a href="#cb42-42" aria-hidden="true" tabindex="-1"></a>        p2_tooltip <span class="op">=</span> folium.Tooltip(<span class="ss">f"""</span></span>
<span id="cb42-43"><a href="#cb42-43" aria-hidden="true" tabindex="-1"></a><span class="ss">            &lt;b&gt; </span><span class="sc">{</span>p2_suffix<span class="sc">}</span><span class="ss"> Granule-ID:&lt;/b&gt; </span><span class="sc">{</span>p2_id<span class="sc">}</span><span class="ss">&lt;br&gt;</span></span>
<span id="cb42-44"><a href="#cb42-44" aria-hidden="true" tabindex="-1"></a><span class="ss">            &lt;b&gt; </span><span class="sc">{</span>p2_suffix<span class="sc">}</span><span class="ss"> BeginningDateTime: &lt;/b&gt; </span><span class="sc">{</span>p2_row[<span class="ss">f"BeginningDateTime_</span><span class="sc">{</span>p2_suffix<span class="sc">}</span><span class="ss">"</span>]<span class="sc">}</span><span class="ss">&lt;br&gt;</span></span>
<span id="cb42-45"><a href="#cb42-45" aria-hidden="true" tabindex="-1"></a><span class="ss">            """</span>)</span>
<span id="cb42-46"><a href="#cb42-46" aria-hidden="true" tabindex="-1"></a>        folium.GeoJson(</span>
<span id="cb42-47"><a href="#cb42-47" aria-hidden="true" tabindex="-1"></a>            data<span class="op">=</span>p2_row[<span class="ss">f"geometry_</span><span class="sc">{</span>p2_suffix<span class="sc">}</span><span class="ss">"</span>].__geo_interface__,</span>
<span id="cb42-48"><a href="#cb42-48" aria-hidden="true" tabindex="-1"></a>            tooltip<span class="op">=</span>p2_tooltip,</span>
<span id="cb42-49"><a href="#cb42-49" aria-hidden="true" tabindex="-1"></a>            style_function<span class="op">=</span><span class="kw">lambda</span> feature, color<span class="op">=</span>color: {</span>
<span id="cb42-50"><a href="#cb42-50" aria-hidden="true" tabindex="-1"></a>            <span class="st">"color"</span>:      color,</span>
<span id="cb42-51"><a href="#cb42-51" aria-hidden="true" tabindex="-1"></a>            <span class="st">"weight"</span>:     <span class="dv">2</span>,</span>
<span id="cb42-52"><a href="#cb42-52" aria-hidden="true" tabindex="-1"></a>            <span class="st">"fillOpacity"</span>: <span class="dv">0</span></span>
<span id="cb42-53"><a href="#cb42-53" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb42-54"><a href="#cb42-54" aria-hidden="true" tabindex="-1"></a>        ).add_to(fg)</span>
<span id="cb42-55"><a href="#cb42-55" aria-hidden="true" tabindex="-1"></a>    m.add_child(fg)</span>
<span id="cb42-56"><a href="#cb42-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-57"><a href="#cb42-57" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Region of Interest</span></span>
<span id="cb42-58"><a href="#cb42-58" aria-hidden="true" tabindex="-1"></a>polygon.explore(</span>
<span id="cb42-59"><a href="#cb42-59" aria-hidden="true" tabindex="-1"></a>    popup<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb42-60"><a href="#cb42-60" aria-hidden="true" tabindex="-1"></a>    style_kwds<span class="op">=</span><span class="bu">dict</span>(fillOpacity<span class="op">=</span><span class="dv">0</span>, width<span class="op">=</span><span class="dv">2</span>),</span>
<span id="cb42-61"><a href="#cb42-61" aria-hidden="true" tabindex="-1"></a>    name<span class="op">=</span><span class="st">"Region of Interest"</span>,</span>
<span id="cb42-62"><a href="#cb42-62" aria-hidden="true" tabindex="-1"></a>    m<span class="op">=</span>m,</span>
<span id="cb42-63"><a href="#cb42-63" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb42-64"><a href="#cb42-64" aria-hidden="true" tabindex="-1"></a><span class="co"># Add Our Bounding Box</span></span>
<span id="cb42-65"><a href="#cb42-65" aria-hidden="true" tabindex="-1"></a>folium.GeoJson(</span>
<span id="cb42-66"><a href="#cb42-66" aria-hidden="true" tabindex="-1"></a>    roi_poly,</span>
<span id="cb42-67"><a href="#cb42-67" aria-hidden="true" tabindex="-1"></a>    name<span class="op">=</span><span class="st">"bounding_box"</span>,</span>
<span id="cb42-68"><a href="#cb42-68" aria-hidden="true" tabindex="-1"></a>    style_function<span class="op">=</span><span class="kw">lambda</span> feature: {</span>
<span id="cb42-69"><a href="#cb42-69" aria-hidden="true" tabindex="-1"></a>    <span class="st">"weight"</span>: <span class="dv">2</span>,</span>
<span id="cb42-70"><a href="#cb42-70" aria-hidden="true" tabindex="-1"></a>    <span class="st">"fill"</span>: <span class="va">False</span></span>
<span id="cb42-71"><a href="#cb42-71" aria-hidden="true" tabindex="-1"></a>},</span>
<span id="cb42-72"><a href="#cb42-72" aria-hidden="true" tabindex="-1"></a>).add_to(m)</span>
<span id="cb42-73"><a href="#cb42-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-74"><a href="#cb42-74" aria-hidden="true" tabindex="-1"></a><span class="co"># Add Layer Control and set zoom.</span></span>
<span id="cb42-75"><a href="#cb42-75" aria-hidden="true" tabindex="-1"></a>minx, miny, maxx, maxy <span class="op">=</span> polygon.total_bounds </span>
<span id="cb42-76"><a href="#cb42-76" aria-hidden="true" tabindex="-1"></a>m.fit_bounds(bounds<span class="op">=</span>((miny,minx), (maxy,maxx)))</span>
<span id="cb42-77"><a href="#cb42-77" aria-hidden="true" tabindex="-1"></a>m.add_child(folium.LayerControl())</span>
<span id="cb42-78"><a href="#cb42-78" aria-hidden="true" tabindex="-1"></a>display(fig)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<iframe srcdoc="<!DOCTYPE html>
<html>
<head>
    
    <meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; />
    
        <script>
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        </script>
    
    <style>html, body {width: 100%;height: 100%;margin: 0;padding: 0;}</style>
    <style>#map {position:absolute;top:0;bottom:0;right:0;left:0;}</style>
    <script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;></script>
    <script src=&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;></script>
    <script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;></script>
    <script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;></script>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/>
    
            <meta name=&quot;viewport&quot; content=&quot;width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; />
            <style>
                #map_a4cca34007a35bb2a31a7e810e6d6500 {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            </style>
        
    
                <style>
                    .leaflet-image-layer {
                        /* old android/safari*/
                        image-rendering: -webkit-optimize-contrast;
                        image-rendering: crisp-edges; /* safari */
                        image-rendering: pixelated; /* chrome */
                        image-rendering: -moz-crisp-edges; /* firefox */
                        image-rendering: -o-crisp-edges; /* opera */
                        -ms-interpolation-mode: nearest-neighbor; /* ie */
                    }
                </style>
            
    
                    <style>
                        .foliumtooltip {
                            
                        }
                       .foliumtooltip table{
                            margin: auto;
                        }
                        .foliumtooltip tr{
                            text-align: left;
                        }
                        .foliumtooltip th{
                            padding: 2px; padding-right: 8px;
                        }
                    </style>
            
</head>
<body>
    
    
            <div class=&quot;folium-map&quot; id=&quot;map_a4cca34007a35bb2a31a7e810e6d6500&quot; ></div>
        
</body>
<script>
    
    
            var map_a4cca34007a35bb2a31a7e810e6d6500 = L.map(
                &quot;map_a4cca34007a35bb2a31a7e810e6d6500&quot;,
                {
                    center: [0.0, 0.0],
                    crs: L.CRS.EPSG3857,
                    ...{
  &quot;zoom&quot;: 1,
  &quot;zoomControl&quot;: true,
  &quot;preferCanvas&quot;: false,
  &quot;name&quot;: &quot;Google&quot;,
}

                }
            );

            

        
    
            var tile_layer_fd4845f1e1ea6fe72bef84e5bd514253 = L.tileLayer(
                &quot;https://mt1.google.com/vt/lyrs=y\u0026x={x}\u0026y={y}\u0026z={z}&quot;,
                {
  &quot;minZoom&quot;: 0,
  &quot;maxZoom&quot;: 18,
  &quot;maxNativeZoom&quot;: 18,
  &quot;noWrap&quot;: false,
  &quot;attribution&quot;: &quot;Google&quot;,
  &quot;subdomains&quot;: &quot;abc&quot;,
  &quot;detectRetina&quot;: false,
  &quot;tms&quot;: false,
  &quot;opacity&quot;: 1,
}

            );
        
    
            tile_layer_fd4845f1e1ea6fe72bef84e5bd514253.addTo(map_a4cca34007a35bb2a31a7e810e6d6500);
        
    
            var feature_group_328fcb6311388d8026a8a54fd3e7615b = L.featureGroup(
                {
}
            );
        
    
        function geo_json_37149ec8c16ccdb01daefed845acdd73_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;color&quot;: &quot;#1f77b4&quot;, &quot;fillOpacity&quot;: 0, &quot;weight&quot;: 2};
            }
        }

        function geo_json_37149ec8c16ccdb01daefed845acdd73_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_37149ec8c16ccdb01daefed845acdd73 = L.geoJson(null, {
                onEachFeature: geo_json_37149ec8c16ccdb01daefed845acdd73_onEachFeature,
            
                style: geo_json_37149ec8c16ccdb01daefed845acdd73_styler,
            ...{
}
        });

        function geo_json_37149ec8c16ccdb01daefed845acdd73_add (data) {
            geo_json_37149ec8c16ccdb01daefed845acdd73
                .addData(data);
        }
            geo_json_37149ec8c16ccdb01daefed845acdd73_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[[-119.598442, 34.207188], [-119.598442, 35.223133], [-120.828926, 35.223133], [-120.828926, 34.207188], [-119.598442, 34.207188]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_37149ec8c16ccdb01daefed845acdd73.bindTooltip(
                `<div>
                     
        <b>ECO_L2T_LSTE Granule-ID: </b> ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01<br>
        <b>ECO_L2T_LSTE BeginningDateTime: </b> 2023-02-19 20:28:51.310000+00:00<br>
        
                 </div>`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            geo_json_37149ec8c16ccdb01daefed845acdd73.addTo(feature_group_328fcb6311388d8026a8a54fd3e7615b);
        
    
            var image_overlay_ae4cad4e72f4fe9f8b8a76f695726db6 = L.imageOverlay(
                &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01.png&quot;,
                [[34.207188, -120.828926], [35.223133, -119.598442]],
                {
  &quot;opacity&quot;: 0.75,
  &quot;zindex&quot;: 1,
}
            );
        
    
            image_overlay_ae4cad4e72f4fe9f8b8a76f695726db6.addTo(feature_group_328fcb6311388d8026a8a54fd3e7615b);
        
    
        function geo_json_665d5cc61aff94d4f2052d5cae675dbd_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;color&quot;: &quot;#1f77b4&quot;, &quot;fillOpacity&quot;: 0, &quot;weight&quot;: 2};
            }
        }

        function geo_json_665d5cc61aff94d4f2052d5cae675dbd_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_665d5cc61aff94d4f2052d5cae675dbd = L.geoJson(null, {
                onEachFeature: geo_json_665d5cc61aff94d4f2052d5cae675dbd_onEachFeature,
            
                style: geo_json_665d5cc61aff94d4f2052d5cae675dbd_styler,
            ...{
}
        });

        function geo_json_665d5cc61aff94d4f2052d5cae675dbd_add (data) {
            geo_json_665d5cc61aff94d4f2052d5cae675dbd
                .addData(data);
        }
            geo_json_665d5cc61aff94d4f2052d5cae675dbd_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[[-120.7079086303711, 35.54348373413086], [-121.19893646240234, 34.90925979614258], [-120.4920883178711, 34.362003326416016], [-120.00106048583984, 34.9962272644043], [-120.7079086303711, 35.54348373413086]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_665d5cc61aff94d4f2052d5cae675dbd.bindTooltip(
                `<div>
                     
            <b> EMITL2ARFL Granule-ID:</b> EMIT_L2A_RFL_001_20230219T202939_2305013_002<br>
            <b> EMITL2ARFL BeginningDateTime: </b> 2023-02-19 20:29:39+00:00<br>
            
                 </div>`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            geo_json_665d5cc61aff94d4f2052d5cae675dbd.addTo(feature_group_328fcb6311388d8026a8a54fd3e7615b);
        
    
        function geo_json_1a48fe1505bd2230a2ce6037df1d750c_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;color&quot;: &quot;#1f77b4&quot;, &quot;fillOpacity&quot;: 0, &quot;weight&quot;: 2};
            }
        }

        function geo_json_1a48fe1505bd2230a2ce6037df1d750c_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_1a48fe1505bd2230a2ce6037df1d750c = L.geoJson(null, {
                onEachFeature: geo_json_1a48fe1505bd2230a2ce6037df1d750c_onEachFeature,
            
                style: geo_json_1a48fe1505bd2230a2ce6037df1d750c_styler,
            ...{
}
        });

        function geo_json_1a48fe1505bd2230a2ce6037df1d750c_add (data) {
            geo_json_1a48fe1505bd2230a2ce6037df1d750c
                .addData(data);
        }
            geo_json_1a48fe1505bd2230a2ce6037df1d750c_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[[-120.04837799072266, 35.03645706176758], [-120.54523468017578, 34.40815353393555], [-119.24358367919922, 33.37880325317383], [-118.7467269897461, 34.00710678100586], [-120.04837799072266, 35.03645706176758]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_1a48fe1505bd2230a2ce6037df1d750c.bindTooltip(
                `<div>
                     
            <b> EMITL2ARFL Granule-ID:</b> EMIT_L2A_RFL_001_20230219T202951_2305013_003<br>
            <b> EMITL2ARFL BeginningDateTime: </b> 2023-02-19 20:29:51+00:00<br>
            
                 </div>`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            geo_json_1a48fe1505bd2230a2ce6037df1d750c.addTo(feature_group_328fcb6311388d8026a8a54fd3e7615b);
        
    
            var feature_group_cc894f68bccfd3687e61670fac60ccff = L.featureGroup(
                {
}
            );
        
    
        function geo_json_b6593433a11a29a36540544001837416_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;color&quot;: &quot;#aec7e8&quot;, &quot;fillOpacity&quot;: 0, &quot;weight&quot;: 2};
            }
        }

        function geo_json_b6593433a11a29a36540544001837416_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_b6593433a11a29a36540544001837416 = L.geoJson(null, {
                onEachFeature: geo_json_b6593433a11a29a36540544001837416_onEachFeature,
            
                style: geo_json_b6593433a11a29a36540544001837416_styler,
            ...{
}
        });

        function geo_json_b6593433a11a29a36540544001837416_add (data) {
            geo_json_b6593433a11a29a36540544001837416
                .addData(data);
        }
            geo_json_b6593433a11a29a36540544001837416_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[[-119.598442, 34.207188], [-119.598442, 35.223133], [-120.828926, 35.223133], [-120.828926, 34.207188], [-119.598442, 34.207188]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_b6593433a11a29a36540544001837416.bindTooltip(
                `<div>
                     
        <b>ECO_L2T_LSTE Granule-ID: </b> ECOv002_L2T_LSTE_26223_012_10SGD_20230219T202943_0710_01<br>
        <b>ECO_L2T_LSTE BeginningDateTime: </b> 2023-02-19 20:29:43.280000+00:00<br>
        
                 </div>`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            geo_json_b6593433a11a29a36540544001837416.addTo(feature_group_cc894f68bccfd3687e61670fac60ccff);
        
    
            var image_overlay_9e6372a3d3f319efdd9737c7a1e90045 = L.imageOverlay(
                &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26223_012_10SGD_20230219T202943_0710_01/ECOv002_L2T_LSTE_26223_012_10SGD_20230219T202943_0710_01.png&quot;,
                [[34.207188, -120.828926], [35.223133, -119.598442]],
                {
  &quot;opacity&quot;: 0.75,
  &quot;zindex&quot;: 1,
}
            );
        
    
            image_overlay_9e6372a3d3f319efdd9737c7a1e90045.addTo(feature_group_cc894f68bccfd3687e61670fac60ccff);
        
    
        function geo_json_08afc06c6c336eae10fe4ebf8dc458f9_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;color&quot;: &quot;#aec7e8&quot;, &quot;fillOpacity&quot;: 0, &quot;weight&quot;: 2};
            }
        }

        function geo_json_08afc06c6c336eae10fe4ebf8dc458f9_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_08afc06c6c336eae10fe4ebf8dc458f9 = L.geoJson(null, {
                onEachFeature: geo_json_08afc06c6c336eae10fe4ebf8dc458f9_onEachFeature,
            
                style: geo_json_08afc06c6c336eae10fe4ebf8dc458f9_styler,
            ...{
}
        });

        function geo_json_08afc06c6c336eae10fe4ebf8dc458f9_add (data) {
            geo_json_08afc06c6c336eae10fe4ebf8dc458f9
                .addData(data);
        }
            geo_json_08afc06c6c336eae10fe4ebf8dc458f9_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[[-120.7079086303711, 35.54348373413086], [-121.19893646240234, 34.90925979614258], [-120.4920883178711, 34.362003326416016], [-120.00106048583984, 34.9962272644043], [-120.7079086303711, 35.54348373413086]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_08afc06c6c336eae10fe4ebf8dc458f9.bindTooltip(
                `<div>
                     
            <b> EMITL2ARFL Granule-ID:</b> EMIT_L2A_RFL_001_20230219T202939_2305013_002<br>
            <b> EMITL2ARFL BeginningDateTime: </b> 2023-02-19 20:29:39+00:00<br>
            
                 </div>`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            geo_json_08afc06c6c336eae10fe4ebf8dc458f9.addTo(feature_group_cc894f68bccfd3687e61670fac60ccff);
        
    
        function geo_json_7d1a9dc96a847ac30b1465ca422e3b2b_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;color&quot;: &quot;#aec7e8&quot;, &quot;fillOpacity&quot;: 0, &quot;weight&quot;: 2};
            }
        }

        function geo_json_7d1a9dc96a847ac30b1465ca422e3b2b_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_7d1a9dc96a847ac30b1465ca422e3b2b = L.geoJson(null, {
                onEachFeature: geo_json_7d1a9dc96a847ac30b1465ca422e3b2b_onEachFeature,
            
                style: geo_json_7d1a9dc96a847ac30b1465ca422e3b2b_styler,
            ...{
}
        });

        function geo_json_7d1a9dc96a847ac30b1465ca422e3b2b_add (data) {
            geo_json_7d1a9dc96a847ac30b1465ca422e3b2b
                .addData(data);
        }
            geo_json_7d1a9dc96a847ac30b1465ca422e3b2b_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[[-120.04837799072266, 35.03645706176758], [-120.54523468017578, 34.40815353393555], [-119.24358367919922, 33.37880325317383], [-118.7467269897461, 34.00710678100586], [-120.04837799072266, 35.03645706176758]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_7d1a9dc96a847ac30b1465ca422e3b2b.bindTooltip(
                `<div>
                     
            <b> EMITL2ARFL Granule-ID:</b> EMIT_L2A_RFL_001_20230219T202951_2305013_003<br>
            <b> EMITL2ARFL BeginningDateTime: </b> 2023-02-19 20:29:51+00:00<br>
            
                 </div>`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            geo_json_7d1a9dc96a847ac30b1465ca422e3b2b.addTo(feature_group_cc894f68bccfd3687e61670fac60ccff);
        
    
            var feature_group_7dcf14a57eaed6c097dba36da3464e78 = L.featureGroup(
                {
}
            );
        
    
        function geo_json_9426e78e38c9c4b58192585a27d27ad3_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;color&quot;: &quot;#ff7f0e&quot;, &quot;fillOpacity&quot;: 0, &quot;weight&quot;: 2};
            }
        }

        function geo_json_9426e78e38c9c4b58192585a27d27ad3_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_9426e78e38c9c4b58192585a27d27ad3 = L.geoJson(null, {
                onEachFeature: geo_json_9426e78e38c9c4b58192585a27d27ad3_onEachFeature,
            
                style: geo_json_9426e78e38c9c4b58192585a27d27ad3_styler,
            ...{
}
        });

        function geo_json_9426e78e38c9c4b58192585a27d27ad3_add (data) {
            geo_json_9426e78e38c9c4b58192585a27d27ad3
                .addData(data);
        }
            geo_json_9426e78e38c9c4b58192585a27d27ad3_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[[-119.59844380403435, 34.20718855068355], [-119.59844380403435, 35.223132916637724], [-120.82892726886365, 35.223132916637724], [-120.82892726886365, 34.20718855068355], [-119.59844380403435, 34.20718855068355]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_9426e78e38c9c4b58192585a27d27ad3.bindTooltip(
                `<div>
                     
        <b>ECO_L2T_LSTE Granule-ID: </b> ECOv002_L2T_LSTE_26799_003_10SGD_20230328T221239_0711_02<br>
        <b>ECO_L2T_LSTE BeginningDateTime: </b> 2023-03-28 22:12:39.510000+00:00<br>
        
                 </div>`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            geo_json_9426e78e38c9c4b58192585a27d27ad3.addTo(feature_group_7dcf14a57eaed6c097dba36da3464e78);
        
    
            var image_overlay_0dc48f5d4140e2e6d25cdb055edea687 = L.imageOverlay(
                &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26799_003_10SGD_20230328T221239_0711_02/ECOv002_L2T_LSTE_26799_003_10SGD_20230328T221239_0711_02.png&quot;,
                [[34.20718855068355, -120.82892726886365], [35.223132916637724, -119.59844380403435]],
                {
  &quot;opacity&quot;: 0.75,
  &quot;zindex&quot;: 1,
}
            );
        
    
            image_overlay_0dc48f5d4140e2e6d25cdb055edea687.addTo(feature_group_7dcf14a57eaed6c097dba36da3464e78);
        
    
        function geo_json_fc94b7aadc1bf59a9c11efba7cc29828_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;color&quot;: &quot;#ff7f0e&quot;, &quot;fillOpacity&quot;: 0, &quot;weight&quot;: 2};
            }
        }

        function geo_json_fc94b7aadc1bf59a9c11efba7cc29828_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_fc94b7aadc1bf59a9c11efba7cc29828 = L.geoJson(null, {
                onEachFeature: geo_json_fc94b7aadc1bf59a9c11efba7cc29828_onEachFeature,
            
                style: geo_json_fc94b7aadc1bf59a9c11efba7cc29828_styler,
            ...{
}
        });

        function geo_json_fc94b7aadc1bf59a9c11efba7cc29828_add (data) {
            geo_json_fc94b7aadc1bf59a9c11efba7cc29828
                .addData(data);
        }
            geo_json_fc94b7aadc1bf59a9c11efba7cc29828_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[[-120.69175720214844, 34.82278823852539], [-121.46434020996094, 34.206539154052734], [-120.96505737304688, 33.58058547973633], [-120.19247436523438, 34.196834564208984], [-120.69175720214844, 34.82278823852539]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_fc94b7aadc1bf59a9c11efba7cc29828.bindTooltip(
                `<div>
                     
            <b> EMITL2ARFL Granule-ID:</b> EMIT_L2A_RFL_001_20230328T221244_2308715_001<br>
            <b> EMITL2ARFL BeginningDateTime: </b> 2023-03-28 22:12:44+00:00<br>
            
                 </div>`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            geo_json_fc94b7aadc1bf59a9c11efba7cc29828.addTo(feature_group_7dcf14a57eaed6c097dba36da3464e78);
        
    
            var feature_group_fcd37caf23a3627af63894248d7a2921 = L.featureGroup(
                {
}
            );
        
    
        function geo_json_4fc49a3d8b3c2d447dc9efb04f164774_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;color&quot;: &quot;#ffbb78&quot;, &quot;fillOpacity&quot;: 0, &quot;weight&quot;: 2};
            }
        }

        function geo_json_4fc49a3d8b3c2d447dc9efb04f164774_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_4fc49a3d8b3c2d447dc9efb04f164774 = L.geoJson(null, {
                onEachFeature: geo_json_4fc49a3d8b3c2d447dc9efb04f164774_onEachFeature,
            
                style: geo_json_4fc49a3d8b3c2d447dc9efb04f164774_styler,
            ...{
}
        });

        function geo_json_4fc49a3d8b3c2d447dc9efb04f164774_add (data) {
            geo_json_4fc49a3d8b3c2d447dc9efb04f164774
                .addData(data);
        }
            geo_json_4fc49a3d8b3c2d447dc9efb04f164774_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[[-119.59844380403435, 34.20718855068355], [-119.59844380403435, 35.223132916637724], [-120.82892726886365, 35.223132916637724], [-120.82892726886365, 34.20718855068355], [-119.59844380403435, 34.20718855068355]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_4fc49a3d8b3c2d447dc9efb04f164774.bindTooltip(
                `<div>
                     
        <b>ECO_L2T_LSTE Granule-ID: </b> ECOv002_L2T_LSTE_26860_001_10SGD_20230401T203733_0712_02<br>
        <b>ECO_L2T_LSTE BeginningDateTime: </b> 2023-04-01 20:37:33.038000+00:00<br>
        
                 </div>`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            geo_json_4fc49a3d8b3c2d447dc9efb04f164774.addTo(feature_group_fcd37caf23a3627af63894248d7a2921);
        
    
            var image_overlay_020ffff4ea91f184620c31909d69965e = L.imageOverlay(
                &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26860_001_10SGD_20230401T203733_0712_02/ECOv002_L2T_LSTE_26860_001_10SGD_20230401T203733_0712_02.png&quot;,
                [[34.20718855068355, -120.82892726886365], [35.223132916637724, -119.59844380403435]],
                {
  &quot;opacity&quot;: 0.75,
  &quot;zindex&quot;: 1,
}
            );
        
    
            image_overlay_020ffff4ea91f184620c31909d69965e.addTo(feature_group_fcd37caf23a3627af63894248d7a2921);
        
    
        function geo_json_fb73975c2379e89e043768737b3ad174_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;color&quot;: &quot;#ffbb78&quot;, &quot;fillOpacity&quot;: 0, &quot;weight&quot;: 2};
            }
        }

        function geo_json_fb73975c2379e89e043768737b3ad174_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_fb73975c2379e89e043768737b3ad174 = L.geoJson(null, {
                onEachFeature: geo_json_fb73975c2379e89e043768737b3ad174_onEachFeature,
            
                style: geo_json_fb73975c2379e89e043768737b3ad174_styler,
            ...{
}
        });

        function geo_json_fb73975c2379e89e043768737b3ad174_add (data) {
            geo_json_fb73975c2379e89e043768737b3ad174
                .addData(data);
        }
            geo_json_fb73975c2379e89e043768737b3ad174_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[[-120.21542358398438, 34.906585693359375], [-120.99247741699219, 34.28937530517578], [-120.49314880371094, 33.660736083984375], [-119.71609497070312, 34.27794647216797], [-120.21542358398438, 34.906585693359375]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_fb73975c2379e89e043768737b3ad174.bindTooltip(
                `<div>
                     
            <b> EMITL2ARFL Granule-ID:</b> EMIT_L2A_RFL_001_20230401T203751_2309114_002<br>
            <b> EMITL2ARFL BeginningDateTime: </b> 2023-04-01 20:37:51+00:00<br>
            
                 </div>`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            geo_json_fb73975c2379e89e043768737b3ad174.addTo(feature_group_fcd37caf23a3627af63894248d7a2921);
        
    
        function geo_json_e4a78e49f2571c07ca09a2fc77b96917_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;color&quot;: &quot;#ffbb78&quot;, &quot;fillOpacity&quot;: 0, &quot;weight&quot;: 2};
            }
        }

        function geo_json_e4a78e49f2571c07ca09a2fc77b96917_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_e4a78e49f2571c07ca09a2fc77b96917 = L.geoJson(null, {
                onEachFeature: geo_json_e4a78e49f2571c07ca09a2fc77b96917_onEachFeature,
            
                style: geo_json_e4a78e49f2571c07ca09a2fc77b96917_styler,
            ...{
}
        });

        function geo_json_e4a78e49f2571c07ca09a2fc77b96917_add (data) {
            geo_json_e4a78e49f2571c07ca09a2fc77b96917
                .addData(data);
        }
            geo_json_e4a78e49f2571c07ca09a2fc77b96917_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[[-119.55792999267578, 35.41507339477539], [-120.34871673583984, 34.799312591552734], [-119.85619354248047, 34.166805267333984], [-119.0654067993164, 34.78256607055664], [-119.55792999267578, 35.41507339477539]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_e4a78e49f2571c07ca09a2fc77b96917.bindTooltip(
                `<div>
                     
            <b> EMITL2ARFL Granule-ID:</b> EMIT_L2A_RFL_001_20230401T203803_2309114_003<br>
            <b> EMITL2ARFL BeginningDateTime: </b> 2023-04-01 20:38:03+00:00<br>
            
                 </div>`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            geo_json_e4a78e49f2571c07ca09a2fc77b96917.addTo(feature_group_fcd37caf23a3627af63894248d7a2921);
        
    
            var feature_group_c8ccedb22bb8c09db154e2439db6f7b9 = L.featureGroup(
                {
}
            );
        
    
        function geo_json_e58cb4b94df6fcf1489f304c24934ade_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;color&quot;: &quot;#2ca02c&quot;, &quot;fillOpacity&quot;: 0, &quot;weight&quot;: 2};
            }
        }

        function geo_json_e58cb4b94df6fcf1489f304c24934ade_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_e58cb4b94df6fcf1489f304c24934ade = L.geoJson(null, {
                onEachFeature: geo_json_e58cb4b94df6fcf1489f304c24934ade_onEachFeature,
            
                style: geo_json_e58cb4b94df6fcf1489f304c24934ade_styler,
            ...{
}
        });

        function geo_json_e58cb4b94df6fcf1489f304c24934ade_add (data) {
            geo_json_e58cb4b94df6fcf1489f304c24934ade
                .addData(data);
        }
            geo_json_e58cb4b94df6fcf1489f304c24934ade_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[[-119.59844380403435, 34.20718855068355], [-119.59844380403435, 35.223132916637724], [-120.82892726886365, 35.223132916637724], [-120.82892726886365, 34.20718855068355], [-119.59844380403435, 34.20718855068355]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_e58cb4b94df6fcf1489f304c24934ade.bindTooltip(
                `<div>
                     
        <b>ECO_L2T_LSTE Granule-ID: </b> ECOv002_L2T_LSTE_26921_001_10SGD_20230405T190258_0712_02<br>
        <b>ECO_L2T_LSTE BeginningDateTime: </b> 2023-04-05 19:02:58.955000+00:00<br>
        
                 </div>`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            geo_json_e58cb4b94df6fcf1489f304c24934ade.addTo(feature_group_c8ccedb22bb8c09db154e2439db6f7b9);
        
    
            var image_overlay_fc1b720177d8c4e66e503873d13b41eb = L.imageOverlay(
                &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26921_001_10SGD_20230405T190258_0712_02/ECOv002_L2T_LSTE_26921_001_10SGD_20230405T190258_0712_02.png&quot;,
                [[34.20718855068355, -120.82892726886365], [35.223132916637724, -119.59844380403435]],
                {
  &quot;opacity&quot;: 0.75,
  &quot;zindex&quot;: 1,
}
            );
        
    
            image_overlay_fc1b720177d8c4e66e503873d13b41eb.addTo(feature_group_c8ccedb22bb8c09db154e2439db6f7b9);
        
    
        function geo_json_890544f497b1ffb265314d5f7527b27c_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;color&quot;: &quot;#2ca02c&quot;, &quot;fillOpacity&quot;: 0, &quot;weight&quot;: 2};
            }
        }

        function geo_json_890544f497b1ffb265314d5f7527b27c_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_890544f497b1ffb265314d5f7527b27c = L.geoJson(null, {
                onEachFeature: geo_json_890544f497b1ffb265314d5f7527b27c_onEachFeature,
            
                style: geo_json_890544f497b1ffb265314d5f7527b27c_styler,
            ...{
}
        });

        function geo_json_890544f497b1ffb265314d5f7527b27c_add (data) {
            geo_json_890544f497b1ffb265314d5f7527b27c
                .addData(data);
        }
            geo_json_890544f497b1ffb265314d5f7527b27c_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[[-119.87803649902344, 34.90690994262695], [-120.65480041503906, 34.290470123291016], [-120.15544128417969, 33.66123580932617], [-119.37867736816406, 34.27767562866211], [-119.87803649902344, 34.90690994262695]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_890544f497b1ffb265314d5f7527b27c.bindTooltip(
                `<div>
                     
            <b> EMITL2ARFL Granule-ID:</b> EMIT_L2A_RFL_001_20230405T190311_2309513_002<br>
            <b> EMITL2ARFL BeginningDateTime: </b> 2023-04-05 19:03:11+00:00<br>
            
                 </div>`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            geo_json_890544f497b1ffb265314d5f7527b27c.addTo(feature_group_c8ccedb22bb8c09db154e2439db6f7b9);
        
    
            var feature_group_d72a9e756df140f8c831606d4989cb2b = L.featureGroup(
                {
}
            );
        
    
        function geo_json_728e40babd2ec41e57c721bb5d93bd74_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;color&quot;: &quot;#98df8a&quot;, &quot;fillOpacity&quot;: 0, &quot;weight&quot;: 2};
            }
        }

        function geo_json_728e40babd2ec41e57c721bb5d93bd74_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_728e40babd2ec41e57c721bb5d93bd74 = L.geoJson(null, {
                onEachFeature: geo_json_728e40babd2ec41e57c721bb5d93bd74_onEachFeature,
            
                style: geo_json_728e40babd2ec41e57c721bb5d93bd74_styler,
            ...{
}
        });

        function geo_json_728e40babd2ec41e57c721bb5d93bd74_add (data) {
            geo_json_728e40babd2ec41e57c721bb5d93bd74
                .addData(data);
        }
            geo_json_728e40babd2ec41e57c721bb5d93bd74_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[[-119.598442, 34.207188], [-119.598442, 35.223133], [-120.828926, 35.223133], [-120.828926, 34.207188], [-119.598442, 34.207188]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_728e40babd2ec41e57c721bb5d93bd74.bindTooltip(
                `<div>
                     
        <b>ECO_L2T_LSTE Granule-ID: </b> ECOv002_L2T_LSTE_27185_010_10SGD_20230422T195836_0710_01<br>
        <b>ECO_L2T_LSTE BeginningDateTime: </b> 2023-04-22 19:58:36.740000+00:00<br>
        
                 </div>`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            geo_json_728e40babd2ec41e57c721bb5d93bd74.addTo(feature_group_d72a9e756df140f8c831606d4989cb2b);
        
    
            var image_overlay_42e3c1a416b39c31e858c8368d060093 = L.imageOverlay(
                &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_27185_010_10SGD_20230422T195836_0710_01/ECOv002_L2T_LSTE_27185_010_10SGD_20230422T195836_0710_01.png&quot;,
                [[34.207188, -120.828926], [35.223133, -119.598442]],
                {
  &quot;opacity&quot;: 0.75,
  &quot;zindex&quot;: 1,
}
            );
        
    
            image_overlay_42e3c1a416b39c31e858c8368d060093.addTo(feature_group_d72a9e756df140f8c831606d4989cb2b);
        
    
        function geo_json_263091a83268bc5ab73ca10674b6e119_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;color&quot;: &quot;#98df8a&quot;, &quot;fillOpacity&quot;: 0, &quot;weight&quot;: 2};
            }
        }

        function geo_json_263091a83268bc5ab73ca10674b6e119_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_263091a83268bc5ab73ca10674b6e119 = L.geoJson(null, {
                onEachFeature: geo_json_263091a83268bc5ab73ca10674b6e119_onEachFeature,
            
                style: geo_json_263091a83268bc5ab73ca10674b6e119_styler,
            ...{
}
        });

        function geo_json_263091a83268bc5ab73ca10674b6e119_add (data) {
            geo_json_263091a83268bc5ab73ca10674b6e119
                .addData(data);
        }
            geo_json_263091a83268bc5ab73ca10674b6e119_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[[-120.4982681274414, 35.12071228027344], [-120.99520111083984, 34.488731384277344], [-120.29850006103516, 33.94091033935547], [-119.80156707763672, 34.57289123535156], [-120.4982681274414, 35.12071228027344]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_263091a83268bc5ab73ca10674b6e119.bindTooltip(
                `<div>
                     
            <b> EMITL2ARFL Granule-ID:</b> EMIT_L2A_RFL_001_20230422T195924_2311213_002<br>
            <b> EMITL2ARFL BeginningDateTime: </b> 2023-04-22 19:59:24+00:00<br>
            
                 </div>`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            geo_json_263091a83268bc5ab73ca10674b6e119.addTo(feature_group_d72a9e756df140f8c831606d4989cb2b);
        
    
            var feature_group_1fcc568049974886129bd9ef6f4a6b17 = L.featureGroup(
                {
}
            );
        
    
        function geo_json_0c04c792a94860d1b3ccb6b339af7202_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;color&quot;: &quot;#d62728&quot;, &quot;fillOpacity&quot;: 0, &quot;weight&quot;: 2};
            }
        }

        function geo_json_0c04c792a94860d1b3ccb6b339af7202_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_0c04c792a94860d1b3ccb6b339af7202 = L.geoJson(null, {
                onEachFeature: geo_json_0c04c792a94860d1b3ccb6b339af7202_onEachFeature,
            
                style: geo_json_0c04c792a94860d1b3ccb6b339af7202_styler,
            ...{
}
        });

        function geo_json_0c04c792a94860d1b3ccb6b339af7202_add (data) {
            geo_json_0c04c792a94860d1b3ccb6b339af7202
                .addData(data);
        }
            geo_json_0c04c792a94860d1b3ccb6b339af7202_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[[-119.59844380403435, 34.20718855068355], [-119.59844380403435, 35.223132916637724], [-120.82892726886365, 35.223132916637724], [-120.82892726886365, 34.20718855068355], [-119.59844380403435, 34.20718855068355]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_0c04c792a94860d1b3ccb6b339af7202.bindTooltip(
                `<div>
                     
        <b>ECO_L2T_LSTE Granule-ID: </b> ECOv002_L2T_LSTE_27745_005_10SGD_20230528T220401_0711_02<br>
        <b>ECO_L2T_LSTE BeginningDateTime: </b> 2023-05-28 22:04:01.699000+00:00<br>
        
                 </div>`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            geo_json_0c04c792a94860d1b3ccb6b339af7202.addTo(feature_group_1fcc568049974886129bd9ef6f4a6b17);
        
    
            var image_overlay_30105211d5598446d337ce0f1cd221d2 = L.imageOverlay(
                &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_27745_005_10SGD_20230528T220401_0711_02/ECOv002_L2T_LSTE_27745_005_10SGD_20230528T220401_0711_02.png&quot;,
                [[34.20718855068355, -120.82892726886365], [35.223132916637724, -119.59844380403435]],
                {
  &quot;opacity&quot;: 0.75,
  &quot;zindex&quot;: 1,
}
            );
        
    
            image_overlay_30105211d5598446d337ce0f1cd221d2.addTo(feature_group_1fcc568049974886129bd9ef6f4a6b17);
        
    
        function geo_json_fe38f9015f097247ec66c111c1f5a56d_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;color&quot;: &quot;#d62728&quot;, &quot;fillOpacity&quot;: 0, &quot;weight&quot;: 2};
            }
        }

        function geo_json_fe38f9015f097247ec66c111c1f5a56d_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_fe38f9015f097247ec66c111c1f5a56d = L.geoJson(null, {
                onEachFeature: geo_json_fe38f9015f097247ec66c111c1f5a56d_onEachFeature,
            
                style: geo_json_fe38f9015f097247ec66c111c1f5a56d_styler,
            ...{
}
        });

        function geo_json_fe38f9015f097247ec66c111c1f5a56d_add (data) {
            geo_json_fe38f9015f097247ec66c111c1f5a56d
                .addData(data);
        }
            geo_json_fe38f9015f097247ec66c111c1f5a56d_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[[-119.96105194091797, 35.441497802734375], [-120.75292205810547, 34.82750701904297], [-120.26703643798828, 34.20085144042969], [-119.47516632080078, 34.814842224121094], [-119.96105194091797, 35.441497802734375]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_fe38f9015f097247ec66c111c1f5a56d.bindTooltip(
                `<div>
                     
            <b> EMITL2ARFL Granule-ID:</b> EMIT_L2A_RFL_001_20230528T220420_2314815_004<br>
            <b> EMITL2ARFL BeginningDateTime: </b> 2023-05-28 22:04:20+00:00<br>
            
                 </div>`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            geo_json_fe38f9015f097247ec66c111c1f5a56d.addTo(feature_group_1fcc568049974886129bd9ef6f4a6b17);
        
    
            var feature_group_e432c849888a6ea287876fefdd88f3f8 = L.featureGroup(
                {
}
            );
        
    
        function geo_json_4fe0ae129072d788f3afea215862e11d_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;color&quot;: &quot;#ff9896&quot;, &quot;fillOpacity&quot;: 0, &quot;weight&quot;: 2};
            }
        }

        function geo_json_4fe0ae129072d788f3afea215862e11d_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_4fe0ae129072d788f3afea215862e11d = L.geoJson(null, {
                onEachFeature: geo_json_4fe0ae129072d788f3afea215862e11d_onEachFeature,
            
                style: geo_json_4fe0ae129072d788f3afea215862e11d_styler,
            ...{
}
        });

        function geo_json_4fe0ae129072d788f3afea215862e11d_add (data) {
            geo_json_4fe0ae129072d788f3afea215862e11d
                .addData(data);
        }
            geo_json_4fe0ae129072d788f3afea215862e11d_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[[-119.59844380403435, 34.20718855068355], [-119.59844380403435, 35.223132916637724], [-120.82892726886365, 35.223132916637724], [-120.82892726886365, 34.20718855068355], [-119.59844380403435, 34.20718855068355]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_4fe0ae129072d788f3afea215862e11d.bindTooltip(
                `<div>
                     
        <b>ECO_L2T_LSTE Granule-ID: </b> ECOv002_L2T_LSTE_27806_005_10SGD_20230601T202619_0711_02<br>
        <b>ECO_L2T_LSTE BeginningDateTime: </b> 2023-06-01 20:26:19.773000+00:00<br>
        
                 </div>`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            geo_json_4fe0ae129072d788f3afea215862e11d.addTo(feature_group_e432c849888a6ea287876fefdd88f3f8);
        
    
            var image_overlay_dcbc2d4adadcfaed59adeecf93a375d9 = L.imageOverlay(
                &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_27806_005_10SGD_20230601T202619_0711_02/ECOv002_L2T_LSTE_27806_005_10SGD_20230601T202619_0711_02.png&quot;,
                [[34.20718855068355, -120.82892726886365], [35.223132916637724, -119.59844380403435]],
                {
  &quot;opacity&quot;: 0.75,
  &quot;zindex&quot;: 1,
}
            );
        
    
            image_overlay_dcbc2d4adadcfaed59adeecf93a375d9.addTo(feature_group_e432c849888a6ea287876fefdd88f3f8);
        
    
        function geo_json_9bcda900f294281ea993160a87fa1316_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;color&quot;: &quot;#ff9896&quot;, &quot;fillOpacity&quot;: 0, &quot;weight&quot;: 2};
            }
        }

        function geo_json_9bcda900f294281ea993160a87fa1316_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_9bcda900f294281ea993160a87fa1316 = L.geoJson(null, {
                onEachFeature: geo_json_9bcda900f294281ea993160a87fa1316_onEachFeature,
            
                style: geo_json_9bcda900f294281ea993160a87fa1316_styler,
            ...{
}
        });

        function geo_json_9bcda900f294281ea993160a87fa1316_add (data) {
            geo_json_9bcda900f294281ea993160a87fa1316
                .addData(data);
        }
            geo_json_9bcda900f294281ea993160a87fa1316_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[[-120.29042053222656, 34.51665496826172], [-120.82316589355469, 33.912635803222656], [-120.11483764648438, 33.28789520263672], [-119.58209228515625, 33.89191436767578], [-120.29042053222656, 34.51665496826172]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_9bcda900f294281ea993160a87fa1316.bindTooltip(
                `<div>
                     
            <b> EMITL2ARFL Granule-ID:</b> EMIT_L2A_RFL_001_20230601T202611_2315214_002<br>
            <b> EMITL2ARFL BeginningDateTime: </b> 2023-06-01 20:26:11+00:00<br>
            
                 </div>`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            geo_json_9bcda900f294281ea993160a87fa1316.addTo(feature_group_e432c849888a6ea287876fefdd88f3f8);
        
    
        function geo_json_23be59f1a73809e4e6c4cddfddb2e6a7_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;color&quot;: &quot;#ff9896&quot;, &quot;fillOpacity&quot;: 0, &quot;weight&quot;: 2};
            }
        }

        function geo_json_23be59f1a73809e4e6c4cddfddb2e6a7_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_23be59f1a73809e4e6c4cddfddb2e6a7 = L.geoJson(null, {
                onEachFeature: geo_json_23be59f1a73809e4e6c4cddfddb2e6a7_onEachFeature,
            
                style: geo_json_23be59f1a73809e4e6c4cddfddb2e6a7_styler,
            ...{
}
        });

        function geo_json_23be59f1a73809e4e6c4cddfddb2e6a7_add (data) {
            geo_json_23be59f1a73809e4e6c4cddfddb2e6a7
                .addData(data);
        }
            geo_json_23be59f1a73809e4e6c4cddfddb2e6a7_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[[-119.40322875976562, 35.041927337646484], [-120.18728637695312, 34.42692947387695], [-119.70027160644531, 33.806034088134766], [-118.91621398925781, 34.4210319519043], [-119.40322875976562, 35.041927337646484]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_23be59f1a73809e4e6c4cddfddb2e6a7.bindTooltip(
                `<div>
                     
            <b> EMITL2ARFL Granule-ID:</b> EMIT_L2A_RFL_001_20230601T202623_2315214_003<br>
            <b> EMITL2ARFL BeginningDateTime: </b> 2023-06-01 20:26:23+00:00<br>
            
                 </div>`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            geo_json_23be59f1a73809e4e6c4cddfddb2e6a7.addTo(feature_group_e432c849888a6ea287876fefdd88f3f8);
        
    
            var feature_group_1bb186c17f2aeb45a5ee176d2b0fcc18 = L.featureGroup(
                {
}
            );
        
    
        function geo_json_238ae71fed461b1ba7d15a90542e4ae4_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;color&quot;: &quot;#9467bd&quot;, &quot;fillOpacity&quot;: 0, &quot;weight&quot;: 2};
            }
        }

        function geo_json_238ae71fed461b1ba7d15a90542e4ae4_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_238ae71fed461b1ba7d15a90542e4ae4 = L.geoJson(null, {
                onEachFeature: geo_json_238ae71fed461b1ba7d15a90542e4ae4_onEachFeature,
            
                style: geo_json_238ae71fed461b1ba7d15a90542e4ae4_styler,
            ...{
}
        });

        function geo_json_238ae71fed461b1ba7d15a90542e4ae4_add (data) {
            geo_json_238ae71fed461b1ba7d15a90542e4ae4
                .addData(data);
        }
            geo_json_238ae71fed461b1ba7d15a90542e4ae4_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[[-119.59844380403435, 34.20718855068355], [-119.59844380403435, 35.223132916637724], [-120.82892726886365, 35.223132916637724], [-120.82892726886365, 34.20718855068355], [-119.59844380403435, 34.20718855068355]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_238ae71fed461b1ba7d15a90542e4ae4.bindTooltip(
                `<div>
                     
        <b>ECO_L2T_LSTE Granule-ID: </b> ECOv002_L2T_LSTE_28238_012_10SGD_20230629T170416_0711_02<br>
        <b>ECO_L2T_LSTE BeginningDateTime: </b> 2023-06-29 17:04:16.344000+00:00<br>
        
                 </div>`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            geo_json_238ae71fed461b1ba7d15a90542e4ae4.addTo(feature_group_1bb186c17f2aeb45a5ee176d2b0fcc18);
        
    
            var image_overlay_fa350ea5d2a182b218b0fa8c30c2489b = L.imageOverlay(
                &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_28238_012_10SGD_20230629T170416_0711_02/ECOv002_L2T_LSTE_28238_012_10SGD_20230629T170416_0711_02.png&quot;,
                [[34.20718855068355, -120.82892726886365], [35.223132916637724, -119.59844380403435]],
                {
  &quot;opacity&quot;: 0.75,
  &quot;zindex&quot;: 1,
}
            );
        
    
            image_overlay_fa350ea5d2a182b218b0fa8c30c2489b.addTo(feature_group_1bb186c17f2aeb45a5ee176d2b0fcc18);
        
    
        function geo_json_be07c0fabb770b0d56e775878b371928_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;color&quot;: &quot;#9467bd&quot;, &quot;fillOpacity&quot;: 0, &quot;weight&quot;: 2};
            }
        }

        function geo_json_be07c0fabb770b0d56e775878b371928_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_be07c0fabb770b0d56e775878b371928 = L.geoJson(null, {
                onEachFeature: geo_json_be07c0fabb770b0d56e775878b371928_onEachFeature,
            
                style: geo_json_be07c0fabb770b0d56e775878b371928_styler,
            ...{
}
        });

        function geo_json_be07c0fabb770b0d56e775878b371928_add (data) {
            geo_json_be07c0fabb770b0d56e775878b371928
                .addData(data);
        }
            geo_json_be07c0fabb770b0d56e775878b371928_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[[-120.35333251953125, 35.27558517456055], [-120.83880615234375, 34.655216217041016], [-120.13705444335938, 34.10605239868164], [-119.65158081054688, 34.72642135620117], [-120.35333251953125, 35.27558517456055]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_be07c0fabb770b0d56e775878b371928.bindTooltip(
                `<div>
                     
            <b> EMITL2ARFL Granule-ID:</b> EMIT_L2A_RFL_001_20230629T170449_2318011_002<br>
            <b> EMITL2ARFL BeginningDateTime: </b> 2023-06-29 17:04:49+00:00<br>
            
                 </div>`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            geo_json_be07c0fabb770b0d56e775878b371928.addTo(feature_group_1bb186c17f2aeb45a5ee176d2b0fcc18);
        
    
            var feature_group_8938d996c8c66b588603f109a39109d7 = L.featureGroup(
                {
}
            );
        
    
        function geo_json_6a1a9fa546dd325bf8c53dc4969b3bf6_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;color&quot;: &quot;#c5b0d5&quot;, &quot;fillOpacity&quot;: 0, &quot;weight&quot;: 2};
            }
        }

        function geo_json_6a1a9fa546dd325bf8c53dc4969b3bf6_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_6a1a9fa546dd325bf8c53dc4969b3bf6 = L.geoJson(null, {
                onEachFeature: geo_json_6a1a9fa546dd325bf8c53dc4969b3bf6_onEachFeature,
            
                style: geo_json_6a1a9fa546dd325bf8c53dc4969b3bf6_styler,
            ...{
}
        });

        function geo_json_6a1a9fa546dd325bf8c53dc4969b3bf6_add (data) {
            geo_json_6a1a9fa546dd325bf8c53dc4969b3bf6
                .addData(data);
        }
            geo_json_6a1a9fa546dd325bf8c53dc4969b3bf6_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[[-119.59844380403435, 34.20718855068355], [-119.59844380403435, 35.223132916637724], [-120.82892726886365, 35.223132916637724], [-120.82892726886365, 34.20718855068355], [-119.59844380403435, 34.20718855068355]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_6a1a9fa546dd325bf8c53dc4969b3bf6.bindTooltip(
                `<div>
                     
        <b>ECO_L2T_LSTE Granule-ID: </b> ECOv002_L2T_LSTE_28859_005_10SGD_20230808T173811_0712_02<br>
        <b>ECO_L2T_LSTE BeginningDateTime: </b> 2023-08-08 17:38:11.790000+00:00<br>
        
                 </div>`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            geo_json_6a1a9fa546dd325bf8c53dc4969b3bf6.addTo(feature_group_8938d996c8c66b588603f109a39109d7);
        
    
            var image_overlay_6445e29f171c6efd9f38762f69c88a2f = L.imageOverlay(
                &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_28859_005_10SGD_20230808T173811_0712_02/ECOv002_L2T_LSTE_28859_005_10SGD_20230808T173811_0712_02.png&quot;,
                [[34.20718855068355, -120.82892726886365], [35.223132916637724, -119.59844380403435]],
                {
  &quot;opacity&quot;: 0.75,
  &quot;zindex&quot;: 1,
}
            );
        
    
            image_overlay_6445e29f171c6efd9f38762f69c88a2f.addTo(feature_group_8938d996c8c66b588603f109a39109d7);
        
    
        function geo_json_e78d70d244538ba90650befcd4c1c17c_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;color&quot;: &quot;#c5b0d5&quot;, &quot;fillOpacity&quot;: 0, &quot;weight&quot;: 2};
            }
        }

        function geo_json_e78d70d244538ba90650befcd4c1c17c_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_e78d70d244538ba90650befcd4c1c17c = L.geoJson(null, {
                onEachFeature: geo_json_e78d70d244538ba90650befcd4c1c17c_onEachFeature,
            
                style: geo_json_e78d70d244538ba90650befcd4c1c17c_styler,
            ...{
}
        });

        function geo_json_e78d70d244538ba90650befcd4c1c17c_add (data) {
            geo_json_e78d70d244538ba90650befcd4c1c17c
                .addData(data);
        }
            geo_json_e78d70d244538ba90650befcd4c1c17c_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[[-120.1601333618164, 35.52039337158203], [-120.95423126220703, 34.905784606933594], [-120.46385955810547, 34.27220153808594], [-119.66976165771484, 34.886810302734375], [-120.1601333618164, 35.52039337158203]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_e78d70d244538ba90650befcd4c1c17c.bindTooltip(
                `<div>
                     
            <b> EMITL2ARFL Granule-ID:</b> EMIT_L2A_RFL_001_20230808T173854_2322012_006<br>
            <b> EMITL2ARFL BeginningDateTime: </b> 2023-08-08 17:38:54+00:00<br>
            
                 </div>`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            geo_json_e78d70d244538ba90650befcd4c1c17c.addTo(feature_group_8938d996c8c66b588603f109a39109d7);
        
    
            var feature_group_127bd602cf9ed5a927e6e385ba64d126 = L.featureGroup(
                {
}
            );
        
    
        function geo_json_cb10d7f787e157cd5bbc2ed9e3198915_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;color&quot;: &quot;#8c564b&quot;, &quot;fillOpacity&quot;: 0, &quot;weight&quot;: 2};
            }
        }

        function geo_json_cb10d7f787e157cd5bbc2ed9e3198915_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_cb10d7f787e157cd5bbc2ed9e3198915 = L.geoJson(null, {
                onEachFeature: geo_json_cb10d7f787e157cd5bbc2ed9e3198915_onEachFeature,
            
                style: geo_json_cb10d7f787e157cd5bbc2ed9e3198915_styler,
            ...{
}
        });

        function geo_json_cb10d7f787e157cd5bbc2ed9e3198915_add (data) {
            geo_json_cb10d7f787e157cd5bbc2ed9e3198915
                .addData(data);
        }
            geo_json_cb10d7f787e157cd5bbc2ed9e3198915_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[[-119.59844380403435, 34.20718855068355], [-119.59844380403435, 35.223132916637724], [-120.82892726886365, 35.223132916637724], [-120.82892726886365, 34.20718855068355], [-119.59844380403435, 34.20718855068355]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_cb10d7f787e157cd5bbc2ed9e3198915.bindTooltip(
                `<div>
                     
        <b>ECO_L2T_LSTE Granule-ID: </b> ECOv002_L2T_LSTE_28859_006_10SGD_20230808T173903_0712_02<br>
        <b>ECO_L2T_LSTE BeginningDateTime: </b> 2023-08-08 17:39:03.759000+00:00<br>
        
                 </div>`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            geo_json_cb10d7f787e157cd5bbc2ed9e3198915.addTo(feature_group_127bd602cf9ed5a927e6e385ba64d126);
        
    
            var image_overlay_e9d84ca3f85f23f75fc23adfcf150cc5 = L.imageOverlay(
                &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_28859_006_10SGD_20230808T173903_0712_02/ECOv002_L2T_LSTE_28859_006_10SGD_20230808T173903_0712_02.png&quot;,
                [[34.20718855068355, -120.82892726886365], [35.223132916637724, -119.59844380403435]],
                {
  &quot;opacity&quot;: 0.75,
  &quot;zindex&quot;: 1,
}
            );
        
    
            image_overlay_e9d84ca3f85f23f75fc23adfcf150cc5.addTo(feature_group_127bd602cf9ed5a927e6e385ba64d126);
        
    
        function geo_json_f4be790f5370adde0a82ead19c5e3fac_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;color&quot;: &quot;#8c564b&quot;, &quot;fillOpacity&quot;: 0, &quot;weight&quot;: 2};
            }
        }

        function geo_json_f4be790f5370adde0a82ead19c5e3fac_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_f4be790f5370adde0a82ead19c5e3fac = L.geoJson(null, {
                onEachFeature: geo_json_f4be790f5370adde0a82ead19c5e3fac_onEachFeature,
            
                style: geo_json_f4be790f5370adde0a82ead19c5e3fac_styler,
            ...{
}
        });

        function geo_json_f4be790f5370adde0a82ead19c5e3fac_add (data) {
            geo_json_f4be790f5370adde0a82ead19c5e3fac
                .addData(data);
        }
            geo_json_f4be790f5370adde0a82ead19c5e3fac_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[[-120.1601333618164, 35.52039337158203], [-120.95423126220703, 34.905784606933594], [-120.46385955810547, 34.27220153808594], [-119.66976165771484, 34.886810302734375], [-120.1601333618164, 35.52039337158203]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_f4be790f5370adde0a82ead19c5e3fac.bindTooltip(
                `<div>
                     
            <b> EMITL2ARFL Granule-ID:</b> EMIT_L2A_RFL_001_20230808T173854_2322012_006<br>
            <b> EMITL2ARFL BeginningDateTime: </b> 2023-08-08 17:38:54+00:00<br>
            
                 </div>`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            geo_json_f4be790f5370adde0a82ead19c5e3fac.addTo(feature_group_127bd602cf9ed5a927e6e385ba64d126);
        
    
            var feature_group_2b891cf12dd1c1d50c3b0a4a1093c5a5 = L.featureGroup(
                {
}
            );
        
    
        function geo_json_7283aa0daaac3add6a66b1f8dc1a6a43_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;color&quot;: &quot;#c49c94&quot;, &quot;fillOpacity&quot;: 0, &quot;weight&quot;: 2};
            }
        }

        function geo_json_7283aa0daaac3add6a66b1f8dc1a6a43_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_7283aa0daaac3add6a66b1f8dc1a6a43 = L.geoJson(null, {
                onEachFeature: geo_json_7283aa0daaac3add6a66b1f8dc1a6a43_onEachFeature,
            
                style: geo_json_7283aa0daaac3add6a66b1f8dc1a6a43_styler,
            ...{
}
        });

        function geo_json_7283aa0daaac3add6a66b1f8dc1a6a43_add (data) {
            geo_json_7283aa0daaac3add6a66b1f8dc1a6a43
                .addData(data);
        }
            geo_json_7283aa0daaac3add6a66b1f8dc1a6a43_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[[-119.59844380403435, 34.20718855068355], [-119.59844380403435, 35.223132916637724], [-120.82892726886365, 35.223132916637724], [-120.82892726886365, 34.20718855068355], [-119.59844380403435, 34.20718855068355]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_7283aa0daaac3add6a66b1f8dc1a6a43.bindTooltip(
                `<div>
                     
        <b>ECO_L2T_LSTE Granule-ID: </b> ECOv002_L2T_LSTE_29576_005_10SGD_20230923T232104_0712_02<br>
        <b>ECO_L2T_LSTE BeginningDateTime: </b> 2023-09-23 23:21:04.439000+00:00<br>
        
                 </div>`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            geo_json_7283aa0daaac3add6a66b1f8dc1a6a43.addTo(feature_group_2b891cf12dd1c1d50c3b0a4a1093c5a5);
        
    
            var image_overlay_e6d047cc9988556e912c2766ff592503 = L.imageOverlay(
                &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_29576_005_10SGD_20230923T232104_0712_02/ECOv002_L2T_LSTE_29576_005_10SGD_20230923T232104_0712_02.png&quot;,
                [[34.20718855068355, -120.82892726886365], [35.223132916637724, -119.59844380403435]],
                {
  &quot;opacity&quot;: 0.75,
  &quot;zindex&quot;: 1,
}
            );
        
    
            image_overlay_e6d047cc9988556e912c2766ff592503.addTo(feature_group_2b891cf12dd1c1d50c3b0a4a1093c5a5);
        
    
        function geo_json_8a8b6b230dfe36ed5733943514626e67_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;color&quot;: &quot;#c49c94&quot;, &quot;fillOpacity&quot;: 0, &quot;weight&quot;: 2};
            }
        }

        function geo_json_8a8b6b230dfe36ed5733943514626e67_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_8a8b6b230dfe36ed5733943514626e67 = L.geoJson(null, {
                onEachFeature: geo_json_8a8b6b230dfe36ed5733943514626e67_onEachFeature,
            
                style: geo_json_8a8b6b230dfe36ed5733943514626e67_styler,
            ...{
}
        });

        function geo_json_8a8b6b230dfe36ed5733943514626e67_add (data) {
            geo_json_8a8b6b230dfe36ed5733943514626e67
                .addData(data);
        }
            geo_json_8a8b6b230dfe36ed5733943514626e67_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[[-120.529296875, 35.29765319824219], [-121.32658386230469, 34.681610107421875], [-120.83718872070312, 34.04823303222656], [-120.03990173339844, 34.664276123046875], [-120.529296875, 35.29765319824219]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_8a8b6b230dfe36ed5733943514626e67.bindTooltip(
                `<div>
                     
            <b> EMITL2ARFL Granule-ID:</b> EMIT_L2A_RFL_001_20230923T232101_2326615_002<br>
            <b> EMITL2ARFL BeginningDateTime: </b> 2023-09-23 23:21:01+00:00<br>
            
                 </div>`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            geo_json_8a8b6b230dfe36ed5733943514626e67.addTo(feature_group_2b891cf12dd1c1d50c3b0a4a1093c5a5);
        
    
        function geo_json_85f8569f300036dfe38da2a74e79627d_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;color&quot;: &quot;#c49c94&quot;, &quot;fillOpacity&quot;: 0, &quot;weight&quot;: 2};
            }
        }

        function geo_json_85f8569f300036dfe38da2a74e79627d_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_85f8569f300036dfe38da2a74e79627d = L.geoJson(null, {
                onEachFeature: geo_json_85f8569f300036dfe38da2a74e79627d_onEachFeature,
            
                style: geo_json_85f8569f300036dfe38da2a74e79627d_styler,
            ...{
}
        });

        function geo_json_85f8569f300036dfe38da2a74e79627d_add (data) {
            geo_json_85f8569f300036dfe38da2a74e79627d
                .addData(data);
        }
            geo_json_85f8569f300036dfe38da2a74e79627d_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[[-119.51744079589844, 36.0649299621582], [-120.67430114746094, 35.19106674194336], [-120.19021606445312, 34.55021286010742], [-119.03335571289062, 35.424076080322266], [-119.51744079589844, 36.0649299621582]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_85f8569f300036dfe38da2a74e79627d.bindTooltip(
                `<div>
                     
            <b> EMITL2ARFL Granule-ID:</b> EMIT_L2A_RFL_001_20230923T232113_2326615_003<br>
            <b> EMITL2ARFL BeginningDateTime: </b> 2023-09-23 23:21:13+00:00<br>
            
                 </div>`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            geo_json_85f8569f300036dfe38da2a74e79627d.addTo(feature_group_2b891cf12dd1c1d50c3b0a4a1093c5a5);
        
    
            var feature_group_dd765e1021f3fd27cf360728871b8d3f = L.featureGroup(
                {
}
            );
        
    
        function geo_json_d539966a219d26a999359b4f89bd388a_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;color&quot;: &quot;#e377c2&quot;, &quot;fillOpacity&quot;: 0, &quot;weight&quot;: 2};
            }
        }

        function geo_json_d539966a219d26a999359b4f89bd388a_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_d539966a219d26a999359b4f89bd388a = L.geoJson(null, {
                onEachFeature: geo_json_d539966a219d26a999359b4f89bd388a_onEachFeature,
            
                style: geo_json_d539966a219d26a999359b4f89bd388a_styler,
            ...{
}
        });

        function geo_json_d539966a219d26a999359b4f89bd388a_add (data) {
            geo_json_d539966a219d26a999359b4f89bd388a
                .addData(data);
        }
            geo_json_d539966a219d26a999359b4f89bd388a_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[[-119.59844380403435, 34.20718855068355], [-119.59844380403435, 35.223132916637724], [-120.82892726886365, 35.223132916637724], [-120.82892726886365, 34.20718855068355], [-119.59844380403435, 34.20718855068355]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_d539966a219d26a999359b4f89bd388a.bindTooltip(
                `<div>
                     
        <b>ECO_L2T_LSTE Granule-ID: </b> ECOv002_L2T_LSTE_29901_007_10SGD_20231014T223936_0712_02<br>
        <b>ECO_L2T_LSTE BeginningDateTime: </b> 2023-10-14 22:39:36.895000+00:00<br>
        
                 </div>`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            geo_json_d539966a219d26a999359b4f89bd388a.addTo(feature_group_dd765e1021f3fd27cf360728871b8d3f);
        
    
            var image_overlay_843de310c5388853bebf7ed72c78a306 = L.imageOverlay(
                &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_29901_007_10SGD_20231014T223936_0712_02/ECOv002_L2T_LSTE_29901_007_10SGD_20231014T223936_0712_02.png&quot;,
                [[34.20718855068355, -120.82892726886365], [35.223132916637724, -119.59844380403435]],
                {
  &quot;opacity&quot;: 0.75,
  &quot;zindex&quot;: 1,
}
            );
        
    
            image_overlay_843de310c5388853bebf7ed72c78a306.addTo(feature_group_dd765e1021f3fd27cf360728871b8d3f);
        
    
        function geo_json_db8cde7993199418eb95ca17dd48d363_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;color&quot;: &quot;#e377c2&quot;, &quot;fillOpacity&quot;: 0, &quot;weight&quot;: 2};
            }
        }

        function geo_json_db8cde7993199418eb95ca17dd48d363_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_db8cde7993199418eb95ca17dd48d363 = L.geoJson(null, {
                onEachFeature: geo_json_db8cde7993199418eb95ca17dd48d363_onEachFeature,
            
                style: geo_json_db8cde7993199418eb95ca17dd48d363_styler,
            ...{
}
        });

        function geo_json_db8cde7993199418eb95ca17dd48d363_add (data) {
            geo_json_db8cde7993199418eb95ca17dd48d363
                .addData(data);
        }
            geo_json_db8cde7993199418eb95ca17dd48d363_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[[-120.79351806640625, 35.15521240234375], [-121.28294372558594, 34.53301239013672], [-120.58601379394531, 33.98479461669922], [-120.09658813476562, 34.60699462890625], [-120.79351806640625, 35.15521240234375]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_db8cde7993199418eb95ca17dd48d363.bindTooltip(
                `<div>
                     
            <b> EMITL2ARFL Granule-ID:</b> EMIT_L2A_RFL_001_20231014T224006_2328715_002<br>
            <b> EMITL2ARFL BeginningDateTime: </b> 2023-10-14 22:40:06+00:00<br>
            
                 </div>`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            geo_json_db8cde7993199418eb95ca17dd48d363.addTo(feature_group_dd765e1021f3fd27cf360728871b8d3f);
        
    
            var feature_group_01ac2fcca25407b373ea230812d6fa23 = L.featureGroup(
                {
}
            );
        
    
        function geo_json_f4b73fb76af8648bef22a3d35447d705_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;color&quot;: &quot;#f7b6d2&quot;, &quot;fillOpacity&quot;: 0, &quot;weight&quot;: 2};
            }
        }

        function geo_json_f4b73fb76af8648bef22a3d35447d705_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_f4b73fb76af8648bef22a3d35447d705 = L.geoJson(null, {
                onEachFeature: geo_json_f4b73fb76af8648bef22a3d35447d705_onEachFeature,
            
                style: geo_json_f4b73fb76af8648bef22a3d35447d705_styler,
            ...{
}
        });

        function geo_json_f4b73fb76af8648bef22a3d35447d705_add (data) {
            geo_json_f4b73fb76af8648bef22a3d35447d705
                .addData(data);
        }
            geo_json_f4b73fb76af8648bef22a3d35447d705_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[[-119.59844380403435, 34.20718855068355], [-119.59844380403435, 35.223132916637724], [-120.82892726886365, 35.223132916637724], [-120.82892726886365, 34.20718855068355], [-119.59844380403435, 34.20718855068355]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_f4b73fb76af8648bef22a3d35447d705.bindTooltip(
                `<div>
                     
        <b>ECO_L2T_LSTE Granule-ID: </b> ECOv002_L2T_LSTE_29962_012_10SGD_20231018T210208_0712_02<br>
        <b>ECO_L2T_LSTE BeginningDateTime: </b> 2023-10-18 21:02:08.141000+00:00<br>
        
                 </div>`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            geo_json_f4b73fb76af8648bef22a3d35447d705.addTo(feature_group_01ac2fcca25407b373ea230812d6fa23);
        
    
            var image_overlay_d1fd0a522096a1e8c34fd66a9f900fa3 = L.imageOverlay(
                &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_29962_012_10SGD_20231018T210208_0712_02/ECOv002_L2T_LSTE_29962_012_10SGD_20231018T210208_0712_02.png&quot;,
                [[34.20718855068355, -120.82892726886365], [35.223132916637724, -119.59844380403435]],
                {
  &quot;opacity&quot;: 0.75,
  &quot;zindex&quot;: 1,
}
            );
        
    
            image_overlay_d1fd0a522096a1e8c34fd66a9f900fa3.addTo(feature_group_01ac2fcca25407b373ea230812d6fa23);
        
    
        function geo_json_9bbb7a8f429ebfe9da79a79f7befd73a_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;color&quot;: &quot;#f7b6d2&quot;, &quot;fillOpacity&quot;: 0, &quot;weight&quot;: 2};
            }
        }

        function geo_json_9bbb7a8f429ebfe9da79a79f7befd73a_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_9bbb7a8f429ebfe9da79a79f7befd73a = L.geoJson(null, {
                onEachFeature: geo_json_9bbb7a8f429ebfe9da79a79f7befd73a_onEachFeature,
            
                style: geo_json_9bbb7a8f429ebfe9da79a79f7befd73a_styler,
            ...{
}
        });

        function geo_json_9bbb7a8f429ebfe9da79a79f7befd73a_add (data) {
            geo_json_9bbb7a8f429ebfe9da79a79f7befd73a
                .addData(data);
        }
            geo_json_9bbb7a8f429ebfe9da79a79f7befd73a_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[[-120.05732727050781, 35.391700744628906], [-120.54254150390625, 34.768699645996094], [-119.83940124511719, 34.2210693359375], [-119.35418701171875, 34.84407043457031], [-120.05732727050781, 35.391700744628906]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_9bbb7a8f429ebfe9da79a79f7befd73a.bindTooltip(
                `<div>
                     
            <b> EMITL2ARFL Granule-ID:</b> EMIT_L2A_RFL_001_20231018T210217_2329114_006<br>
            <b> EMITL2ARFL BeginningDateTime: </b> 2023-10-18 21:02:17+00:00<br>
            
                 </div>`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            geo_json_9bbb7a8f429ebfe9da79a79f7befd73a.addTo(feature_group_01ac2fcca25407b373ea230812d6fa23);
        
    
        function geo_json_503f245b4d5fc8a40b4305e307ff214b_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;color&quot;: &quot;#f7b6d2&quot;, &quot;fillOpacity&quot;: 0, &quot;weight&quot;: 2};
            }
        }

        function geo_json_503f245b4d5fc8a40b4305e307ff214b_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_503f245b4d5fc8a40b4305e307ff214b = L.geoJson(null, {
                onEachFeature: geo_json_503f245b4d5fc8a40b4305e307ff214b_onEachFeature,
            
                style: geo_json_503f245b4d5fc8a40b4305e307ff214b_styler,
            ...{
}
        });

        function geo_json_503f245b4d5fc8a40b4305e307ff214b_add (data) {
            geo_json_503f245b4d5fc8a40b4305e307ff214b
                .addData(data);
        }
            geo_json_503f245b4d5fc8a40b4305e307ff214b_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[[-120.72254180908203, 35.896907806396484], [-121.20394134521484, 35.2675666809082], [-120.4900131225586, 34.72146224975586], [-120.00861358642578, 35.35080337524414], [-120.72254180908203, 35.896907806396484]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_503f245b4d5fc8a40b4305e307ff214b.bindTooltip(
                `<div>
                     
            <b> EMITL2ARFL Granule-ID:</b> EMIT_L2A_RFL_001_20231018T210205_2329114_005<br>
            <b> EMITL2ARFL BeginningDateTime: </b> 2023-10-18 21:02:05+00:00<br>
            
                 </div>`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            geo_json_503f245b4d5fc8a40b4305e307ff214b.addTo(feature_group_01ac2fcca25407b373ea230812d6fa23);
        
    
        function geo_json_d59306269a6696faf80693b4daceccda_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;fillOpacity&quot;: 0, &quot;weight&quot;: 2, &quot;width&quot;: 2};
            }
        }
        function geo_json_d59306269a6696faf80693b4daceccda_highlighter(feature) {
            switch(feature.id) {
                default:
                    return {&quot;fillOpacity&quot;: 0.75};
            }
        }
        function geo_json_d59306269a6696faf80693b4daceccda_pointToLayer(feature, latlng) {
            var opts = {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;#3388ff&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: true, &quot;fillColor&quot;: &quot;#3388ff&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;opacity&quot;: 1.0, &quot;radius&quot;: 2, &quot;stroke&quot;: true, &quot;weight&quot;: 3};
            
            let style = geo_json_d59306269a6696faf80693b4daceccda_styler(feature)
            Object.assign(opts, style)
            
            return new L.CircleMarker(latlng, opts)
        }

        function geo_json_d59306269a6696faf80693b4daceccda_onEachFeature(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    if(typeof e.target.setStyle === &quot;function&quot;){
                            geo_json_d59306269a6696faf80693b4daceccda.resetStyle(e.target);
                    }
                },
                mouseover: function(e) {
                    if(typeof e.target.setStyle === &quot;function&quot;){
                        const highlightStyle = geo_json_d59306269a6696faf80693b4daceccda_highlighter(e.target.feature)
                        e.target.setStyle(highlightStyle);
                    }
                },
            });
        };
        var geo_json_d59306269a6696faf80693b4daceccda = L.geoJson(null, {
                onEachFeature: geo_json_d59306269a6696faf80693b4daceccda_onEachFeature,
            
                style: geo_json_d59306269a6696faf80693b4daceccda_styler,
                pointToLayer: geo_json_d59306269a6696faf80693b4daceccda_pointToLayer,
            ...{
}
        });

        function geo_json_d59306269a6696faf80693b4daceccda_add (data) {
            geo_json_d59306269a6696faf80693b4daceccda
                .addData(data);
        }
            geo_json_d59306269a6696faf80693b4daceccda_add({&quot;bbox&quot;: [-120.499289029747, 34.4422979925537, -120.01175444547289, 34.743985733609556], &quot;features&quot;: [{&quot;bbox&quot;: [-120.07168830185367, 34.67874372675126, -120.01175444547289, 34.743985733609556], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-120.04041123986089, 34.74342268352134], [-120.04121889204112, 34.743735066665835], [-120.04233680955474, 34.743985733609556], [-120.04347866996883, 34.742743832848156], [-120.04466572607036, 34.7424755469407], [-120.0448866879965, 34.74191265779671], [-120.04532294168776, 34.74159883138454], [-120.04804960173333, 34.741930978842824], [-120.04882554857339, 34.74223480319798], [-120.04949820119256, 34.74213674742191], [-120.04993617368781, 34.74236084527639], [-120.05063226768779, 34.74246510413567], [-120.05084529371707, 34.74296515425221], [-120.05181991617927, 34.742292688494636], [-120.05248533194795, 34.74258310344906], [-120.05311871770458, 34.742205091313274], [-120.0537722979379, 34.7422376073561], [-120.05409711012827, 34.74194830623631], [-120.0543713797112, 34.74209128417946], [-120.05479918084599, 34.74210391650734], [-120.05579592922335, 34.741837342896304], [-120.05694257691489, 34.74214544480658], [-120.05741042037987, 34.74181489507682], [-120.05767271320745, 34.74132546754863], [-120.05754227015422, 34.740740878009824], [-120.05876345149959, 34.74069180836263], [-120.05917953489605, 34.74018712575532], [-120.0587615854979, 34.739770015724844], [-120.06043616892654, 34.73832197492165], [-120.06128451686234, 34.73743320382969], [-120.0633872937648, 34.73640466515508], [-120.0639059857869, 34.7363786768863], [-120.06403134870462, 34.73519616510308], [-120.06454804185732, 34.734541873380046], [-120.06744848879882, 34.733043732603065], [-120.070616303288, 34.72952389483826], [-120.07043959994115, 34.72724173490022], [-120.0711658556598, 34.72294007365655], [-120.07168830185367, 34.71997034050748], [-120.06802222094016, 34.71707138144172], [-120.0643838637534, 34.71556891113268], [-120.06181919501256, 34.71432727384942], [-120.06086869366344, 34.7146474924856], [-120.0601201043257, 34.7146055700268], [-120.05915143262852, 34.712156508207215], [-120.05914365552792, 34.71213594341261], [-120.0579297886696, 34.709929219916546], [-120.05770835562292, 34.70940385347888], [-120.05751031403676, 34.708753407845755], [-120.05739358464504, 34.707625117415304], [-120.05644763385853, 34.70594280996333], [-120.05643958520336, 34.70592877328525], [-120.05560802087543, 34.7041919156709], [-120.05554467210189, 34.70251089221562], [-120.05550630815135, 34.701492772768894], [-120.055461488798, 34.7005885983348], [-120.0554596736261, 34.7005550655234], [-120.0554039826769, 34.69948129063735], [-120.05538831873399, 34.698385230495944], [-120.05526178291916, 34.69616125098816], [-120.05517157722116, 34.694136196842145], [-120.05507940302671, 34.69206681413075], [-120.05507556891348, 34.691797549336464], [-120.05506238375865, 34.69087158829482], [-120.05516147749043, 34.69025048197192], [-120.05537367433509, 34.688920416937414], [-120.05477895715674, 34.687500193851115], [-120.05421030242205, 34.68614216540855], [-120.05437973139783, 34.683147158844996], [-120.05446824425277, 34.681582630902554], [-120.05427316208798, 34.68056492337604], [-120.05409520266919, 34.67963650372387], [-120.05409236336455, 34.67898649251284], [-120.05086593954367, 34.67894506251114], [-120.04735720219035, 34.67889985551723], [-120.0454382179078, 34.67887508968519], [-120.04296564515735, 34.67884313196442], [-120.03885718195134, 34.67878992264703], [-120.03882024814752, 34.67878944343524], [-120.038822553688, 34.67878278821947], [-120.03864999677779, 34.67878153792925], [-120.03857836007664, 34.67878101897387], [-120.0375931324717, 34.6787738631857], [-120.03344480724418, 34.67877083712449], [-120.0285350182976, 34.67874372675126], [-120.02766842116552, 34.67966056614673], [-120.02688127769018, 34.681520761856035], [-120.02565480881036, 34.686067202877275], [-120.02557636256647, 34.68749492328606], [-120.02540359502339, 34.69063897254925], [-120.02698181220869, 34.691998736361825], [-120.02707411605091, 34.704552662731395], [-120.02711070780717, 34.71876004647024], [-120.02728384103979, 34.719704576193706], [-120.02488659066623, 34.72151568825152], [-120.01860679260076, 34.72166938674092], [-120.01819018507503, 34.721863965265676], [-120.01794880316505, 34.72197670352912], [-120.0181373446802, 34.723016839560394], [-120.0181601976407, 34.72314289819512], [-120.01268426806213, 34.72738510493605], [-120.01248884292058, 34.72753649045302], [-120.01243858361981, 34.72813618399153], [-120.01175444547289, 34.729442988434734], [-120.01960069899336, 34.735545259144054], [-120.02895215128893, 34.742804281371775], [-120.02912625895728, 34.742742063707205], [-120.02981138599067, 34.7427657274346], [-120.03090839289258, 34.74269810021536], [-120.03202999082784, 34.74302707415178], [-120.03311348576628, 34.74237415359347], [-120.03333602264894, 34.74317636970352], [-120.03380537304476, 34.74313736951284], [-120.03475265629952, 34.743324641364374], [-120.03595506984117, 34.74345547658775], [-120.03733930865612, 34.742861728096315], [-120.04041123986089, 34.74342268352134]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;properties&quot;: {&quot;Acreage&quot;: 5874.21, &quot;Name&quot;: &quot;Sedgwick Reserve&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-120.499289029747, 34.4422979925537, -120.357702146634, 34.574184013493], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-120.473673757175, 34.5698725745769], [-120.474268898347, 34.5700040405158], [-120.474600420056, 34.5701232448023], [-120.474945113745, 34.5701935127921], [-120.475165291462, 34.5701956555251], [-120.475829839562, 34.5703522163797], [-120.476126837274, 34.570484771851], [-120.476367652784, 34.5705644460913], [-120.476767257077, 34.5707922837598], [-120.476956580558, 34.570862527191], [-120.47733898406, 34.5709833977747], [-120.477599964183, 34.5710588660795], [-120.47817850394, 34.5712261617217], [-120.481738523721, 34.5722400097051], [-120.486565296247, 34.5739613611966], [-120.487336678587, 34.5741731203603], [-120.487458438702, 34.574184013493], [-120.487792444198, 34.5688007459224], [-120.488221077539, 34.5644728137622], [-120.488428943236, 34.5614911377697], [-120.489191659322, 34.5505070706799], [-120.489267306881, 34.5494175061616], [-120.48991932846, 34.5400250245606], [-120.49155701063, 34.5153077705207], [-120.490914956929, 34.5153470831478], [-120.490858485216, 34.515352131213], [-120.490409558688, 34.5153020000506], [-120.490331954646, 34.514724729607], [-120.490604744291, 34.5144394345523], [-120.491028935108, 34.5144253018181], [-120.49161675957, 34.514405716414], [-120.491877588824, 34.5117997226576], [-120.492389392466, 34.5116813855763], [-120.492404682661, 34.5114140472664], [-120.492268448668, 34.5107907923188], [-120.493188821525, 34.5110243541547], [-120.493970350972, 34.5109179461089], [-120.495068521249, 34.5108643502897], [-120.495038659034, 34.5115200674382], [-120.495039163031, 34.5120929218963], [-120.495984242865, 34.5125697378642], [-120.498181346587, 34.5130307621533], [-120.498123390052, 34.5123369936108], [-120.498095764042, 34.5120062836795], [-120.497985803758, 34.5106899533691], [-120.498090845087, 34.5106889410481], [-120.498303942318, 34.5105477020061], [-120.498625059495, 34.5103348662614], [-120.498762182787, 34.5102439802922], [-120.498871329196, 34.510171638186], [-120.498894553595, 34.5100221260595], [-120.498923852075, 34.509873347969], [-120.498959195165, 34.5097254716365], [-120.499000538146, 34.5095786657504], [-120.499059573485, 34.509374940859], [-120.499147206376, 34.5090423929844], [-120.499202559112, 34.508820276959], [-120.499239734895, 34.5085488741828], [-120.499250794996, 34.5083486531177], [-120.499254083819, 34.5081482414938], [-120.499249597285, 34.507947844773], [-120.499237340047, 34.5077476710807], [-120.499217325463, 34.5075479267013], [-120.499189573417, 34.507348816988], [-120.499154112519, 34.5071505481559], [-120.499289029747, 34.5071287386186], [-120.499233464986, 34.5069405231472], [-120.499221872857, 34.5069012600297], [-120.499063837923, 34.5064646326826], [-120.498932996477, 34.5061570457899], [-120.498818408853, 34.5058720119715], [-120.498623315983, 34.5054732140658], [-120.498181088135, 34.5047088104681], [-120.498023587755, 34.5044365643444], [-120.497580505627, 34.503737414272], [-120.496127891706, 34.501135679845], [-120.496240754909, 34.5009613084681], [-120.498011374504, 34.5005639046725], [-120.496306010257, 34.4955043966029], [-120.495431360006, 34.4947586359758], [-120.49356932046, 34.4945977079514], [-120.490977259782, 34.4920943138676], [-120.490423013336, 34.4903539674059], [-120.490172553336, 34.4895674891384], [-120.489164684652, 34.4881510121425], [-120.488200969833, 34.4870440781173], [-120.4853270001, 34.4847528928572], [-120.482819733794, 34.4836013402195], [-120.481681765562, 34.4824480217754], [-120.480701626145, 34.481628318715], [-120.478441632665, 34.4797381663922], [-120.47555283623, 34.4736303146603], [-120.474105463343, 34.4681500043105], [-120.473110842247, 34.4582269564998], [-120.473291886157, 34.4579641923204], [-120.473033475491, 34.4576316197362], [-120.472465884553, 34.454125694944], [-120.471356238116, 34.4532217783727], [-120.471167899797, 34.4530029200902], [-120.471109787149, 34.4528695275691], [-120.471051009323, 34.4527137192015], [-120.470927808689, 34.4523696044615], [-120.470671353503, 34.4520348496189], [-120.470471318945, 34.4516461693752], [-120.470385940596, 34.4508530206709], [-120.470123969058, 34.4504283806063], [-120.470758833753, 34.4500416825379], [-120.471181960124, 34.4497839510985], [-120.471229059664, 34.4495184686253], [-120.471391697591, 34.449055697612], [-120.471832931443, 34.4488269769211], [-120.471729365609, 34.4486278295873], [-120.471769946125, 34.4482690466694], [-120.471601486969, 34.4482642285405], [-120.471060999993, 34.4485040526842], [-120.470621018159, 34.4483090603018], [-120.470211336098, 34.4489511927851], [-120.470026476405, 34.4492427757797], [-120.469515037907, 34.4494160416012], [-120.469387911847, 34.4496920110722], [-120.468461511874, 34.4498741956832], [-120.46792536886, 34.4492790586956], [-120.467628986712, 34.4489500597483], [-120.466905240826, 34.4492565098178], [-120.465943966248, 34.4496195672036], [-120.464655193256, 34.4493073949995], [-120.463223894796, 34.4489163034687], [-120.462337772009, 34.448543633795], [-120.462042398192, 34.4482141712519], [-120.461744849481, 34.4478822790921], [-120.460304664703, 34.4478302116895], [-120.459417799422, 34.4474569508048], [-120.458732212012, 34.4468598517634], [-120.458633656842, 34.4466090206738], [-120.458568737608, 34.4465524767442], [-120.458539199729, 34.446368614307], [-120.458348529198, 34.4458833332416], [-120.458437544011, 34.4457358718019], [-120.458793232881, 34.4451463663297], [-120.458580378696, 34.4446115419742], [-120.457432245138, 34.4448826048084], [-120.456587131457, 34.4444478258254], [-120.456509992418, 34.4436265031584], [-120.456251349387, 34.4433206638602], [-120.454226425466, 34.4430624112946], [-120.452653913344, 34.4422979925537], [-120.451946239776, 34.4428771121843], [-120.452723807357, 34.4439614575846], [-120.452662645674, 34.4446677630137], [-120.45299172018, 34.4452437279766], [-120.452378457834, 34.4463626224092], [-120.451337168761, 34.4473187915795], [-120.450815849917, 34.4475094506155], [-120.449452910472, 34.4480707744484], [-120.447853024737, 34.4485992714863], [-120.44651085367, 34.4489421125084], [-120.446197814568, 34.4490987913058], [-120.445933656964, 34.4493747732761], [-120.445690728059, 34.4497555826001], [-120.445664821648, 34.4501094624365], [-120.445527423023, 34.4503753710323], [-120.445067684528, 34.4507906225475], [-120.444091370672, 34.4512313167406], [-120.442577243774, 34.451592613765], [-120.441686382297, 34.4516926907227], [-120.441166637934, 34.4517131747041], [-120.439587673205, 34.4515143770564], [-120.438752019035, 34.4514910820401], [-120.438144977525, 34.4514230890755], [-120.437709009405, 34.4514118015094], [-120.437216386959, 34.4515319659313], [-120.435667778514, 34.4515430183671], [-120.433915709264, 34.4512173076069], [-120.433511977675, 34.4512159591047], [-120.432471559705, 34.4510758598459], [-120.431694041238, 34.4509711547898], [-120.430274981666, 34.4506354702667], [-120.429709877218, 34.4505698414206], [-120.427587364016, 34.4503233179728], [-120.426876996484, 34.4501715463065], [-120.426573549182, 34.4501067116115], [-120.426252977703, 34.4500382182339], [-120.426069043101, 34.4499828397236], [-120.425305471374, 34.4498825737903], [-120.424686149467, 34.4498427536747], [-120.424093665868, 34.449750436401], [-120.42369541987, 34.4497960027391], [-120.422983491614, 34.4497472263523], [-120.422578813789, 34.4498377637825], [-120.422318659693, 34.4498616485717], [-120.42166000293, 34.449948737694], [-120.421170073867, 34.4500761754989], [-120.420347271565, 34.4504210764452], [-120.419873540428, 34.4507205520857], [-120.419606490998, 34.4509742238109], [-120.419461252804, 34.4512224611556], [-120.41938000696, 34.451458347596], [-120.419247384212, 34.4517429451309], [-120.419092122298, 34.4520046495873], [-120.418732145913, 34.4523178169448], [-120.418551892974, 34.4526816394167], [-120.418130582665, 34.4530465606527], [-120.417327488518, 34.453337695674], [-120.417002568518, 34.4533290902482], [-120.416815715888, 34.4534425426647], [-120.416424365124, 34.4535355947168], [-120.416421240814, 34.4535684660067], [-120.416386822882, 34.4539302025903], [-120.415253324658, 34.4658423090285], [-120.415203159248, 34.4663696083867], [-120.414631607579, 34.4723787160223], [-120.414212857113, 34.4767808450416], [-120.413944433307, 34.479602343388], [-120.413572918172, 34.4835074657814], [-120.412758369169, 34.4920677898374], [-120.412631823749, 34.4933975958215], [-120.407916577951, 34.4935100590974], [-120.402751700365, 34.4936316954858], [-120.401901835879, 34.4936516876257], [-120.397238699848, 34.493748887132], [-120.39273691307, 34.4938674321066], [-120.392352081229, 34.4938750793525], [-120.384896714585, 34.4940327862872], [-120.379993579422, 34.4941362584553], [-120.377839650906, 34.4941844453204], [-120.375991353319, 34.4952713912298], [-120.367965449605, 34.4999906114074], [-120.36774377502, 34.5001209379492], [-120.367258680304, 34.5001285638213], [-120.359126424738, 34.5002522419618], [-120.357702146634, 34.5032125420973], [-120.361217526605, 34.5032709808622], [-120.362496951952, 34.5049436060675], [-120.363440873389, 34.5054831944267], [-120.364018740336, 34.5077227097778], [-120.36332904295, 34.5097295561369], [-120.365031422912, 34.512252712451], [-120.364823694436, 34.5132242917346], [-120.365451937221, 34.5139480412655], [-120.365912887008, 34.5150702730013], [-120.366075878921, 34.5151302783262], [-120.367480358202, 34.5152657277682], [-120.372391160666, 34.5151371671737], [-120.374779134133, 34.5169819151248], [-120.375285265406, 34.5190637237547], [-120.375991611003, 34.5200795699009], [-120.376052771394, 34.5201675308613], [-120.375991612848, 34.520312157324], [-120.375825956212, 34.5207038871999], [-120.375371804881, 34.521710699293], [-120.376007023441, 34.5220722562213], [-120.376074413575, 34.5220940649509], [-120.379466799792, 34.5231916669648], [-120.381006658897, 34.5232676428505], [-120.38092307914, 34.5223796673316], [-120.381034098714, 34.5224374368346], [-120.381499443479, 34.5224710672393], [-120.382046494517, 34.5225665382582], [-120.382515496285, 34.5227091531803], [-120.383152184578, 34.5231667974061], [-120.383582357008, 34.5229531980577], [-120.383939000798, 34.5230580496765], [-120.384237198508, 34.5236258124823], [-120.38483672678, 34.523690302715], [-120.385028538973, 34.5237824405921], [-120.385133055655, 34.5243014906451], [-120.385260356192, 34.5246971293101], [-120.385664797403, 34.5247741292164], [-120.385915594467, 34.5250083704182], [-120.386574598676, 34.5256794109736], [-120.387111529327, 34.5257416314091], [-120.38773024861, 34.5260540412035], [-120.388022004063, 34.5262971539976], [-120.388676419447, 34.5264054084611], [-120.389529073335, 34.5265464525374], [-120.390504185866, 34.526640802745], [-120.391009207089, 34.5268431739642], [-120.391005721786, 34.5267264247092], [-120.391437325341, 34.5266492011179], [-120.391967696094, 34.5267829930735], [-120.393598177772, 34.5279179871388], [-120.394278999323, 34.5281045152003], [-120.395653188293, 34.5280785241694], [-120.396858599886, 34.5283576586532], [-120.397527577687, 34.5283971605779], [-120.398163868095, 34.5282842450376], [-120.398358239519, 34.5275018086042], [-120.399457794637, 34.5296274952515], [-120.402517701634, 34.5306632925699], [-120.404956161772, 34.531969355796], [-120.40789835488, 34.5352810789159], [-120.410703648928, 34.5371664852474], [-120.409762714298, 34.5407936959614], [-120.407431728691, 34.5416454409844], [-120.407227166948, 34.5419090188626], [-120.406306210521, 34.543079851039], [-120.406944456954, 34.5441272876299], [-120.407522149604, 34.5456565779677], [-120.406954902755, 34.5465708190505], [-120.408105884287, 34.5471715234752], [-120.412261839527, 34.5465707765058], [-120.413848941698, 34.5465817557597], [-120.416997571025, 34.5466034809769], [-120.420464462939, 34.5466273070577], [-120.423568318481, 34.5453059371054], [-120.425671437831, 34.5457077935336], [-120.429380659739, 34.5470565617633], [-120.430824990401, 34.5478858249855], [-120.432308362638, 34.5487374678597], [-120.430068074025, 34.5557487591411], [-120.430279946032, 34.5590111176329], [-120.432859692109, 34.5591264238944], [-120.434094197464, 34.5597121193747], [-120.43569484508, 34.559997118885], [-120.438418856458, 34.5594295723898], [-120.439090381371, 34.5593398374361], [-120.440824185975, 34.5596621084705], [-120.441772170159, 34.5599314010404], [-120.44634239648, 34.5617714738772], [-120.449838762706, 34.5627923451978], [-120.450674169161, 34.5631521959599], [-120.451140845572, 34.5635020140722], [-120.452148375883, 34.564463817018], [-120.455352153541, 34.5644374351165], [-120.456989566593, 34.5644071417117], [-120.458123596772, 34.5653783565248], [-120.459283206652, 34.565609708385], [-120.459998574452, 34.5669259718166], [-120.460969801901, 34.5675287882282], [-120.461670716271, 34.5676146889461], [-120.46336962219, 34.568922931321], [-120.465191204463, 34.570325572233], [-120.465566315188, 34.5702263782914], [-120.466455319658, 34.5699912928409], [-120.467503319101, 34.5699493585098], [-120.46821518151, 34.5699452256349], [-120.469612717659, 34.5698961713165], [-120.470564669519, 34.5698064646454], [-120.470932506464, 34.569834087755], [-120.471305184293, 34.5698172428706], [-120.47175025689, 34.569738163534], [-120.472009329261, 34.5697256920336], [-120.472274479659, 34.569749151624], [-120.473033797364, 34.5699056034398], [-120.473321205161, 34.5698689443084], [-120.473673757175, 34.5698725745769]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;1&quot;, &quot;properties&quot;: {&quot;Acreage&quot;: 24458.6153971, &quot;Name&quot;: &quot;Dangermond Preserve&quot;}, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
    geo_json_d59306269a6696faf80693b4daceccda.bindTooltip(
    function(layer){
    let div = L.DomUtil.create('div');
    
    let handleObject = feature=>typeof(feature)=='object' ? JSON.stringify(feature) : feature;
    let fields = [&quot;Name&quot;, &quot;Acreage&quot;];
    let aliases = [&quot;Name&quot;, &quot;Acreage&quot;];
    let table = '<table>' +
        String(
        fields.map(
        (v,i)=>
        `<tr>
            <th>${aliases[i]}</th>
            
            <td>${handleObject(layer.feature.properties[v])}</td>
        </tr>`).join(''))
    +'</table>';
    div.innerHTML=table;
    
    return div
    }
    ,{
  &quot;sticky&quot;: true,
  &quot;className&quot;: &quot;foliumtooltip&quot;,
});
                     
    
            geo_json_d59306269a6696faf80693b4daceccda.addTo(map_a4cca34007a35bb2a31a7e810e6d6500);
        
    
        function geo_json_16034628dfae61b32f6532de4f1e23b7_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;fill&quot;: false, &quot;weight&quot;: 2};
            }
        }

        function geo_json_16034628dfae61b32f6532de4f1e23b7_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_16034628dfae61b32f6532de4f1e23b7 = L.geoJson(null, {
                onEachFeature: geo_json_16034628dfae61b32f6532de4f1e23b7_onEachFeature,
            
                style: geo_json_16034628dfae61b32f6532de4f1e23b7_styler,
            ...{
}
        });

        function geo_json_16034628dfae61b32f6532de4f1e23b7_add (data) {
            geo_json_16034628dfae61b32f6532de4f1e23b7
                .addData(data);
        }
            geo_json_16034628dfae61b32f6532de4f1e23b7_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[[-120.499289029747, 34.4422979925537], [-120.01175444547289, 34.4422979925537], [-120.01175444547289, 34.743985733609556], [-120.499289029747, 34.743985733609556], [-120.499289029747, 34.4422979925537]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_16034628dfae61b32f6532de4f1e23b7.addTo(map_a4cca34007a35bb2a31a7e810e6d6500);
        
    
            map_a4cca34007a35bb2a31a7e810e6d6500.fitBounds(
                [[34.4422979925537, -120.499289029747], [34.743985733609556, -120.01175444547289]],
                {}
            );
        
    
            var layer_control_fdbeab5e6fd1fa5376651a844f961972_layers = {
                base_layers : {
                    &quot;https://mt1.google.com/vt/lyrs=y\u0026x={x}\u0026y={y}\u0026z={z}&quot; : tile_layer_fd4845f1e1ea6fe72bef84e5bd514253,
                },
                overlays :  {
                    &quot;ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01&quot; : feature_group_328fcb6311388d8026a8a54fd3e7615b,
                    &quot;ECOv002_L2T_LSTE_26223_012_10SGD_20230219T202943_0710_01&quot; : feature_group_cc894f68bccfd3687e61670fac60ccff,
                    &quot;ECOv002_L2T_LSTE_26799_003_10SGD_20230328T221239_0711_02&quot; : feature_group_7dcf14a57eaed6c097dba36da3464e78,
                    &quot;ECOv002_L2T_LSTE_26860_001_10SGD_20230401T203733_0712_02&quot; : feature_group_fcd37caf23a3627af63894248d7a2921,
                    &quot;ECOv002_L2T_LSTE_26921_001_10SGD_20230405T190258_0712_02&quot; : feature_group_c8ccedb22bb8c09db154e2439db6f7b9,
                    &quot;ECOv002_L2T_LSTE_27185_010_10SGD_20230422T195836_0710_01&quot; : feature_group_d72a9e756df140f8c831606d4989cb2b,
                    &quot;ECOv002_L2T_LSTE_27745_005_10SGD_20230528T220401_0711_02&quot; : feature_group_1fcc568049974886129bd9ef6f4a6b17,
                    &quot;ECOv002_L2T_LSTE_27806_005_10SGD_20230601T202619_0711_02&quot; : feature_group_e432c849888a6ea287876fefdd88f3f8,
                    &quot;ECOv002_L2T_LSTE_28238_012_10SGD_20230629T170416_0711_02&quot; : feature_group_1bb186c17f2aeb45a5ee176d2b0fcc18,
                    &quot;ECOv002_L2T_LSTE_28859_005_10SGD_20230808T173811_0712_02&quot; : feature_group_8938d996c8c66b588603f109a39109d7,
                    &quot;ECOv002_L2T_LSTE_28859_006_10SGD_20230808T173903_0712_02&quot; : feature_group_127bd602cf9ed5a927e6e385ba64d126,
                    &quot;ECOv002_L2T_LSTE_29576_005_10SGD_20230923T232104_0712_02&quot; : feature_group_2b891cf12dd1c1d50c3b0a4a1093c5a5,
                    &quot;ECOv002_L2T_LSTE_29901_007_10SGD_20231014T223936_0712_02&quot; : feature_group_dd765e1021f3fd27cf360728871b8d3f,
                    &quot;ECOv002_L2T_LSTE_29962_012_10SGD_20231018T210208_0712_02&quot; : feature_group_01ac2fcca25407b373ea230812d6fa23,
                    &quot;Region of Interest&quot; : geo_json_d59306269a6696faf80693b4daceccda,
                    &quot;bounding_box&quot; : geo_json_16034628dfae61b32f6532de4f1e23b7,
                },
            };
            let layer_control_fdbeab5e6fd1fa5376651a844f961972 = L.control.layers(
                layer_control_fdbeab5e6fd1fa5376651a844f961972_layers.base_layers,
                layer_control_fdbeab5e6fd1fa5376651a844f961972_layers.overlays,
                {
  &quot;position&quot;: &quot;topright&quot;,
  &quot;collapsed&quot;: true,
  &quot;autoZIndex&quot;: true,
}
            ).addTo(map_a4cca34007a35bb2a31a7e810e6d6500);

        
</script>
</html>" width="750" height="375" style="border:none !important;" "allowfullscreen"="" "webkitallowfullscreen"="" "mozallowfullscreen"=""></iframe>
</div>
</div>
<p>In the figure above, we start without loading any concurrent layers. Add or remove layers to visualized the concurrent scenes. Each layer will contain an EMIT scene footprint, concurrent ECOSTRESS scene footprint, and ECOSTRESS browse scene. There can be duplicate granules if multiple scenes intersect with a single scene.</p>
</section>
<section id="generating-a-list-of-urls" class="level2">
<h2 class="anchored" data-anchor-id="generating-a-list-of-urls">5. Generating a list of URLs</h2>
<p>With our concurrent geodataframe we can pull the links to scenes out of our <code>data_EMIT</code> and <code>data_ECO</code> column. To do this, define a function that groups the data by the <code>native-id_EMIT</code> and builds a dictionary of links corresponding to each. We use a sublist to help remove duplicates and lump multiple corresponding scenes to a single <code>native-id_EMIT</code> scene.</p>
<div id="cell-65" class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define Function to retrieve list of files intersecting with emit scene</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_file_list(concurrent_df):</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="co">    Retrieve a dictionary of EMIT scenes with a list of files from both instruments</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="co">    acquired at the location and time of lgdf scene.</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>    files <span class="op">=</span> (</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>        concurrent_df.groupby(prod1)[[<span class="ss">f"data_</span><span class="sc">{</span>p1_suffix<span class="sc">}</span><span class="ss">"</span>, <span class="ss">f"data_</span><span class="sc">{</span>p2_suffix<span class="sc">}</span><span class="ss">"</span>]]</span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>        .<span class="bu">apply</span>(</span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>            <span class="kw">lambda</span> group: <span class="bu">list</span>(</span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>                <span class="bu">dict</span>.fromkeys(</span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>                    [item <span class="cf">for</span> sublist <span class="kw">in</span> group[<span class="ss">f"data_</span><span class="sc">{</span>p1_suffix<span class="sc">}</span><span class="ss">"</span>] <span class="cf">for</span> item <span class="kw">in</span> sublist]</span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>                    <span class="op">+</span> [item <span class="cf">for</span> sublist <span class="kw">in</span> group[<span class="ss">f"data_</span><span class="sc">{</span>p2_suffix<span class="sc">}</span><span class="ss">"</span>] <span class="cf">for</span> item <span class="kw">in</span> sublist]</span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a>                )</span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a>        .to_dict()</span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb43-20"><a href="#cb43-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> files</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Use the function to retrieve the dictionary of links.</p>
<div id="cell-67" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;metadata&quot;,&quot;value&quot;:{}}" data-tags="[]" data-execution_count="33">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Retrieve Links</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>links_dict <span class="op">=</span> get_file_list(concurrent_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-68" class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># List EMIT Scenes (Keys)</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>eco_keys <span class="op">=</span> <span class="bu">list</span>(links_dict.keys())</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>eco_keys</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="34">
<pre><code>['ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01',
 'ECOv002_L2T_LSTE_26223_012_10SGD_20230219T202943_0710_01',
 'ECOv002_L2T_LSTE_26799_003_10SGD_20230328T221239_0711_02',
 'ECOv002_L2T_LSTE_26860_001_10SGD_20230401T203733_0712_02',
 'ECOv002_L2T_LSTE_26921_001_10SGD_20230405T190258_0712_02',
 'ECOv002_L2T_LSTE_27185_010_10SGD_20230422T195836_0710_01',
 'ECOv002_L2T_LSTE_27745_005_10SGD_20230528T220401_0711_02',
 'ECOv002_L2T_LSTE_27806_005_10SGD_20230601T202619_0711_02',
 'ECOv002_L2T_LSTE_28238_012_10SGD_20230629T170416_0711_02',
 'ECOv002_L2T_LSTE_28859_005_10SGD_20230808T173811_0712_02',
 'ECOv002_L2T_LSTE_28859_006_10SGD_20230808T173903_0712_02',
 'ECOv002_L2T_LSTE_29576_005_10SGD_20230923T232104_0712_02',
 'ECOv002_L2T_LSTE_29901_007_10SGD_20231014T223936_0712_02',
 'ECOv002_L2T_LSTE_29962_012_10SGD_20231018T210208_0712_02']</code></pre>
</div>
</div>
<div id="cell-69" class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Show links associated with Scene</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>links_dict[eco_keys[<span class="dv">0</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="35">
<pre><code>['https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01_water.tif',
 'https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01_cloud.tif',
 'https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01_view_zenith.tif',
 'https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01_height.tif',
 'https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01_QC.tif',
 'https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01_LST.tif',
 'https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01_LST_err.tif',
 'https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01_EmisWB.tif',
 'https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/EMITL2ARFL.001/EMIT_L2A_RFL_001_20230219T202939_2305013_002/EMIT_L2A_RFL_001_20230219T202939_2305013_002.nc',
 'https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/EMITL2ARFL.001/EMIT_L2A_RFL_001_20230219T202939_2305013_002/EMIT_L2A_RFLUNCERT_001_20230219T202939_2305013_002.nc',
 'https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/EMITL2ARFL.001/EMIT_L2A_RFL_001_20230219T202939_2305013_002/EMIT_L2A_MASK_001_20230219T202939_2305013_002.nc',
 'https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/EMITL2ARFL.001/EMIT_L2A_RFL_001_20230219T202951_2305013_003/EMIT_L2A_RFL_001_20230219T202951_2305013_003.nc',
 'https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/EMITL2ARFL.001/EMIT_L2A_RFL_001_20230219T202951_2305013_003/EMIT_L2A_RFLUNCERT_001_20230219T202951_2305013_003.nc',
 'https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/EMITL2ARFL.001/EMIT_L2A_RFL_001_20230219T202951_2305013_003/EMIT_L2A_MASK_001_20230219T202951_2305013_003.nc']</code></pre>
</div>
</div>
<p>Granules often have several assets associated with them, for example, <code>ECO_L2T_LSTE</code> has several assets: - Water Mask (water) - Cloud Mask (cloud) - Quality (QC) - Land Surface Temperature (LST) - Land Surface Temperature Error (LST_err) - Wide Band Emissivity (EmisWB) - Height (height) and <code>EMIT_L2A_RFL</code> has: - Reflectance - Reflectance Uncertainty - Masks</p>
<p>We can use string matching to iterate through our dictionary and remove assets we don’t want. Carefully choose some strings that can be used to identify desired assets, then use list comprehension to remove assets that don’t contain the strings from the desired assets.</p>
<div id="cell-71" class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Identify Strings</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>desired_assets <span class="op">=</span> [<span class="st">'_RFL_'</span>, <span class="st">'_MASK_'</span>, <span class="st">'_LST.'</span>]</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Iterate through dictionary and filter</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>filtered_links_dict <span class="op">=</span> {</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>    key: [asset <span class="cf">for</span> asset <span class="kw">in</span> assets <span class="cf">if</span> <span class="bu">any</span>(desired_asset <span class="kw">in</span> asset.split(<span class="st">'/'</span>)[<span class="op">-</span><span class="dv">1</span>] <span class="cf">for</span> desired_asset <span class="kw">in</span> desired_assets)]</span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> key, assets <span class="kw">in</span> links_dict.items()</span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a><span class="bu">list</span>(filtered_links_dict.keys())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="36">
<pre><code>['ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01',
 'ECOv002_L2T_LSTE_26223_012_10SGD_20230219T202943_0710_01',
 'ECOv002_L2T_LSTE_26799_003_10SGD_20230328T221239_0711_02',
 'ECOv002_L2T_LSTE_26860_001_10SGD_20230401T203733_0712_02',
 'ECOv002_L2T_LSTE_26921_001_10SGD_20230405T190258_0712_02',
 'ECOv002_L2T_LSTE_27185_010_10SGD_20230422T195836_0710_01',
 'ECOv002_L2T_LSTE_27745_005_10SGD_20230528T220401_0711_02',
 'ECOv002_L2T_LSTE_27806_005_10SGD_20230601T202619_0711_02',
 'ECOv002_L2T_LSTE_28238_012_10SGD_20230629T170416_0711_02',
 'ECOv002_L2T_LSTE_28859_005_10SGD_20230808T173811_0712_02',
 'ECOv002_L2T_LSTE_28859_006_10SGD_20230808T173903_0712_02',
 'ECOv002_L2T_LSTE_29576_005_10SGD_20230923T232104_0712_02',
 'ECOv002_L2T_LSTE_29901_007_10SGD_20231014T223936_0712_02',
 'ECOv002_L2T_LSTE_29962_012_10SGD_20231018T210208_0712_02']</code></pre>
</div>
</div>
<p>By selecting a key, we can show the urls from concurrent scenes and download or work with the data.</p>
<div id="cell-73" class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>filtered_links_dict[eco_keys[<span class="dv">0</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="37">
<pre><code>['https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01_LST.tif',
 'https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/EMITL2ARFL.001/EMIT_L2A_RFL_001_20230219T202939_2305013_002/EMIT_L2A_RFL_001_20230219T202939_2305013_002.nc',
 'https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/EMITL2ARFL.001/EMIT_L2A_RFL_001_20230219T202939_2305013_002/EMIT_L2A_MASK_001_20230219T202939_2305013_002.nc',
 'https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/EMITL2ARFL.001/EMIT_L2A_RFL_001_20230219T202951_2305013_003/EMIT_L2A_RFL_001_20230219T202951_2305013_003.nc',
 'https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/EMITL2ARFL.001/EMIT_L2A_RFL_001_20230219T202951_2305013_003/EMIT_L2A_MASK_001_20230219T202951_2305013_003.nc']</code></pre>
</div>
</div>
<p>We can preserve this dictionary format by writing this dictionary out to a .json file to use later.</p>
<div id="cell-75" class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">'../data/search_results.json'</span>, <span class="st">'w'</span>) <span class="im">as</span> f:</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>    json.dump(filtered_links_dict, f, indent<span class="op">=</span><span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="streaming-or-downloading-data" class="level2">
<h2 class="anchored" data-anchor-id="streaming-or-downloading-data">6. Streaming or Downloading Data</h2>
<p>For the workshop, we will stream the data, but either method can be used, and each has trade-offs based on the internet speed, storage space, or use case. The EMIT files are very large due to the number of bands, so operations can take some time if streaming with a slower internet connection. Since the workshop is hosted in a Cloud workspace, we can stream the data directly to the workspace.</p>
<section id="streaming-data-workflow" class="level3">
<h3 class="anchored" data-anchor-id="streaming-data-workflow">6.1 Streaming Data Workflow</h3>
<p>For an example of streaming both <strong>netCDF</strong> and <strong>Cloud Optimized GeoTIFF (COG) data</strong> please see notebook 2, <a href="../../VITALS1/python/02_Working_with_EMIT_Reflectance_and_ECOSTRESS_LST.html">Working With EMIT Reflectance and ECOSTRESS LST</a>.</p>
<blockquote class="blockquote">
<p><strong>If you plan to stream the data, you can stop here and move to the next notebook.</strong></p>
</blockquote>
</section>
<section id="downloading-data-workflow" class="level3">
<h3 class="anchored" data-anchor-id="downloading-data-workflow">6.2 Downloading Data Workflow</h3>
<p>To download the scenes, we can use the <code>earthaccess</code> library to authenticate then download the files.</p>
<p>First, log into Earthdata using the <code>login</code> function from the <code>earthaccess</code> library. The <code>persist=True</code> argument will create a local <code>.netrc</code> file if it doesn’t exist, or add your login info to an existing <code>.netrc</code> file. If no Earthdata Login credentials are found in the <code>.netrc</code> you’ll be prompted for them. As mentioned in section 1.2, this step is not necessary to conduct searches, but is needed to download or stream data.</p>
<p>We’ve included the canopy water content files in the repository to simplify the notebooks so users don’t need to perform that operation for the examples in the repository. This means that only 3 granules from our list are required to execute the notebooks and walk through the notebooks in the repository. These are included in a separate text file, <code>required_granules.txt</code>.</p>
<p>These can be downloading by uncommenting and running the following cells.</p>
<blockquote class="blockquote">
<p>Note: If interested users can download all of the files using the cell below and recreate all of the canopy water content files following a workflow similar to the example in notebooks 2 and 3 for all of the necessary scenes. To do this, uncomment the <code>file_list</code> object with the <code>search_results.txt</code> filepath to download all of the results rather than just what is required.</p>
</blockquote>
<div id="cell-79" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;metadata&quot;,&quot;value&quot;:{}}" data-tags="[]" data-execution_count="39">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Authenticate using earthaccess</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>earthaccess.login(persist<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="39">
<pre><code>&lt;earthaccess.auth.Auth at 0x1809a847620&gt;</code></pre>
</div>
</div>
<p>The commented cell below downloads all assets from our dictionary. For the subsequent tutorial notebooks, all of these files are not required. Instead, uncomment and run the final cell in the notebook to download a minimal subset required to do the rest of the tutorials.</p>
<div id="cell-81" class="cell" data-tags="[]">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># # Get requests https Session using Earthdata Login Info</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="co"># fs = earthaccess.get_requests_https_session()</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="co"># # Retrieve granule asset ID from URL (to maintain existing naming convention)</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="co"># for granule, assets in links_dict.items():</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="co">#     out_dir = os.path.abspath(os.path.join(os.getcwd(), os.pardir, "data"))</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a><span class="co">#     os.makedirs(out_dir, exist_ok=True)</span></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a><span class="co">#     for asset in assets:</span></span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a><span class="co">#         out_fn = f"{out_dir}{os.sep}{asset.split('/')[-1]}"</span></span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a><span class="co">#         if not os.path.isfile(out_fn):</span></span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a><span class="co">#             with fs.get(asset,stream=True) as src:</span></span>
<span id="cb56-11"><a href="#cb56-11" aria-hidden="true" tabindex="-1"></a><span class="co">#                 with open(out_fn,'wb') as dst:</span></span>
<span id="cb56-12"><a href="#cb56-12" aria-hidden="true" tabindex="-1"></a><span class="co">#                     for chunk in src.iter_content(chunk_size=64*1024*1024):</span></span>
<span id="cb56-13"><a href="#cb56-13" aria-hidden="true" tabindex="-1"></a><span class="co">#                         dst.write(chunk)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-82" class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># # Download Required Granules</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="co"># # Open Text File and Read Lines</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="co"># file_list = '../data/required_granules.txt'</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="co"># with open(file_list) as f:</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="co">#     urls = [line.rstrip('\n') for line in f]</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a><span class="co"># # Get requests https Session using Earthdata Login Info</span></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a><span class="co"># fs = earthaccess.get_requests_https_session()</span></span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a><span class="co"># # Retrieve granule asset ID from URL (to maintain existing naming convention)</span></span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a><span class="co"># for url in urls:</span></span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a><span class="co">#     granule_asset_id = url.split('/')[-1]</span></span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a><span class="co">#     # Define Local Filepath</span></span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a><span class="co">#     fp = f'../data/{granule_asset_id}'</span></span>
<span id="cb57-13"><a href="#cb57-13" aria-hidden="true" tabindex="-1"></a><span class="co">#     # Download the Granule Asset if it doesn't exist</span></span>
<span id="cb57-14"><a href="#cb57-14" aria-hidden="true" tabindex="-1"></a><span class="co">#     if not os.path.isfile(fp):</span></span>
<span id="cb57-15"><a href="#cb57-15" aria-hidden="true" tabindex="-1"></a><span class="co">#         with fs.get(url,stream=True) as src:</span></span>
<span id="cb57-16"><a href="#cb57-16" aria-hidden="true" tabindex="-1"></a><span class="co">#             with open(fp,'wb') as dst:</span></span>
<span id="cb57-17"><a href="#cb57-17" aria-hidden="true" tabindex="-1"></a><span class="co">#                 for chunk in src.iter_content(chunk_size=64*1024*1024):</span></span>
<span id="cb57-18"><a href="#cb57-18" aria-hidden="true" tabindex="-1"></a><span class="co">#                     dst.write(chunk)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Congratulations, now you have downloaded concurrent data from the ECOSTRESS and EMIT instruments on the ISS.</p>
</section>
</section>
<section id="contact-info" class="level2">
<h2 class="anchored" data-anchor-id="contact-info">Contact Info:</h2>
<p>Email: LPDAAC@usgs.gov<br>
Voice: +1-866-573-3222<br>
Organization: Land Processes Distributed Active Archive Center (LP DAAC)¹<br>
Website: <a href="https://www.earthdata.nasa.gov/centers/lp-daac" class="uri">https://www.earthdata.nasa.gov/centers/lp-daac</a></p>
<p>¹Work performed under USGS contract 140G0121D0001 for NASA contract NNG14HH33I.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/nasa\.github\.io\/VITALS\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>VSWIR Imaging and Thermal Applications, Learning, and Science.</p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>